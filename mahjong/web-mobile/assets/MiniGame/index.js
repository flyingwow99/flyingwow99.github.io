window['__require']=function t(a,b,c){function d(j,k){if(!b[j]){if(!a[j]){var m=j['split']('/');if(m=m[m['length']-0x1],!a[m]){var p='function'==typeof __require&&__require;if(!k&&p)return p(m,!0x0);if(f)return f(m,!0x0);throw new Error('Cannot\x20find\x20module\x20\x27'+j+'\x27');}j=m;}var q=b[j]={'exports':{}};a[j][0x0]['call'](q['exports'],function(u){return d(a[j][0x1][u]||u);},q,q['exports'],t,a,b,c);}return b[j]['exports'];}for(var f='function'==typeof __require&&__require,g=0x0;g<c['length'];g++)d(c[g]);return d;}({'BackendCtrl':[function(b,d,f){'use strict';cc['_RF']['push'](d,'8edfd/cGmBM34cxjCOSXCWx','BackendCtrl'),Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['BackendCtrl']=void 0x0;const g=b('../../Core/BaseCtrl'),h=b('../../Core/GF'),j=b('./BackendModel');f['BackendCtrl']=class extends g['BaseCtrl']{constructor(){super(...arguments),this['_model']=new j['BackendModel']();}static get['instance'](){var u;return null!==(u=this['_instance'])&&void 0x0!==u||(this['_instance']=h['GF']['ctrl']['getCtrl'](this)),this['_instance'];}['getBaseModel'](){return this['_model'];}['getModel'](){return this['_model'];}['onInit'](){super['onInit']();}['startAsUser'](u,v){h['GF']['storage']['setUserKey'](u),this['_model']['userKey']=u,this['_model']['loadAll'](),h['GF']['event']['emit'](m['BackendEvent']['BACKEND_START_SUCC']),v&&v(0x1,'OK',null);}['fetchData'](u,v){if(!this['_model']['all'])return;let w=this['_model']['all'][u];if(!w)return;let x=JSON['parse'](JSON['stringify'](w));v&&v(0x1,'OK',x);}['startMasterFight'](u,v){if(!this['_model']['all'])return;if(!k['Config']['DungeonMaster'][u])return void(v&&v(0x0,'参数错误',null));let w=this['_model']['all']['master']['last_passed_bid'];u==p['BackendLib']['getMasterNextBid'](w)?v&&v(0x1,'OK',null):v&&v(0x0,'关卡bid错误',null);}['sendMasterFightResult'](u,v,w){if(!this['_model']['all'])return;let x=k['Config']['DungeonMaster'][u];if(!x)return void(w&&w(0x0,'参数错误',null));let y=this['_model']['all']['master']['last_passed_bid'];if(u!=p['BackendLib']['getMasterNextBid'](y))return void(w&&w(0x0,'关卡bid错误',null));if(!v)return void(w&&w(0x1,'OK',null));let z=[[q['AssetID']['SHUFFLE'],x['reward_shuffle']],[q['AssetID']['HELP'],x['reward_help']]];this['addListToBag'](z),this['_model']['all']['master']['last_passed_bid']=u,h['GF']['event']['emit'](m['BackendEvent']['BACKEND_PUSH_MASTER'],JSON['parse'](JSON['stringify'](this['_model']['all']['master']))),this['_model']['saveAll'](),w&&w(0x1,'OK',null);}['addListToBag'](u){for(let v of u)this['addToBag'](v[0x0],v[0x1],!0x1);h['GF']['event']['emit'](m['BackendEvent']['BACKEND_PUSH_BAG'],JSON['parse'](JSON['stringify'](this['_model']['all']['bag'])));}['addToBag'](u,v,w=!0x0){var x;if(!this['_model']['all'])return;if(u<=0x0||v<=0x0)return;let y=this['_model']['all']['bag'];if(u<0x64)y['assets'][u]=(null!==(x=y['assets'][u])&&void 0x0!==x?x:0x0)+v;else{let z;for(let [A,B]of Object['entries'](y['items']))if(B['bid']==u){B['num']+=v,z=B;break;}z||(y['uid']++,z={'id':y['uid'],'bid':u,'num':v},y['items'][z['id']]=z);}w&&h['GF']['event']['emit'](m['BackendEvent']['BACKEND_PUSH_BAG'],JSON['parse'](JSON['stringify'](this['_model']['all']['bag'])));}['isBagEnoughList'](u){var v;if(!this['_model']['all'])return!0x1;let w=new Map();for(let x of u){let y=x[0x0],z=x[0x1];if(y<=0x0||z<0x0)return!0x1;w['set'](y,(null!==(v=w['get'](y))&&void 0x0!==v?v:0x0)+z);}for(let [A,B]of w['entries']())if(!this['isBagEnough'](A,B))return!0x1;return!0x0;}['isBagEnough'](u,v){return this['getItemNum'](u)>=v;}['getItemNum'](u){var v;if(!this['_model']['all'])return 0x0;let w=this['_model']['all']['bag'];if(u<0x64)return null!==(v=w['assets'][u])&&void 0x0!==v?v:0x0;{let x=0x0;for(let [y,z]of Object['entries'](w['items']))z['bid']==u&&(x+=z['num']);return x;}}['deductListFromBag'](u){if(!this['_model']['all'])return!0x1;if(this['isBagEnoughList'](u))return!0x1;for(let v of u){let w=v[0x0],x=v[0x1];w>0x0&&x>0x0&&this['deductFromBag'](w,x,!0x1);}return h['GF']['event']['emit'](m['BackendEvent']['BACKEND_PUSH_BAG'],JSON['parse'](JSON['stringify'](this['_model']['all']['bag']))),!0x0;}['deductFromBag'](u,v,w=!0x0){var x;if(!this['_model']['all'])return!0x1;if(u<=0x0||v<0x0)return!0x1;if(0x0==v)return!0x0;if(this['getItemNum'](u)<v)return!0x1;let y=this['_model']['all']['bag'];if(u<0x64){let z=null!==(x=y['assets'][u])&&void 0x0!==x?x:0x0;y['assets'][u]=z-v;}else{let A=[];for(let [B,C]of Object['entries'](y['items']))if(C['bid']==u){if(C['num']>=v){C['num']-=v,v=0x0,0x0==C['num']&&A['push'](B);break;}v-=C['num'],C['num']=0x0,A['push'](B);}for(let D of A)delete y['items'][D];}return w&&h['GF']['event']['emit'](m['BackendEvent']['BACKEND_PUSH_BAG'],JSON['parse'](JSON['stringify'](this['_model']['all']['bag']))),!0x0;}['onDestroy'](){Object['getPrototypeOf'](this)['constructor']['_instance']=null,super['onDestroy']();}};const k=b('../../Config/Config'),m=b('./BackendEvent'),p=b('./BackendLib'),q=b('../Define/GameEnum');cc['_RF']['pop']();},{'../../Config/Config':'Config','../../Core/BaseCtrl':'BaseCtrl','../../Core/GF':'GF','../Define/GameEnum':'GameEnum','./BackendEvent':'BackendEvent','./BackendLib':'BackendLib','./BackendModel':'BackendModel'}],'BackendDefine':[function(a,b,c){'use strict';cc['_RF']['push'](b,'e53a7NUTRNNMaXYD2MSr3uM','BackendDefine'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BackendDefine']=void 0x0;class d{}c['BackendDefine']=d,d['BACKEND_ALLDATA_VERSION']=0x1,cc['_RF']['pop']();},{}],'BackendEvent':[function(a,b,c){'use strict';cc['_RF']['push'](b,'f01eea31EhB9JGJUW3kQaOT','BackendEvent'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BackendEvent']=void 0x0,function(d){d['BACKEND_START_SUCC']='BackendEvent.BACKEND_START_SUCC',d['BACKEND_PUSH_BAG']='BackendEvent.BACKEND_PUSH_BAG',d['BACKEND_PUSH_MASTER']='BackendEvent.BACKEND_PUSH_MASTER';}(c['BackendEvent']||(c['BackendEvent']={})),cc['_RF']['pop']();},{}],'BackendLib':[function(a,b,c){'use strict';cc['_RF']['push'](b,'f8df2OYBRpNOrifmN8MCD3/','BackendLib'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BackendLib']=void 0x0,c['BackendLib']=class{static['getMasterNextBid'](f){let g=0x0;for(let [h,j]of Object['entries'](d['Config']['DungeonMaster']))j['bid']>f&&(0x0==g||j['bid']<g)&&(g=j['bid']);return g;}};const d=a('../../Config/Config');cc['_RF']['pop']();},{'../../Config/Config':'Config'}],'BackendModel':[function(a,b,c){'use strict';cc['_RF']['push'](b,'5b710rn2kdLnKBvQMvGgAl6','BackendModel'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BackendModel']=void 0x0;const d=a('../../Core/BaseModel'),f=a('./BackendDefine');c['BackendModel']=class extends d['BaseModel']{constructor(){super(...arguments),this['userKey']='';}['loadAll'](){let k=g['GF']['storage']['getSecretItem']('minimahjong.backends');null!=k||(k={}),k['version']||(k['bag']||(k['bag']={'uid':0x0,'assets':{[j['AssetID']['SHUFFLE']]:h['Config']['Const']['INIT_SHUFFLE_TIMES'],[j['AssetID']['HELP']]:h['Config']['Const']['INIT_HELP_TIMES']},'items':{}}),k['master']||(k['master']={'last_passed_bid':0x0}),k['version']=f['BackendDefine']['BACKEND_ALLDATA_VERSION']),this['all']=this['upgradeData'](k);}['upgradeData'](k){return k['version'],f['BackendDefine']['BACKEND_ALLDATA_VERSION'],k;}['saveAll'](){g['GF']['storage']['setSecretItem']('minimahjong.backends',this['all']);}};const g=a('../../Core/GF'),h=a('../../Config/Config'),j=a('../Define/GameEnum');cc['_RF']['pop']();},{'../../Config/Config':'Config','../../Core/BaseModel':'BaseModel','../../Core/GF':'GF','../Define/GameEnum':'GameEnum','./BackendDefine':'BackendDefine'}],'BagCtrl':[function(b,c,d){'use strict';cc['_RF']['push'](c,'dbc89zzGWFEeJlSVXSRfTgv','BagCtrl'),Object['defineProperty'](d,'__esModule',{'value':!0x0}),d['BagCtrl']=void 0x0;const f=b('../../Core/BaseCtrl'),g=b('../../Core/GF'),h=b('./BagModel');d['BagCtrl']=class extends f['BaseCtrl']{constructor(){super(...arguments),this['_model']=new h['BagModel']();}static get['instance'](){var p;return null!==(p=this['_instance'])&&void 0x0!==p||(this['_instance']=g['GF']['ctrl']['getCtrl'](this)),this['_instance'];}['getBaseModel'](){return this['getModel']();}['getModel'](){return this['_model'];}['onInit'](){super['onInit'](),this['fetchData'](),this['subscribe']['add'](k['BackendEvent']['BACKEND_START_SUCC'],this['fetchData'],this),this['subscribe']['add'](k['BackendEvent']['BACKEND_PUSH_BAG'],this['onPushData'],this);}['fetchData'](){j['BackendCtrl']['instance']['fetchData']('bag',(p,q,u)=>{this['_model']['setData'](u),g['GF']['event']['emit'](m['BagEvent']['BAG_DATA_CHANGED']);});}['onPushData'](p){this['_model']['setData'](p),g['GF']['event']['emit'](m['BagEvent']['BAG_DATA_CHANGED']);}['getItemNum'](p){var q;if(p<0x64)return null!==(q=this['_model']['assets'][p])&&void 0x0!==q?q:0x0;{let u=0x0;for(let [v,w]of Object['entries'](this['_model']['items']))w['bid']==p&&(u+=w['num']);return u;}}['isEnough'](p,q){return this['getItemNum'](p)>=q;}['isEnoughList'](p){var q;let u=new Map();for(let v of p){let w=v[0x0],x=v[0x1];if(w<=0x0||x<0x0)return!0x1;u['set'](w,(null!==(q=u['get'](w))&&void 0x0!==q?q:0x0)+x);}for(let [y,z]of u['entries']())if(!this['isEnough'](y,z))return!0x1;return!0x0;}['onDestroy'](){Object['getPrototypeOf'](this)['constructor']['_instance']=null,super['onDestroy']();}};const j=b('../Backend/BackendCtrl'),k=b('../Backend/BackendEvent'),m=b('./BagEvent');cc['_RF']['pop']();},{'../../Core/BaseCtrl':'BaseCtrl','../../Core/GF':'GF','../Backend/BackendCtrl':'BackendCtrl','../Backend/BackendEvent':'BackendEvent','./BagEvent':'BagEvent','./BagModel':'BagModel'}],'BagEvent':[function(a,b,c){'use strict';cc['_RF']['push'](b,'2084f1m55ZI7IMKSRvCl0oP','BagEvent'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BagEvent']=void 0x0,(c['BagEvent']||(c['BagEvent']={}))['BAG_DATA_CHANGED']='BagEvent.BAG_DATA_CHANGED',cc['_RF']['pop']();},{}],'BagItem':[function(b,d,f){'use strict';cc['_RF']['push'](d,'c2842LXGIBHyonuMORSYdvv','BagItem');var g=this&&this['__decorate']||function(u,v,w,x){var y,z=arguments['length'],A=z<0x3?v:null===x?x=Object['getOwnPropertyDescriptor'](v,w):x;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])A=Reflect['decorate'](u,v,w,x);else for(var B=u['length']-0x1;B>=0x0;B--)(y=u[B])&&(A=(z<0x3?y(A):z>0x3?y(v,w,A):y(v,w))||A);return z>0x3&&A&&Object['defineProperty'](v,w,A),A;};Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['BagItem']=void 0x0;const h=b('../../../../Core/BaseUIListItem'),{ccclass:j,property:k}=cc['_decorator'];let m=class extends h['BaseUIListItem']{constructor(){super(...arguments),this['imgBox']=null,this['imgIcon']=null,this['labelName']=null,this['labelNum']=null,this['bid']=0x0,this['num']=0x0;}['onInit'](){super['onInit']();}['onOpen'](){super['onOpen']();}['setItemData'](u){var v;super['setItemData'](u),this['bid']=u['bid'],this['num']=null!==(v=u['num'])&&void 0x0!==v?v:0x0;}['updateView'](){let u=p['Config']['Item'][this['bid']];if(u){if(this['imgBox']){let v=q['PathUtil']['getItemQualityBoxPath'](u['quality']);this['changeSpriteFrame'](this['imgBox'],v);}if(this['imgIcon']){let w=q['PathUtil']['getIconPath'](u['res']);this['changeSpriteFrame'](this['imgIcon'],w);}this['labelName']&&(this['labelName']['string']=u['name']),this['labelNum']&&(this['num']>0x0?(this['labelNum']['node']['active']=!0x0,this['labelNum']['string']=this['num']['toString']()):this['labelNum']['node']['active']=!0x1);}}};g([k(cc['Sprite'])],m['prototype'],'imgBox',void 0x0),g([k(cc['Sprite'])],m['prototype'],'imgIcon',void 0x0),g([k(cc['Label'])],m['prototype'],'labelName',void 0x0),g([k(cc['Label'])],m['prototype'],'labelNum',void 0x0),m=g([j],m),f['BagItem']=m;const p=b('../../../../Config/Config'),q=b('../../../Util/PathUtil');cc['_RF']['pop']();},{'../../../../Config/Config':'Config','../../../../Core/BaseUIListItem':'BaseUIListItem','../../../Util/PathUtil':'PathUtil'}],'BagModel':[function(a,b,c){'use strict';cc['_RF']['push'](b,'1828eMJ8PdDnbMy6kNetLNa','BagModel'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BagModel']=void 0x0;const d=a('../../Core/BaseModel');c['BagModel']=class extends d['BaseModel']{constructor(){super(...arguments),this['assets']={},this['items']={};}['setData'](f){f&&f['assets']&&(this['assets']=f['assets'],this['items']=f['items']);}},cc['_RF']['pop']();},{'../../Core/BaseModel':'BaseModel'}],'BaseCtrl':[function(b,d,f){'use strict';cc['_RF']['push'](d,'8b9d23pxL9Dzr0znV+GNYI/','BaseCtrl'),Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['BaseCtrl']=void 0x0;const g=b('./CtrlDefine'),h=b('./ResAgent'),j=b('./EventSubscriber'),k=b('./TimerManager'),{ccclass:m,property:p}=cc['_decorator'];f['BaseCtrl']=class extends g['BaseCtrlComponent']{['onDestroy'](){this['clearEnhanceCommon'](!0x0),q['GF']['timer']['stopAllForTarget'](this),super['onDestroy']();}get['res'](){var u;return null!==(u=this['_res'])&&void 0x0!==u||(this['_res']=this['getComponent'](h['ResAgent'])||this['addComponent'](h['ResAgent'])),this['_res'];}get['subscribe'](){var u;return null!==(u=this['_subscribe'])&&void 0x0!==u||(this['_subscribe']=this['getComponent'](j['EventSubscriber'])||this['addComponent'](j['EventSubscriber'])),this['_subscribe'];}get['timer'](){var u;return null!==(u=this['_timer'])&&void 0x0!==u||(this['_timer']=this['getComponent'](k['TimerManager'])||this['addComponent'](k['TimerManager'])),this['_timer'];}['clearEnhanceCommon'](u){u?this['_res']&&this['_res']['isValid']&&(this['_res']['clearAll'](),u&&(this['_res']=null)):this['_res']&&this['_res']['isValid']&&this['_res']['clearLoading'](),this['_subscribe']&&this['_subscribe']['isValid']&&(this['_subscribe']['clearAll'](),u&&(this['_subscribe']=null)),this['_timer']&&this['_timer']['isValid']&&(this['_timer']['clearAll'](),u&&(this['_timer']=null));}};const q=b('./GF');cc['_RF']['pop']();},{'./CtrlDefine':'CtrlDefine','./EventSubscriber':'EventSubscriber','./GF':'GF','./ResAgent':'ResAgent','./TimerManager':'TimerManager'}],'BaseDef':[function(a,b,c){'use strict';cc['_RF']['push'](b,'1f84fM+MMJNba2iOeosOyHc','BaseDef'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['asType']=c['_G']=void 0x0,c['_G']=globalThis,c['asType']=function(){},cc['_RF']['pop']();},{}],'BaseEntity':[function(b,d,f){'use strict';cc['_RF']['push'](d,'b3401SyBoRLN5Yl47eg9t1W','BaseEntity'),Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['BaseEntity']=void 0x0;const g=b('./EntityDefine'),h=b('./GF'),j=b('./ResAgent'),k=b('./EventSubscriber'),m=b('./TimerManager'),{ccclass:p,property:q}=cc['_decorator'];f['BaseEntity']=class extends g['BaseEntityComponent']{['onInit'](){super['onInit']();}['onWillOpen'](){super['onWillOpen']();}['onOpen'](){super['onOpen']();}['onClose'](u){this['clearEnhanceCommon'](!0x1),h['GF']['timer']['stopAllForTarget'](this),super['onClose'](u);}['onDestroy'](){this['clearEnhanceCommon'](!0x0),h['GF']['timer']['stopAllForTarget'](this),h['GF']['entity']['close'](this,!0x1,!0x0),super['onDestroy']();}['closeMe'](u=!0x0){h['GF']['entity']['close'](this,u);}['setOwner'](u){h['GF']['entity']['setOwner'](this,u);}get['res'](){var u;return null!==(u=this['_res'])&&void 0x0!==u||(this['_res']=this['getComponent'](j['ResAgent'])||this['addComponent'](j['ResAgent'])),this['_res'];}get['subscribe'](){var u;return null!==(u=this['_subscribe'])&&void 0x0!==u||(this['_subscribe']=this['getComponent'](k['EventSubscriber'])||this['addComponent'](k['EventSubscriber'])),this['_subscribe'];}get['timer'](){var u;return null!==(u=this['_timer'])&&void 0x0!==u||(this['_timer']=this['getComponent'](m['TimerManager'])||this['addComponent'](m['TimerManager'])),this['_timer'];}['clearEnhanceCommon'](u){u?this['_res']&&this['_res']['isValid']&&(this['_res']['clearAll'](),u&&(this['_res']=null)):this['_res']&&this['_res']['isValid']&&this['_res']['clearLoading'](),this['_subscribe']&&this['_subscribe']['isValid']&&(this['_subscribe']['clearAll'](),u&&(this['_subscribe']=null)),this['_timer']&&this['_timer']['isValid']&&(this['_timer']['clearAll'](),u&&(this['_timer']=null));}['changeSpriteFrame'](u,v){u&&v&&this['res']['load'](v,cc['SpriteFrame'],(w,x)=>{x&&(null==u?void 0x0:u['isValid'])&&(u['spriteFrame']=x);});}},cc['_RF']['pop']();},{'./EntityDefine':'EntityDefine','./EventSubscriber':'EventSubscriber','./GF':'GF','./ResAgent':'ResAgent','./TimerManager':'TimerManager'}],'BaseModel':[function(a,b,c){'use strict';cc['_RF']['push'](b,'128156GQVtL5J3aug6wkent','BaseModel'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BaseModel']=void 0x0,c['BaseModel']=class{},cc['_RF']['pop']();},{}],'BaseUIEntity':[function(a,b,c){'use strict';cc['_RF']['push'](b,'de07ecibUNEfLrNH821R0Ja','BaseUIEntity'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BaseUIEntity']=void 0x0;const d=a('./BaseEntity'),{ccclass:f,property:g}=cc['_decorator'];c['BaseUIEntity']=class extends d['BaseEntity']{['onInit'](){super['onInit'](),this['doLayout']();}['doLayout'](){}['isUIEntity'](){return!0x0;}},cc['_RF']['pop']();},{'./BaseEntity':'BaseEntity'}],'BaseUIItem':[function(a,b,c){'use strict';cc['_RF']['push'](b,'bd4feojIidN0pK1TLvCK2nY','BaseUIItem'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BaseUIItem']=void 0x0;const d=a('./BaseUIEntity'),{ccclass:f,property:g}=cc['_decorator'];c['BaseUIItem']=class extends d['BaseUIEntity']{},cc['_RF']['pop']();},{'./BaseUIEntity':'BaseUIEntity'}],'BaseUIListItem':[function(a,b,c){'use strict';cc['_RF']['push'](b,'1a9e6a/CERJ+rA9VlNvf/CF','BaseUIListItem'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BaseUIListItem']=void 0x0;const d=a('./BaseUIItem'),{ccclass:f,property:g}=cc['_decorator'];c['BaseUIListItem']=class extends d['BaseUIItem']{constructor(){super(...arguments),this['_itemIndex']=-0x1,this['_itemData']=null,this['_itemUid']='',this['_itemSelected']=!0x1,this['_ext_data_provider']=null;}['setItemIndex'](h){this['_itemIndex']=h;}['getItemIndex'](){return this['_itemIndex'];}['setItemUid'](h){this['_itemUid']=h;}['getItemUid'](){return this['_itemUid'];}['setItemSelected'](h){this['_itemSelected']=h;}['isItemSelected'](){return this['_itemSelected'];}['setItemData'](h){this['_itemData']=h;}['getItemData'](){return this['_itemData'];}['setItemExtDataProvider'](h){this['_ext_data_provider']=h;}['getItemExtDataProvider'](){return this['_ext_data_provider'];}['getItemExtDataValue'](h){if(this['_ext_data_provider']&&this['_ext_data_provider']['getItemExtDataValue'])return this['_ext_data_provider']['getItemExtDataValue'](this['getItemData'](),h);}['setItemExtDataValue'](h,j){this['_ext_data_provider']&&this['_ext_data_provider']['setItemExtDataValue']&&this['_ext_data_provider']['setItemExtDataValue'](this['getItemData'](),h,j);}['onSVTouchBegan'](h){}['onSVTouchCancel'](h){}['onSVTouchEnded'](h){}},cc['_RF']['pop']();},{'./BaseUIItem':'BaseUIItem'}],'BaseUIPanel':[function(a,b,c){'use strict';cc['_RF']['push'](b,'476f9DtwctH6pqvPIoBI7g1','BaseUIPanel'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BaseUIPanel']=void 0x0;const d=a('./BaseUIEntity'),f=a('./UIUtil'),{ccclass:g,property:h}=cc['_decorator'];c['BaseUIPanel']=class extends d['BaseUIEntity']{['doLayout'](){f['UIUtil']['fillParent'](this['node']),f['UIUtil']['updateWidgetAlignment'](this['node']);}},cc['_RF']['pop']();},{'./BaseUIEntity':'BaseUIEntity','./UIUtil':'UIUtil'}],'BaseUIView':[function(b,d,f){'use strict';cc['_RF']['push'](d,'395142dC7dPbaGJ0LzUqc5X','BaseUIView'),Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['BaseUIView']=f['UIViewFlag']=void 0x0;const g=b('./BaseUIEntity'),h=b('./UIUtil'),j=b('./UIClick'),{ccclass:k,property:m}=cc['_decorator'];(function(u){u[u['NONE']=0x0]='NONE',u[u['FULL_SCREEN']=0x1]='FULL_SCREEN',u[u['MAIN']=0x2]='MAIN',u[u['STICKER']=0x4]='STICKER';}(f['UIViewFlag']||(f['UIViewFlag']={})),f['BaseUIView']=class extends g['BaseUIEntity']{['getViewParam'](){return{};}['doLayout'](){h['UIUtil']['fillParent'](this['node']),h['UIUtil']['updateWidgetAlignment'](this['node']);for(let v of this['node']['children'])if('@SafeArea'==v['name']){let w=cc['sys']['getSafeAreaRect']();v['setAnchorPoint'](cc['Vec2']['ZERO']),v['setContentSize'](w['width'],w['height']),v['setPosition'](w['x'],w['y']);}let u=this['getViewParam']();if(u['is_add_mask']){let x=new cc['Node']();if(x['name']='@mask',x['group']=this['node']['group'],x['setContentSize'](cc['view']['getVisibleSize']()),!u['is_mask_transparent']){let z=x['addComponent'](cc['Graphics']);z['fillColor']=new cc['Color'](0x0,0x0,0x0,0xcc);let A=cc['view']['getVisibleSize']();z['rect'](-A['width']/0x2,-A['height']/0x2,A['width'],A['height']),z['fill']();}let y=x['addComponent'](j['UIClick']);u['is_mask_touch_close']&&y['setClickListener'](()=>{this['closeMe']();}),x['parent']=this['node'],x['setSiblingIndex'](0x0),h['UIUtil']['fillParent'](x);}}['onOpen'](){super['onOpen'](),p['GF']['ui']['onUIViewOpen'](this),p['GF']['event']['emit'](q['UIViewEvent']['UIVIEW_OPEN'],this);}['onClose'](u){p['GF']['ui']['onUIViewClose'](this),p['GF']['event']['emit'](q['UIViewEvent']['UIVIEW_CLOSE'],this),super['onClose'](u);}});const p=b('./GF'),q=b('./EventDefine');cc['_RF']['pop']();},{'./BaseUIEntity':'BaseUIEntity','./EventDefine':'EventDefine','./GF':'GF','./UIClick':'UIClick','./UIUtil':'UIUtil'}],'ButtonCD':[function(a,b,c){'use strict';cc['_RF']['push'](b,'5ed4aBpSlJIzYwUR4Sx0w7k','ButtonCD');var d=this&&this['__decorate']||function(k,m,p,q){var u,v=arguments['length'],w=v<0x3?m:null===q?q=Object['getOwnPropertyDescriptor'](m,p):q;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])w=Reflect['decorate'](k,m,p,q);else for(var x=k['length']-0x1;x>=0x0;x--)(u=k[x])&&(w=(v<0x3?u(w):v>0x3?u(m,p,w):u(m,p))||w);return v>0x3&&w&&Object['defineProperty'](m,p,w),w;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['ButtonCD']=void 0x0;const {ccclass:f,property:g}=cc['_decorator'];let h=class extends cc['Component']{constructor(){super(...arguments),this['cd']=0.2,this['unscale']=!0x0,this['isCDing']=!0x1,this['accTime']=0x0;}['onLoad'](){this['targetButton']=this['node']['getComponent'](cc['Button']);}['onEnable'](){this['targetButton']&&this['targetButton']['node']['on']('click',this['onButtonClick'],this);}['onDisable'](){this['targetButton']&&this['targetButton']['node']['off']('click',this['onButtonClick'],this);}['onButtonClick'](k){k==this['targetButton']&&(this['targetButton']['interactable']=!0x1,this['isCDing']=!0x0,this['accTime']=0x0);}['update'](k){this['isCDing']&&(this['accTime']+=this['unscale']?k:k*j['GameRoot']['timeScale'],this['accTime']>=this['cd']&&(this['targetButton']['interactable']=!0x0,this['isCDing']=!0x1,this['accTime']=0x0));}};d([g],h['prototype'],'cd',void 0x0),d([g],h['prototype'],'unscale',void 0x0),h=d([f],h),c['ButtonCD']=h;const j=a('./GameRoot');cc['_RF']['pop']();},{'./GameRoot':'GameRoot'}],'CCUtil':[function(a,b,c){'use strict';cc['_RF']['push'](b,'d61628INeRL6ZmCOVBeeNVZ','CCUtil'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['CCUtil']=void 0x0;const {ccclass:d,property:f}=cc['_decorator'];c['CCUtil']=class{static['getOrAddChild'](h,j,k=!0x0){if(!h||!j)return null;let l=h['getChildByName'](j);return l||((l=new cc['Node']())['name']=j,l['group']=h['group'],l['parent']=h,k&&g['UIUtil']['fillParent'](l),l);}static['getComponentExactly'](h,j){if(h)for(let k of h['getComponents'](cc['Component']))if(Object['getPrototypeOf'](k)['constructor']===j)return k;return null;}static['getOrCreateComponent'](h,j){if(h){let k=h['getComponent'](j);return k||(k=h['addComponent'](j)),k;}return null;}static['getComponentInAncestor'](h,j){if(!h)return null;let k=h instanceof cc['Component']?h['node']:h;for(;null!=k&&!(k instanceof cc['Scene']);){let l=k['getComponent'](j);if(l)return l;k=k['parent'];}return null;}static['toVec2'](h){return new cc['Vec2'](h['x'],h['y']);}static['toVec3'](h){return new cc['Vec3'](h['x'],h['y'],0x0);}};const g=a('./UIUtil');cc['_RF']['pop']();},{'./UIUtil':'UIUtil'}],'ClientConfig':[function(a,b,c){'use strict';cc['_RF']['push'](b,'d1541o2qHVCTY/sFqIaPoZ3','ClientConfig'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['ClientConfig']=void 0x0,c['ClientConfig']={},cc['_RF']['pop']();},{}],'CommonCtrl':[function(a,b,c){'use strict';cc['_RF']['push'](b,'33676YVCqNAWoLSqkf7gOFK','CommonCtrl'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['CommonCtrl']=void 0x0;const d=a('../../Core/BaseCtrl'),f=a('../../Core/GF');c['CommonCtrl']=class extends d['BaseCtrl']{constructor(){super(...arguments),this['toastViewId']=0x0,this['toastQueue']=[];}static get['instance'](){var k;return null!==(k=this['_instance'])&&void 0x0!==k||(this['_instance']=f['GF']['ctrl']['getCtrl'](this)),this['_instance'];}['toast'](k,m=0x0){this['toastQueue']['push']({'type':m,'msg':k});let p=f['GF']['entity']['getEntityAs'](g['ToastView'],this['toastViewId']);p?p['onToastReq']():f['GF']['entity']['isOpening'](this['toastViewId'])||(this['toastViewId']=g['ToastView']['create']());}['popToast'](){return this['toastQueue']['shift']();}['getSoundPath'](k){let m=h['Config']['Audio'][k];if(!m)return'';let p=j['PathUtil']['getSoundPath'](m['file']);return p['endsWith']('.mp3')&&(p=p['substring'](0x0,p['length']-0x4)),p;}['playMusic'](k){let m=this['getSoundPath'](k);m&&f['GF']['sound']['playMusic'](m,!0x0);}['playEffect'](k,m=!0x1){let p=this['getSoundPath'](k);if(p&&(f['GF']['sound']['playEffect'](p),m&&f['GF']['sound']['isMusicPlaying']())){let q=h['Config']['Audio'][k];q&&q['length']>0x0&&(f['GF']['sound']['pauseMusic'](),this['timer']['delayCallUI'](q['length']+0.3,()=>{f['GF']['sound']['resumeMusic']();}));}}['onDestroy'](){f['GF']['entity']['close'](this['toastViewId']),this['toastViewId']=0x0,Object['getPrototypeOf'](this)['constructor']['_instance']=null,super['onDestroy']();}};const g=a('./View/ToastView'),h=a('../../Config/Config'),j=a('../Util/PathUtil');cc['_RF']['pop']();},{'../../Config/Config':'Config','../../Core/BaseCtrl':'BaseCtrl','../../Core/GF':'GF','../Util/PathUtil':'PathUtil','./View/ToastView':'ToastView'}],'CommonLib':[function(a,b,c){'use strict';cc['_RF']['push'](b,'1ebb1pWSutEt4YxFTOLEClF','CommonLib'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['CommonLib']=void 0x0,c['CommonLib']=class{static['setQualityColor'](f,g){var h;f&&(f['node']['color']=null!==(h=d['QualityColorMap'][g])&&void 0x0!==h?h:cc['Color']['WHITE']);}};const d=a('../Define/GameDefine');cc['_RF']['pop']();},{'../Define/GameDefine':'GameDefine'}],'ConfigManager':[function(a,b,c){'use strict';cc['_RF']['push'](b,'9a36a05edRET7qLkUO5s6uK','ConfigManager'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['ConfigManager']=void 0x0;const {ccclass:d,property:f}=cc['_decorator'];c['ConfigManager']=class extends cc['Component']{constructor(){super(...arguments),this['tableMap']=new Map();}['parseCfg'](g,h,j){if(h instanceof Array){let k={};h['forEach'](l=>{l['hasOwnProperty']('Bid')?k[l['Bid']]=l:l['hasOwnProperty']('Id')&&(k[l['Id']]=l);}),this['tableMap']['set'](g,k),j&&(j[g]=k);}else{for(let [l,m]of Object['entries'](h))this['tableMap']['set'](l,m);j&&Object['assign'](j,h);}}['getTable'](g){return this['tableMap']['get'](g)||null;}['getRow'](g,h){let j=this['getTable'](g);return j&&j[h]||null;}},cc['_RF']['pop']();},{}],'Config':[function(a,b,c){'use strict';cc['_RF']['push'](b,'f2dffFcoiZE4KZeF09XPKqP','Config'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['Config']=void 0x0,c['Config']={},cc['_RF']['pop']();},{}],'CtrlDefine':[function(a,b,c){'use strict';cc['_RF']['push'](b,'64745nxzuNNGp4s6fYwMRlw','CtrlDefine'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BaseCtrlComponent']=void 0x0;const {ccclass:d,property:f}=cc['_decorator'];c['BaseCtrlComponent']=class extends cc['Component']{['getBaseModel'](){return null;}['onInit'](){}['onDestroy'](){}},cc['_RF']['pop']();},{}],'CtrlManager':[function(a,b,c){'use strict';cc['_RF']['push'](b,'091a2qkOClKtLDaiSz0p6Ag','CtrlManager');var d=this&&this['__decorate']||function(j,k,m,p){var q,u=arguments['length'],v=u<0x3?k:null===p?p=Object['getOwnPropertyDescriptor'](k,m):p;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])v=Reflect['decorate'](j,k,m,p);else for(var w=j['length']-0x1;w>=0x0;w--)(q=j[w])&&(v=(u<0x3?q(v):u>0x3?q(k,m,v):q(k,m))||v);return u>0x3&&v&&Object['defineProperty'](k,m,v),v;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['CtrlManager']=void 0x0;const {ccclass:f,property:g}=cc['_decorator'];let h=class extends cc['Component']{constructor(){super(...arguments),this['_ctrlMap']=new Map();}['getCtrl'](j){let k=this['_ctrlMap']['get'](j);if(!k){let l=new cc['Node']();l['name']=j['name'],l['parent']=this['node'],k=l['addComponent'](j),this['_ctrlMap']['set'](j,k),k['onInit']();}return k;}['clearAll'](){let j=Array['from'](this['_ctrlMap']['values']());this['_ctrlMap']['clear']();for(let k of j)k&&k['isValid']&&(k['node']['removeFromParent'](!0x1),k['node']['destroy']());}['onDestroy'](){this['clearAll']();}};h=d([f],h),c['CtrlManager']=h,cc['_RF']['pop']();},{}],'DungeonCtrl':[function(b,d,f){'use strict';cc['_RF']['push'](d,'d451356MjxErIoXT3wsCSVj','DungeonCtrl'),Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['DungeonCtrl']=void 0x0;const g=b('../../Core/BaseCtrl'),h=b('../../Core/GF'),j=b('./DungeonModel');f['DungeonCtrl']=class extends g['BaseCtrl']{constructor(){super(...arguments),this['_model']=new j['DungeonModel']();}static get['instance'](){var u;return null!==(u=this['_instance'])&&void 0x0!==u||(this['_instance']=h['GF']['ctrl']['getCtrl'](this)),this['_instance'];}['getBaseModel'](){return this['getModel']();}['getModel'](){return this['_model'];}['onInit'](){super['onInit'](),this['fetchData'](),this['subscribe']['add'](m['BackendEvent']['BACKEND_START_SUCC'],this['fetchData'],this),this['subscribe']['add'](m['BackendEvent']['BACKEND_PUSH_MASTER'],this['onPushData'],this);}['fetchData'](){k['BackendCtrl']['instance']['fetchData']('master',(u,v,w)=>{this['_model']['setData'](w),h['GF']['event']['emit'](p['DungeonEvent']['DUNGEON_MASTER_DATA_CHANGED']);});}['onPushData'](u){this['_model']['setData'](u),h['GF']['event']['emit'](p['DungeonEvent']['DUNGEON_MASTER_DATA_CHANGED']);}['getLastPassedBid'](){return this['_model']['last_passed_bid'];}['getMasterNextBid'](){return q['BackendLib']['getMasterNextBid'](this['_model']['last_passed_bid']);}['startMasterFight'](u,v){k['BackendCtrl']['instance']['startMasterFight'](u,(w,x)=>{v&&v(w,x);});}['onDestroy'](){Object['getPrototypeOf'](this)['constructor']['_instance']=null,super['onDestroy']();}};const k=b('../Backend/BackendCtrl'),m=b('../Backend/BackendEvent'),p=b('./DungeonEvent'),q=b('../Backend/BackendLib');cc['_RF']['pop']();},{'../../Core/BaseCtrl':'BaseCtrl','../../Core/GF':'GF','../Backend/BackendCtrl':'BackendCtrl','../Backend/BackendEvent':'BackendEvent','../Backend/BackendLib':'BackendLib','./DungeonEvent':'DungeonEvent','./DungeonModel':'DungeonModel'}],'DungeonDefine':[function(a,b,c){'use strict';cc['_RF']['push'](b,'d2846pQHv5J+LY4iP1xjcT+','DungeonDefine'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['DungeonDefine']=c['DungeonTypeID']=void 0x0,function(d){d[d['TEST']=0x0]='TEST',d[d['MASTER']=0x1]='MASTER';}(c['DungeonTypeID']||(c['DungeonTypeID']={})),c['DungeonDefine']=class{},cc['_RF']['pop']();},{}],'DungeonEvent':[function(a,b,c){'use strict';cc['_RF']['push'](b,'fcab3c6aH5Eipv9RrnzXy8L','DungeonEvent'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['DungeonEvent']=void 0x0,(c['DungeonEvent']||(c['DungeonEvent']={}))['DUNGEON_MASTER_DATA_CHANGED']='DungeonEvent.DUNGEON_MASTER_DATA_CHANGED',cc['_RF']['pop']();},{}],'DungeonModel':[function(a,b,c){'use strict';cc['_RF']['push'](b,'a53ebpfn6pEvbb3jVJrfKH1','DungeonModel'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['DungeonModel']=void 0x0;const d=a('../../Core/BaseModel');c['DungeonModel']=class extends d['BaseModel']{constructor(){super(...arguments),this['last_passed_bid']=0x0;}['setData'](f){f&&(this['last_passed_bid']=f['last_passed_bid']);}},cc['_RF']['pop']();},{'../../Core/BaseModel':'BaseModel'}],'ElementMgr':[function(b,f,j){'use strict';cc['_RF']['push'](f,'d777dAkKVVHV6/vBbhSeaqG','ElementMgr'),Object['defineProperty'](j,'__esModule',{'value':!0x0}),j['ElementMgr']=void 0x0;const k=b('../FightModuleBase');j['ElementMgr']=class extends k['FightModuleBase']{constructor(){super(...arguments),this['layerCount']=0x1,this['formatLayers']=[],this['cxMin']=0x0,this['cxMax']=0x1,this['cyMin']=0x0,this['cyMax']=0x1,this['layoutOrig']=cc['Vec2']['ZERO'],this['layoutScale']=0x1,this['layerTiles']=[],this['layerCellMap']=[],this['formatTileCount']=0x0,this['_waitClosing']=[];}['onEnterInit'](){this['onInitComplete']();}['createFormatLayers'](D){for(let E=this['formatLayers']['length'];E<=D;++E){let F=B['CCUtil']['getOrAddChild'](q['FightProcess']['elementLayer'],'format'+E,!0x0);this['formatLayers']['push'](F);}}['getFormatLayer'](D){var E;return null!==(E=this['formatLayers'][D])&&void 0x0!==E?E:null;}['getTopLayer'](){var D;return null!==(D=this['formatLayers'][this['formatLayers']['length']-0x1])&&void 0x0!==D?D:null;}['createMjFormation'](D,E=null){this['clearMjFormation'](),this['layerCount']=D['length'],this['createFormatLayers'](this['layerCount']),this['cxMin']=this['cyMin']=0x0,this['cxMax']=this['cyMax']=0x1,this['formatTileCount']=0x0;for(let K of D){for(let [L,M,N]of K)L-0x1<this['cxMin']&&(this['cxMin']=L-0x1),L>this['cxMax']&&(this['cxMax']=L),M-0x1<this['cyMin']&&(this['cyMin']=M-0x1),M>this['cyMax']&&(this['cyMax']=M);this['formatTileCount']+=K['length'];}let F=this['cxMax']-this['cxMin']+0x1,G=this['cyMax']-this['cyMin']+0x1;this['layoutOrig']=new cc['Vec2'](-F*y['FightDefine']['MJ_FORMAT_CELL_WIDTH']*0.5,G*y['FightDefine']['MJ_FORMAT_CELL_HEIGHT']*0.5),this['layoutScale']=0x1;for(let O=0x0;O<this['layerCount'];++O){this['layerTiles'][O]=[],this['layerCellMap'][O]=[];for(let P=this['cxMin'];P<=this['cxMax'];++P){this['layerCellMap'][O][P]=[];for(let Q=this['cyMin'];Q<=this['cyMax'];++Q)this['layerCellMap'][O][P][Q]=null;}}let H=0x0;for(let R of D)H+=R['length'];let I=0x0,J=0x0;for(let S of D){for(let [T,U,V,W]of S)null!=W||(W=0x0),this['createTile'](V,J,T,U,W,()=>{++I>=H&&(E&&E(),E=null);});J++;}}['calcTilePosition'](D,E){return new cc['Vec2'](this['layoutOrig']['x']+D*y['FightDefine']['MJ_FORMAT_CELL_WIDTH'],this['layoutOrig']['y']-E*y['FightDefine']['MJ_FORMAT_CELL_HEIGHT']);}['createTile'](D,E,F,G,H,I=null){var J;if(!m['Config']['Tile'][D])return z['LogUtil']['err']('createTile\x20bad\x20bid',D),-0x1;let K={'position':this['calcTilePosition'](F,G),'data':{'bid':D,'layerIndex':E,'cx':F,'cy':G,'flag':H}};return p['GF']['entity']['open'](A['MjTile'],x['PathUtil']['getPrefabPath']('Tile/MjTile'),null!==(J=this['formatLayers'][E])&&void 0x0!==J?J:q['FightProcess']['elementLayer'],K,L=>{I&&I(L);});}['onMjTileOpen'](D){this['registerMjTile'](D);}['onMjTileClose'](D){this['unregisterMjTile'](D);}['registerMjTile'](D){let E=D['layerIndex'],F=this['layerTiles'][E];F||(F=[],this['layerTiles'][E]=F),F['push'](D);let G=this['layerCellMap'][E];G||(G=[],this['layerCellMap'][E]=G);for(let H of D['getCellList']()){let I=H['x'],J=H['y'];G[I]||(G[I]=[]),G[I][J]=D;}D['setRegistered'](!0x0);}['unregisterMjTile'](D){D['setRegistered'](!0x1);let E=D['layerIndex'],F=this['layerTiles'][E];if(F){let H=F['indexOf'](D);H>=0x0&&F['splice'](H,0x1);}let G=this['layerCellMap'][E];if(G)for(let I of D['getCellList']()){let J=I['x'],K=I['y'];G[J]&&(G[J][K]=null);}}['getFormatTileCount'](){return this['formatTileCount'];}['getLeftTileCount'](){let D=0x0;for(let E of this['layerTiles'])D+=E['length'];return D;}['getClearedTileCount'](){return this['formatTileCount']-this['getLeftTileCount']();}['getTileAt'](D,E,F){var G;let H=this['layerCellMap'][D];return H&&H[E]&&null!==(G=H[E][F])&&void 0x0!==G?G:null;}['takeOutTile'](D){let E=this['getTopLayer']();E&&(D['node']['parent']=E),this['unregisterMjTile'](D);}['travelTiles'](D){for(let E of this['layerTiles'])for(let F=0x0,G=E['length'];F<G;++F){let H=E[F];if(H&&!D(H))return;}}['isAllTileCleared'](){return this['getLeftTileCount']()<=0x0;}['closeAllTiles'](){for(let D of this['layerTiles']){for(let E=D['length']-0x1;E>=0x0;--E){let F=D[E];F&&F['closeMe']();}D['length']=0x0;}}['clearMjFormation'](){this['closeAllTiles']();}['createShakeLock'](D,E){let F=this['getFormatLayer'](D);if(!F)return-0x1;let G={'position':E};return p['GF']['entity']['open'](C['ShakeLock'],x['PathUtil']['getPrefabPath']('Tile/ShakeLock'),F,G);}['createOnceEffect'](D,E,F='play',G=null){let H={'position':E,'data':{'playName':F,'playCount':0x1}};return p['GF']['entity']['open'](w['FightEffect'],x['PathUtil']['getEffectResPath'](D),null!=G?G:q['FightProcess']['airLayer'],H);}['addToDelayClose'](D){D&&this['_waitClosing']['indexOf'](D)<0x0&&this['_waitClosing']['push'](D);}['update'](D){if(this['_waitClosing']['length']>0x0)for(let E=this['_waitClosing']['length']-0x1;E>=0x0;--E){let F=this['_waitClosing'][E];F&&(F['closeMe'](),this['_waitClosing']['splice'](E,0x1));}}['onDestroy'](){this['_waitClosing']['length']=0x0,p['GF']['entity']['closeAll'](D=>D instanceof v['FightElement']),super['onDestroy']();}};const m=b('../../../Config/Config'),p=b('../../../Core/GF'),q=b('../FightProcess'),v=b('./FightElement'),w=b('./FightEffect'),x=b('../../Util/PathUtil'),y=b('../FightDefine'),z=b('../../../Core/LogUtil'),A=b('./MjTile'),B=b('../../../Core/CCUtil'),C=b('./ShakeLock');cc['_RF']['pop']();},{'../../../Config/Config':'Config','../../../Core/CCUtil':'CCUtil','../../../Core/GF':'GF','../../../Core/LogUtil':'LogUtil','../../Util/PathUtil':'PathUtil','../FightDefine':'FightDefine','../FightModuleBase':'FightModuleBase','../FightProcess':'FightProcess','./FightEffect':'FightEffect','./FightElement':'FightElement','./MjTile':'MjTile','./ShakeLock':'ShakeLock'}],'EntityDefine':[function(a,b,c){'use strict';cc['_RF']['push'](b,'38129TX2p5JqYNBcfw+HbwQ','EntityDefine'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['BaseEntityComponent']=c['EntityInternalState']=void 0x0;const d=a('./LogUtil'),{ccclass:f,property:g}=cc['_decorator'];var h;(function(j){j[j['NONE']=0x1]='NONE',j[j['INITED']=0x2]='INITED',j[j['OPENED']=0x3]='OPENED',j[j['CLOSED']=0x4]='CLOSED';}(h=c['EntityInternalState']||(c['EntityInternalState']={})),c['BaseEntityComponent']=class extends cc['Component']{constructor(){super(...arguments),this['entityId']=0x0,this['_entityInternalState']=h['NONE'],this['_ownerEntityId']=0x0,this['_belongingEntitys']=[];}['onInit'](){}['onWillOpen'](){}['onOpen'](){}['onClose'](j){}['onDestroy'](){}['_triggerOpen'](){var j,k;if(this['_entityInternalState']==h['NONE']||this['_entityInternalState']==h['CLOSED']){if(this['_entityInternalState']==h['NONE'])try{this['onInit']();}catch(l){d['LogUtil']['err']('entity.onInit\x20exception:',l['stack']);}this['_entityInternalState']=h['INITED'];}if(this['_entityInternalState']==h['INITED']){try{this['onWillOpen']();}catch(m){d['LogUtil']['err']('entity.onWillOpen\x20exception:',m['stack']);}if(null===(j=this['openParams'])||void 0x0===j?void 0x0:j['willOpenCallback'])try{this['openParams']['willOpenCallback'](this);}catch(p){d['LogUtil']['err']('entity.openParams.willOpenCallback\x20exception:',p['stack']);}try{this['onOpen']();}catch(q){d['LogUtil']['err']('entity.onOpen\x20exception:',q['stack']);}if(null===(k=this['openParams'])||void 0x0===k?void 0x0:k['openCallback'])try{this['openParams']['openCallback'](this);}catch(u){d['LogUtil']['err']('entity.openParams.openCallback\x20exception:',u['stack']);}this['_entityInternalState']=h['OPENED'];}}['_triggerClose'](j){var k;if(this['_entityInternalState']==h['OPENED']){if(null===(k=this['openParams'])||void 0x0===k?void 0x0:k['closeCallback'])try{this['openParams']['closeCallback'](this,j);}catch(l){d['LogUtil']['err']('entity.openParams.closeCallback\x20exception:',l['stack']);}try{this['onClose'](j);}catch(m){d['LogUtil']['err']('entity.onClose\x20exception:',m['stack']);}this['_entityInternalState']=h['CLOSED'];}}get['isOpened'](){return this['_entityInternalState']==h['OPENED'];}get['isValidEntity'](){return this['_entityInternalState']>=h['NONE']&&this['_entityInternalState']!=h['CLOSED'];}['isUIEntity'](){return!0x1;}['getEntityName'](){return this['constructor']['name']+this['entityId'];}},cc['_RF']['pop']());},{'./LogUtil':'LogUtil'}],'EntityManager':[function(b,f,g){'use strict';cc['_RF']['push'](f,'8500d4qTWxJdJ7noFK2sO0u','EntityManager');var j,k=this&&this['__decorate']||function(A,B,C,D){var E,F=arguments['length'],G=F<0x3?B:null===D?D=Object['getOwnPropertyDescriptor'](B,C):D;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])G=Reflect['decorate'](A,B,C,D);else for(var H=A['length']-0x1;H>=0x0;H--)(E=A[H])&&(G=(F<0x3?E(G):F>0x3?E(B,C,G):E(B,C))||G);return F>0x3&&G&&Object['defineProperty'](B,C,G),G;};Object['defineProperty'](g,'__esModule',{'value':!0x0}),g['EntityManager']=void 0x0;const m=b('./GameRoot'),p=b('./ResManager'),q=b('./EntityDefine'),v=b('./LogUtil'),w=b('./CCUtil'),{ccclass:x,property:y}=cc['_decorator'];let z=j=class extends cc['Component']{constructor(){super(...arguments),this['_openingMap']=new Map(),this['_entityMap']=new Map();}static['newEntityId'](){return this['_autoId']=this['_autoId']+0x1,this['_autoId'];}['open'](A,B,C,D=null,E=null){if('string'==typeof B)return this['openEntityByPath'](A,B,C,D,E);if(B instanceof cc['Prefab']){let F=cc['instantiate'](B);return this['openEntityByNode'](A,F,C,D,E);}return B instanceof cc['Node']?this['openEntityByNode'](A,B,C,D,E):B instanceof cc['Component']?this['openEntityByNode'](A,B['node'],C,D,E):-0x1;}['openEntityByPath'](A,B,C,D=null,E=null){if(!A||!B)return-0x1;let F=(null==D?void 0x0:D['id'])&&D['id']>0x0?null==D?void 0x0:D['id']:j['newEntityId']();if(F<=0x0||this['_openingMap']['has'](F)||this['_entityMap']['has'](F))return-0x1;let G=m['GameRoot']['instance']['getManager'](p['ResManager'])['load'](B,cc['Prefab'],null,(H,I)=>{var J;if((null===(J=this['_openingMap'])||void 0x0===J?void 0x0:J['delete'](F))&&I&&(!C||cc['isValid'](C))){let K=cc['instantiate'](I);null!=D||(D={}),D['id']=F,this['openEntityByNode'](A,K,C,D,E);}});return this['_openingMap']['set'](F,G),F;}['openEntityByNode'](A,B,C,D=null,E=null){if(!B||!B['isValid'])return-0x1;let F=0x0;if((F=(null==D?void 0x0:D['id'])&&D['id']>0x0?D['id']:j['newEntityId']())<=0x0||this['_openingMap']['has'](F)||this['_entityMap']['has'](F))return-0x1;let G=w['CCUtil']['getComponentExactly'](B,A);if(G){if(G['_entityInternalState']!=q['EntityInternalState']['NONE']&&G['_entityInternalState']!=q['EntityInternalState']['CLOSED'])return v['LogUtil']['err']('openEntityByNode\x20bad\x20_entityInternalState:',A['name']),-0x1;}else{let H=B['getComponent'](q['BaseEntityComponent']);H&&H['destroy'](),G=B['addComponent'](A);}G['entityId']=F,G['openParams']=null!=D?D:{},(null==D?void 0x0:D['group'])&&(B['group']=D['group']),(null==D?void 0x0:D['position'])&&B['setPosition'](D['position']),this['_entityMap']['set'](F,G),C?G['node']['parent']=C:cc['director']['getScene']()['addChild'](G['node']),G['node']['active']=!0x0;try{G['_triggerOpen']();}catch(I){v['LogUtil']['err']('entity._triggerOpen\x20exception:',I['stack']);}if(E)try{E(G);}catch(J){v['LogUtil']['err']('openEntity\x20onComplete\x20exception:',J['stack']);}return F;}['close'](A,B=!0x0,C=!0x1){if('number'==typeof A&&this['_openingMap']['has'](A)){let G=this['_openingMap']['get'](A);return m['GameRoot']['instance']['getManager'](p['ResManager'])['cancelRequest'](G),void this['_openingMap']['delete'](A);}let D='number'==typeof A?this['getEntity'](A):A;if(!D)return;let E=D['entityId'];if(!this['_entityMap']['delete'](E))return;this['closeBelongingEntitys'](D,!0x0);try{D['_triggerClose'](C);}catch(H){v['LogUtil']['err']('entity._triggerClose\x20exception:',H['stack']);}this['setOwner'](D,null);let F=D['node'];F['active']=!0x1,B&&!C&&(F['removeFromParent'](!0x1),F['destroy']());}['closeBelongingEntitys'](A,B=!0x0){let C='number'==typeof A?this['getEntity'](A):A;if(C&&C['_belongingEntitys']['length']>0x0){let D=C['_belongingEntitys']['slice'](0x0,C['_belongingEntitys']['length']);C['_belongingEntitys']['length']=0x0;for(let E of D)this['close'](E,B);}}['setOwner'](A,B){let C='number'==typeof A?this['getEntity'](A):A;if(C){if(C['_ownerEntityId']>0x0){let D=this['getEntity'](C['_ownerEntityId']);if(D){let E=D['_belongingEntitys']['indexOf'](C['entityId']);E>=0x0&&D['_belongingEntitys']['splice'](E,0x1);}C['_ownerEntityId']=0x0;}if(0x0!=B&&null!=B){let F='number'==typeof B?this['getEntity'](B):B;F&&F!=C&&(F['_belongingEntitys']['indexOf'](C['entityId'])<0x0&&F['_belongingEntitys']['push'](C['entityId']),C['_ownerEntityId']=F['entityId']);}}}['getEntity'](A,B=!0x1){let C=this['_entityMap']['get'](A);return C&&cc['isValid'](C,B)?C:null;}['getEntityAs'](A,B,C=!0x1){let D=this['getEntity'](B,C);return D&&D instanceof A?D:null;}['isValidEntity'](A,B=!0x1){return null!=this['getEntity'](A,B);}['isOpening'](A){return this['_openingMap']['has'](A);}['closeAll'](A=null,B=!0x0){let C=[];for(let [D,E]of this['_entityMap'])A&&!A(E)||C['push'](D);for(let F of C)this['close'](F,B);}['closeAllNoneUI'](A=null,B=!0x0){let C=[];for(let [D,E]of this['_entityMap'])E['isUIEntity']()||A&&!A(E)||C['push'](D);for(let F of C)this['close'](F,B);}['cancelAllOpening'](){let A=m['GameRoot']['instance']['getManager'](p['ResManager']);for(let [B,C]of this['_openingMap'])A['cancelRequest'](C);this['_openingMap']['clear']();}['onDestroy'](){this['cancelAllOpening'](),this['closeAll']();}};z['_autoId']=0x2710,z=j=k([x],z),g['EntityManager']=z,cc['_RF']['pop']();},{'./CCUtil':'CCUtil','./EntityDefine':'EntityDefine','./GameRoot':'GameRoot','./LogUtil':'LogUtil','./ResManager':'ResManager'}],'EntitySingleton':[function(a,b,c){'use strict';cc['_RF']['push'](b,'d33cf9oul9PyaKN9GHwzB2E','EntitySingleton'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['EntitySingleton']=void 0x0;class d{static['open'](g,h,j,k=null,m=null){if(!g)return-0x1;let p=this['_entMap']['get'](g);if(p&&p>0x0&&(f['GF']['entity']['isValidEntity'](p)||f['GF']['entity']['isOpening'](p)))return p;let q=f['GF']['entity']['open'](g,h,j,k,m);return this['_entMap']['set'](g,q),q;}static['openReplace'](g,h,j,k=null,m=null){if(!g)return-0x1;let p=this['_entMap']['get'](g);p&&p>0x0&&((f['GF']['entity']['isValidEntity'](p)||f['GF']['entity']['isOpening'](p))&&f['GF']['entity']['close'](p),this['_entMap']['delete'](g));let q=f['GF']['entity']['open'](g,h,j,k,m);return this['_entMap']['set'](g,q),q;}static['do'](g,h){if(!g||!h)return-0x1;let j=this['_entMap']['get'](g);if(j&&j>0x0&&(f['GF']['entity']['isValidEntity'](j)||f['GF']['entity']['isOpening'](j)))return j;let k=h();return this['_entMap']['set'](g,k),k;}static['doReplace'](g,h){if(!g||!h)return-0x1;let j=this['_entMap']['get'](g);j&&j>0x0&&((f['GF']['entity']['isValidEntity'](j)||f['GF']['entity']['isOpening'](j))&&f['GF']['entity']['close'](j),this['_entMap']['delete'](g));let k=h();return this['_entMap']['set'](g,k),k;}}c['EntitySingleton']=d,d['_entMap']=new Map();const f=a('./GF');cc['_RF']['pop']();},{'./GF':'GF'}],'EntityWrap':[function(b,c,d){'use strict';cc['_RF']['push'](c,'2ac07g4OZNErpvILVmJ1Ajm','EntityWrap'),Object['defineProperty'](d,'__esModule',{'value':!0x0}),d['EntityWrap']=d['BaseEntityWrap']=void 0x0;const f=b('./GF'),g=b('./UIUtil'),{ccclass:h,property:j}=cc['_decorator'];class k extends cc['Component']{}d['BaseEntityWrap']=k;class m extends k{constructor(){super(...arguments),this['_wrapOpt']=null,this['_innerPrefabPath']=null,this['_innerEntityType']=null,this['_innerEntityId']=0x0,this['_innerNode']=null,this['_innerEntity']=null;}static['create'](p,q,u,v=null){let w=new cc['Node']();w['name']='EntityWrap',u?w['parent']=u:cc['director']['getScene']()['addChild'](w),v&&(v['size']&&w['setContentSize'](v['size']),u&&v['sizeToParent']&&(w['setAnchorPoint'](u['getAnchorPoint']()),w['setContentSize'](u['getContentSize']()),w['setPosition'](cc['Vec3']['ZERO'])));let x=w['addComponent'](m);return x['_wrapOpt']=v,x['_innerPrefabPath']=q,x['_innerEntityType']=p,x;}['open'](p,q){if(this['_innerEntityId']>0x0)return;if(!this['_innerEntityType']||!this['_innerPrefabPath'])return;let u=this['_wrapOpt'];this['_innerEntityId']=f['GF']['entity']['open'](this['_innerEntityType'],this['_innerNode']?this['_innerNode']:this['_innerPrefabPath'],this['node'],p,v=>{this['_innerNode']=v['node'],this['_innerEntity']=v,this['node']['group']=v['node']['group'],u&&u['sizeToInner']&&(this['node']['setContentSize'](v['node']['getContentSize']()),g['UIUtil']['putInsideParentCorner'](v['node'],cc['Vec2']['ZERO'])),q&&q(v);});}['closeMe'](p=!0x0){this['_innerEntityId']>0x0&&(f['GF']['entity']['close'](this['_innerEntityId'],p),this['_innerEntityId']=0x0,this['_innerEntity']=null,p&&(this['_innerNode']=null));}['onDestroy'](){this['_innerEntityId']=0x0,this['_innerEntity']=null,this['_innerNode']=null;}get['inner'](){return this['_innerEntity'];}}d['EntityWrap']=m,m['View']={'sizeToParent':!0x0},m['Panel']={'sizeToParent':!0x0},m['Item']={'sizeToInner':!0x0},cc['_RF']['pop']();},{'./GF':'GF','./UIUtil':'UIUtil'}],'EventDefine':[function(a,b,c){'use strict';cc['_RF']['push'](b,'fd7d0EB/OZB+L6mVyukG6dY','EventDefine'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['UIViewEvent']=void 0x0,function(d){d['UIVIEW_OPEN']='UIEvent.UIVIEW_OPEN',d['UIVIEW_CLOSE']='UIEvent.UIVIEW_CLOSE';}(c['UIViewEvent']||(c['UIViewEvent']={})),cc['_RF']['pop']();},{}],'EventManager':[function(b,d,f){'use strict';cc['_RF']['push'](d,'3e4a6lcnVxFp64khE1KiEDO','EventManager');var g,h=this&&this['__decorate']||function(u,v,w,x){var y,z=arguments['length'],A=z<0x3?v:null===x?x=Object['getOwnPropertyDescriptor'](v,w):x;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])A=Reflect['decorate'](u,v,w,x);else for(var B=u['length']-0x1;B>=0x0;B--)(y=u[B])&&(A=(z<0x3?y(A):z>0x3?y(v,w,A):y(v,w))||A);return z>0x3&&A&&Object['defineProperty'](v,w,A),A;};Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['EventManager']=void 0x0;const j=b('./LogUtil'),{ccclass:k,property:m}=cc['_decorator'];class p{constructor(){this['id']=0x0,this['cbFunc']=null,this['cbTarget']=null,this['isOnce']=!0x1;}}let q=g=class extends cc['Component']{constructor(){super(...arguments),this['_eventLsMap']=new Map(),this['_eventId2Name']=new Map(),this['_dirty_cnt']=0x0,this['_dirty_set']=new Set(),this['_send_overlay']=0x0;}['nextId'](){return g['_eventId']=g['_eventId']+0x1,g['_eventId'];}['on'](u,v,w=null,x=!0x1){if(!u)return j['LogUtil']['warn']('addEvent\x20eventName\x20is\x20nil'),-0x1;if(!v)return j['LogUtil']['warn']('addEvent\x20cbFunc\x20is\x20nil'),-0x1;let y=this['_eventLsMap']['get'](u);if(y&&y['find'](B=>B&&B['cbFunc']==v&&B['cbTarget']==w))return j['LogUtil']['warn']('addEvent\x20duplicate,\x20ignore!'),-0x1;let z=this['nextId'](),A=new p();return A['id']=z,A['cbFunc']=v,A['cbTarget']=w,A['isOnce']=x,y||(y=[],this['_eventLsMap']['set'](u,y)),y['push'](A),this['_eventId2Name']['set'](z,u),z;}['once'](u,v,w=null){return this['on'](u,v,w,!0x0);}['off'](u,v,w){return'number'==typeof u?this['offId'](u):this['offName'](u,v,w);}['offId'](u){let v=this['_eventId2Name']['get'](u);if(!v)return u;let w=this['_eventLsMap']['get'](v);if(!w)return u;for(let x=0x0,y=w['length'];x<y;x++){let z=w[x];if(z&&z['id']==u){w[x]=null,this['_eventId2Name']['delete'](u),this['_dirty_cnt']++,this['_dirty_set']['add'](v);break;}}return u;}['offName'](u,v,w){if(!v)return-0x1;let x=this['_eventLsMap']['get'](u);if(!x)return-0x1;for(let y=0x0,z=x['length'];y<z;y++){let A=x[y];if(A&&A['cbFunc']==v&&A['cbTarget']==w)return x[y]=null,this['_eventId2Name']['delete'](A['id']),this['_dirty_cnt']++,this['_dirty_set']['add'](u),A['id'];}return-0x1;}['targetOff'](u){u&&this['_eventLsMap']['forEach']((v,w)=>{for(let x=0x0,y=v['length'];x<y;x++){let z=v[x];z&&z['cbTarget']==u&&(v[x]=null,this['_eventId2Name']['delete'](z['id']),this['_dirty_cnt']++,this['_dirty_set']['add'](w));}});}['emit'](u,v,w,x,y,z){if(!u)return j['LogUtil']['warn']('emit\x20eventName\x20is\x20empty'),!0x1;let A=this['_eventLsMap']['get'](u);if(!A)return!0x1;this['_send_overlay']++;try{for(let B=0x0,C=A['length'];B<C;B++){let D=A[B];if(D&&D['cbFunc']&&(!(D['cbTarget']instanceof cc['Object'])||cc['isValid'](D['cbTarget'],!0x0))){try{D['cbTarget']?D['cbFunc']['call'](D['cbTarget'],v,w,x,y,z):D['cbFunc'](v,w,x,y,z);}catch(E){j['LogUtil']['err']('emit\x20exception:',u,E['stack']);}D['isOnce']&&(A[B]=null,this['_eventId2Name']['delete'](D['id']),this['_dirty_cnt']++,this['_dirty_set']['add'](u));}}}catch(F){j['LogUtil']['err']('emit\x20exception:',u,F['stack']);}return this['_send_overlay']--,this['doRemoveDelay'](),!0x0;}['doRemoveDelay'](){if(this['_send_overlay']<=0x0&&this['_dirty_cnt']>0xa){for(let u of this['_dirty_set']){let v=this['_eventLsMap']['get'](u);v&&(v=v['filter'](w=>null!=w),this['_eventLsMap']['set'](u,v));}this['_dirty_cnt']=0x0,this['_dirty_set']['clear']();}}['clearAll'](){for(let [u,v]of this['_eventLsMap'])for(let w=0x0;w<v['length'];++w)v[w]=null;this['_eventLsMap']['clear'](),this['_eventId2Name']['clear'](),this['_dirty_cnt']=0x0,this['_dirty_set']['clear']();}['onDestroy'](){this['clearAll']();}};q['_eventId']=0x0,q=g=h([k],q),f['EventManager']=q,cc['_RF']['pop']();},{'./LogUtil':'LogUtil'}],'EventSubscriber':[function(a,b,c){'use strict';cc['_RF']['push'](b,'ac348Obp5NON5k0GJA9z2Gv','EventSubscriber');var d=this&&this['__decorate']||function(k,m,p,q){var u,v=arguments['length'],w=v<0x3?m:null===q?q=Object['getOwnPropertyDescriptor'](m,p):q;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])w=Reflect['decorate'](k,m,p,q);else for(var x=k['length']-0x1;x>=0x0;x--)(u=k[x])&&(w=(v<0x3?u(w):v>0x3?u(m,p,w):u(m,p))||w);return v>0x3&&w&&Object['defineProperty'](m,p,w),w;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['EventSubscriber']=void 0x0;const f=a('./GF'),{ccclass:g,property:h}=cc['_decorator'];let j=class extends cc['Component']{constructor(){super(...arguments),this['_eventMap']=new Map(),this['_nodeEventList']=[];}['add'](k,m,p){let q=f['GF']['event']['on'](k,m,p);return q>0x0&&this['_eventMap']['set'](q,p),q;}['addOnce'](k,m,p){let q=f['GF']['event']['once'](k,m,p);return q>0x0&&this['_eventMap']['set'](q,p),q;}['remove'](k,m,p){let q=f['GF']['event']['off'](k,m,p);q>0x0&&this['_eventMap']['delete'](q);}['removeAllForTarget'](k){if(!k)return;let m=Array['from'](this['_eventMap']['keys']());for(let p of m)this['_eventMap']['get'](p)==k&&(this['_eventMap']['delete'](p),f['GF']['event']['off'](p));}['addNodeEvent'](k,m,p,q,u){if(!k||!m||!p)return;let v=k instanceof cc['Node']?k:k['node'];v&&v['isValid']&&(this['_nodeEventList']['findIndex'](w=>w&&w['node']==v&&w['event']==m&&w['callback']==p&&w['target']==q)>=0x0||(this['_nodeEventList']['push']({'node':v,'event':m,'callback':p,'target':q}),v['on'](m,p,q,u)));}['removeNodeEvent'](k,m,p,q){if(!k||!m||!p)return;let u=k instanceof cc['Node']?k:k['node'];if(!u||!u['isValid'])return;let v=this['_nodeEventList']['findIndex'](w=>w&&w['node']==u&&w['event']==m&&w['callback']==p&&w['target']==q);v>=0x0&&(this['_nodeEventList']['splice'](v,0x1),u['off'](m,p,q));}['removeAllNodeEventForTarget'](k){if(k)for(let m=this['_nodeEventList']['length']-0x1;m>=0x0;--m){let p=this['_nodeEventList'][m];p&&p['target']==k&&(this['_nodeEventList']['splice'](m,0x1),p['node']['isValid']&&p['node']['off'](p['event'],p['callback'],p['target']));}}['clearAll'](){Array['from'](this['_eventMap']['keys']())['forEach'](m=>{f['GF']['event']['off'](m);}),this['_eventMap']['clear']();let k=[...this['_nodeEventList']];this['_nodeEventList']['length']=0x0,k['forEach'](m=>{m&&m['node']['isValid']&&m['node']['off'](m['event'],m['callback'],m['target']);});}['onDestroy'](){this['clearAll']();}};j=d([g],j),c['EventSubscriber']=j,cc['_RF']['pop']();},{'./GF':'GF'}],'FightBaseView':[function(a,b,c){'use strict';cc['_RF']['push'](b,'347b3lQp5JG4oI6tBzBzyNG','FightBaseView'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightBaseView']=void 0x0;const d=a('../../../Core/BaseUIView');c['FightBaseView']=class extends d['BaseUIView']{['onInit'](){super['onInit']();}['onOpen'](){var g,h;super['onOpen'](),null===(h=null===(g=f['FightProcess']['instance'])||void 0x0===g?void 0x0:g['viewMgr'])||void 0x0===h||h['onFightViewOpen'](this);}['onClose'](g){var h,j;null===(j=null===(h=f['FightProcess']['instance'])||void 0x0===h?void 0x0:h['viewMgr'])||void 0x0===j||j['onFightViewClose'](this),super['onClose'](g);}};const f=a('../FightProcess');cc['_RF']['pop']();},{'../../../Core/BaseUIView':'BaseUIView','../FightProcess':'FightProcess'}],'FightCtrl':[function(b,d,f){'use strict';cc['_RF']['push'](d,'99511AHf4hC3ZSeIOZQPkeD','FightCtrl'),Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['FightCtrl']=void 0x0;const g=b('../../Core/BaseCtrl'),{ccclass:j,property:k}=cc['_decorator'];class m extends g['BaseCtrl']{static get['instance'](){var y;return null!==(y=this['_instance'])&&void 0x0!==y||(this['_instance']=p['GF']['ctrl']['getCtrl'](this)),this['_instance'];}['startFight'](y){if(!y)return void q['LogUtil']['err']('startFight\x20NO\x20param');let z=y['dungeonBid'];if(!x['Config']['Dungeon'][z])return void q['LogUtil']['err']('startFight\x20NO\x20dungeon\x20cfg!',z);if(q['LogUtil']['info']('startFight!'),this['isFighting']())return;let A=new cc['Node']();A['name']=m['FIGHT_OBJ_NAME'],A['parent']=this['node'];let B=A['addComponent'](v['FightProcess']);this['_curProcess']=B,B['startProcess'](y);}['clearFight'](){this['_curProcess']&&this['_curProcess']['isValid']&&(this['_curProcess']['node']['removeFromParent'](!0x1),this['_curProcess']['node']['destroy']()),this['_curProcess']=null;}['getCurFightProcess'](){return this['_curProcess'];}['isFighting'](){return null!=this['_curProcess'];}['setFightSpeed'](y){this['isFighting']()&&(w['GameRoot']['timeScale']=y);}['onDestroy'](){this['clearFight'](),Object['getPrototypeOf'](this)['constructor']['_instance']=null,super['onDestroy']();}}f['FightCtrl']=m,m['FIGHT_OBJ_NAME']='@FightObj';const p=b('../../Core/GF'),q=b('../../Core/LogUtil'),v=b('./FightProcess'),w=b('../../Core/GameRoot'),x=b('../../Config/Config');cc['_RF']['pop']();},{'../../Config/Config':'Config','../../Core/BaseCtrl':'BaseCtrl','../../Core/GF':'GF','../../Core/GameRoot':'GameRoot','../../Core/LogUtil':'LogUtil','./FightProcess':'FightProcess'}],'FightDefine':[function(a,b,c){'use strict';cc['_RF']['push'](b,'3c6b5VQtNJMSqJIPawYw89k','FightDefine'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['MjTileFlag']=c['ModelDirType']=c['FightState']=c['FightDefine']=void 0x0;class d{}c['FightDefine']=d,d['MJ_TILE_WIDTH']=0x68,d['MJ_TILE_HEIGHT']=0x88,d['MJ_FORMAT_CELL_WIDTH']=0.5*d['MJ_TILE_WIDTH'],d['MJ_FORMAT_CELL_HEIGHT']=0.5*d['MJ_TILE_HEIGHT'],d['MJ_TILE_ICE_CREAM_BID']=0x3e9,d['MJ_TILE_STAR_BID']=0x3ea,d['MJ_TILE_COLLECT_SCORE']=0x3eb,function(f){f[f['INIT']=0x0]='INIT',f[f['PREPARE']=0x1]='PREPARE',f[f['PLAYING']=0x2]='PLAYING',f[f['RESULT']=0x3]='RESULT',f[f['FINISH']=0x4]='FINISH';}(c['FightState']||(c['FightState']={})),function(f){f[f['NONE']=0x0]='NONE',f[f['ROTATE_FROM_UP']=0x1]='ROTATE_FROM_UP',f[f['ROTATE_FROM_RIGHT']=0x2]='ROTATE_FROM_RIGHT',f[f['FLIP_X']=0x3]='FLIP_X',f[f['REVERSE_FLIP_X']=0x4]='REVERSE_FLIP_X';}(c['ModelDirType']||(c['ModelDirType']={})),function(f){f[f['NONE']=0x0]='NONE',f[f['MASK']=0x1]='MASK';}(c['MjTileFlag']||(c['MjTileFlag']={})),cc['_RF']['pop']();},{}],'FightEffect':[function(a,b,c){'use strict';cc['_RF']['push'](b,'91d7fcJ4JxOV4SWxjZ2nD0P','FightEffect'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightEffect']=void 0x0;const d=a('./FightModelElement');c['FightEffect']=class extends d['FightModelElement']{constructor(){super(...arguments),this['playName']='',this['playCount']=-0x1;}['onInit'](){super['onInit']();}['onWillOpen'](){var f,g;super['onWillOpen']();let h=this['openParams']['data'];this['playName']=null!==(f=null==h?void 0x0:h['playName'])&&void 0x0!==f?f:'play',this['playCount']=null!==(g=null==h?void 0x0:h['playCount'])&&void 0x0!==g?g:-0x1;}['onOpen'](){super['onOpen'](),this['modelMgr']['play'](this['playName'],{'count':this['playCount'],'onAllComplete':()=>{this['closeMe']();}});}['onClose'](f){super['onClose'](f);}['onDestroy'](){super['onDestroy']();}},cc['_RF']['pop']();},{'./FightModelElement':'FightModelElement'}],'FightElement':[function(a,b,c){'use strict';cc['_RF']['push'](b,'d0897jxVt1DTI+RKLKL5KWd','FightElement'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightElement']=void 0x0;const d=a('../../../Core/BaseEntity');c['FightElement']=class extends d['BaseEntity']{constructor(){super(...arguments),this['bid']=0x0;}['onInit'](){super['onInit']();}['onWillOpen'](){super['onWillOpen']();let f=this['openParams']['data'];this['bid']=(null==f?void 0x0:f['bid'])||0x0;}['onOpen'](){super['onOpen']();}['onClose'](f){super['onClose'](f);}['onDestroy'](){super['onDestroy']();}},cc['_RF']['pop']();},{'../../../Core/BaseEntity':'BaseEntity'}],'FightEvent':[function(a,b,c){'use strict';cc['_RF']['push'](b,'797eaX6l7VIM77JqIUgj6ew','FightEvent'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightEvent']=void 0x0,function(d){d['FIGHT_RESULT_VIEW_CLOSE']='FightEvent.FIGHT_RESULT_VIEW_CLOSE',d['FIGHT_ENTER_FINISH']='FightEvent.FIGHT_ENTER_FINISH';}(c['FightEvent']||(c['FightEvent']={})),cc['_RF']['pop']();},{}],'FightLib':[function(a,b,c){'use strict';cc['_RF']['push'](b,'7adddZ/mI5Ko46my/cobdjs','FightLib'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightLib']=void 0x0,c['FightLib']=class{static['isTileMatch'](d,f){return!(!d||!f||d==f)&&(d['bid']==f['bid']||0x0!=d['match_group']&&d['match_group']==f['match_group']);}},cc['_RF']['pop']();},{}],'FightLogicBase':[function(a,b,c){'use strict';cc['_RF']['push'](b,'8bffdvCQCVE1aIrfnXBqvlk','FightLogicBase'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightLogicBase']=void 0x0;const d=a('../FightModuleBase');c['FightLogicBase']=class extends d['FightModuleBase']{constructor(){super(...arguments),this['combo']=0x0,this['score']=0x0;}['initBase'](){}['isFriendToErrorClick'](){return!0x0;}['onEnterFinish'](){cc['Tween']['stopAllByTarget'](this),super['onEnterFinish']();}['onClickTile'](f){}},cc['_RF']['pop']();},{'../FightModuleBase':'FightModuleBase'}],'FightLogicDefault':[function(b,c,d){'use strict';cc['_RF']['push'](c,'48e7cL3jVhOd4hD6IKPLSsj','FightLogicDefault'),Object['defineProperty'](d,'__esModule',{'value':!0x0}),d['FightLogicDefault']=void 0x0;const f=b('./FightLogicBase');d['FightLogicDefault']=class extends f['FightLogicBase']{constructor(){super(...arguments),this['currentTile']=null;}['onEnterInit'](){this['initBase'](),this['onInitComplete']();}['onEnterPrepare'](){this['fightProcess']['elemMgr']['createMjFormation']([[[0x1,0x1,0xb],[0x3,0x1,0xc],[0x5,0x1,0xd],[0x7,0x1,0xd],[0x9,0x1,0xc],[0xb,0x1,0xb],[0x1,0x3,0x15],[0x3,0x3,0x16],[0x5,0x3,0x17],[0x7,0x3,0x17],[0x9,0x3,0x16],[0xb,0x3,0x15],[0x1,0x5,0x1f],[0x3,0x5,0x20],[0x5,0x5,0x21],[0x7,0x5,0x21],[0x9,0x5,0x20],[0xb,0x5,0x1f],[0x1,0x7,0xb],[0x3,0x7,0xc],[0x5,0x7,0xd],[0x7,0x7,0xd],[0x9,0x7,0xc],[0xb,0x7,0xb],[0x1,0x9,0x15],[0x3,0x9,0x16],[0x5,0x9,0x17],[0x7,0x9,0x17],[0x9,0x9,0x16],[0xb,0x9,0x15],[0x1,0xb,0x1f],[0x3,0xb,0x20],[0x5,0xb,0x21],[0x7,0xb,0x21],[0x9,0xb,0x20],[0xb,0xb,0x1f],[0x1,0xd,0xb],[0x3,0xd,0xc],[0x5,0xd,0xd],[0x7,0xd,0xd],[0x9,0xd,0xc],[0xb,0xd,0xb],[0x1,0xf,0x15],[0x3,0xf,0x16],[0x5,0xf,0x17],[0x7,0xf,0x17],[0x9,0xf,0x16],[0xb,0xf,0x15]],[[0x4,0x4,0x29,0x1],[0x6,0x4,0x33],[0xa,0x4,0x3d,0x1],[0x4,0x6,0x29,0x1],[0x6,0x6,0x33],[0xa,0x6,0x3e,0x1],[0x4,0xa,0x22],[0x6,0xa,0x3e9],[0x8,0xa,0x23],[0xa,0xa,0x3ea],[0x4,0xc,0x22],[0x6,0xc,0x23],[0x8,0xc,0x3ea]]],()=>{this['onPrepareComplete']();});}['onEnterPlaying'](){super['onEnterPlaying']();}['onLeavePlaying'](){this['changeCurrentTile'](null),super['onLeavePlaying']();}['onEnterResult'](){this['playClearAllLeftTiles'](()=>{this['onResultComplete']();});}['onClickTile'](p){if(this['fightProcess']['isPlaying']()&&this['currentTile']!=p&&!p['isShowingError']())if(p['isBlocked']())this['onErrorClick'](p);else if(this['currentTile']&&g['FightLib']['isTileMatch'](this['currentTile'],p)){let q=this['currentTile'];this['currentTile']=null,this['onTilePairMatch'](q,p);}else this['changeCurrentTile'](p);}['onErrorClick'](p){if(this['combo']=0x0,this['isFriendToErrorClick']())k['CommonCtrl']['instance']['toast']('不可移动'),p['playErrorClick'](),p['isBlockLeft']()&&p['isBlockRight']()&&this['playShakeLock'](p['layerIndex'],h['CCUtil']['toVec2'](p['node']['position']));else{let q=0xa;this['score']=Math['min'](0x0,this['score']-q),k['CommonCtrl']['instance']['toast']('score\x20-'+q);}}['playShakeLock'](p,q){var u,v;null===(v=null===(u=this['fightProcess'])||void 0x0===u?void 0x0:u['elemMgr'])||void 0x0===v||v['createShakeLock'](p,q);}['changeCurrentTile'](p){this['currentTile']!=p&&(this['currentTile']&&(this['currentTile']['setHighlight'](!0x1),this['currentTile']['moveToHome'](),this['currentTile']['turnFace'](!0x0)),this['currentTile']=p,this['currentTile']&&(this['currentTile']['setHighlight'](!0x0),this['currentTile']['moveToUnblockSide'](),this['currentTile']['turnFace'](!0x1)));}['onTilePairMatch'](p,q){var u,v,w,x,y;null===(u=this['fightProcess']['elemMgr'])||void 0x0===u||u['takeOutTile'](p),null===(v=this['fightProcess']['elemMgr'])||void 0x0===v||v['takeOutTile'](q),this['combo']++,this['score']+=0x64;let z={'clearedCount':null!==(y=null===(x=null===(w=this['fightProcess'])||void 0x0===w?void 0x0:w['elemMgr'])||void 0x0===x?void 0x0:x['getClearedTileCount']())&&void 0x0!==y?y:0x0,'combo':this['combo'],'addScore':0x64};q['isMask']()?(q['setHighlight'](!0x0),q['moveToUnblockSide'](),q['turnFace'](!0x1,!0x0,()=>{var A;(null===(A=this['fightProcess'])||void 0x0===A?void 0x0:A['isPlaying']())&&p['isValidEntity']&&q['isValidEntity']&&(p['setHighlight'](!0x1),q['setHighlight'](!0x1),this['playTilePairClash'](p,q,z));})):this['playTilePairClash'](p,q,z),this['checkClearGreyTiles'](),this['checkFreeIcecream']();}['playTilePairClash'](p,q,u){this['onPlayTilePairClashBegin'](p,q,u);let v=p['node']['position'],w=q['node']['position'];(v['x']>w['x']||v['x']==w['x']&&v['y']<w['y'])&&([p,q]=[q,p],[v,w]=[w,v]);let x=v['x']-j['FightDefine']['MJ_TILE_WIDTH'],y=w['x']+j['FightDefine']['MJ_TILE_WIDTH'],z=(x+y)/0x2,A=(v['y']+w['y'])/0x2;cc['tween'](this)['call'](()=>{p['isValidEntity']&&cc['tween'](p['node'])['to'](0.3,{'position':new cc['Vec3'](x,A,0x0)},{'easing':'backOut'})['delay'](0.01)['to'](0.3,{'position':new cc['Vec3'](z-j['FightDefine']['MJ_FORMAT_CELL_WIDTH'],A,0x0)},{'easing':'expoOut'})['start'](),q['isValidEntity']&&cc['tween'](q['node'])['to'](0.3,{'position':new cc['Vec3'](y,A,0x0)},{'easing':'backOut'})['delay'](0.01)['to'](0.3,{'position':new cc['Vec3'](z+j['FightDefine']['MJ_FORMAT_CELL_WIDTH'],A,0x0)},{'easing':'expoOut'})['start']();})['delay'](0.4)['call'](()=>{var B,C;null===(C=null===(B=this['fightProcess'])||void 0x0===B?void 0x0:B['elemMgr'])||void 0x0===C||C['createOnceEffect']('blast',new cc['Vec2'](z,A));})['delay'](0.2)['call'](()=>{p['isValidEntity']&&q['isValidEntity']&&(this['onPlayTilePairClashEnd'](p,q,u),p['closeMe'](),q['closeMe']());})['start']();}['onPlayTilePairClashBegin'](p,q,u){var v;(null===(v=this['fightProcess'])||void 0x0===v?void 0x0:v['isPlaying']())&&(this['playMatchCombo'](u['combo']),this['playMatchAddScore'](u['addScore']));}['onPlayTilePairClashEnd'](p,q,u){var v,w,x;if(null===(v=this['fightProcess'])||void 0x0===v?void 0x0:v['isPlaying']()){if(this['onTileCleared'](p),this['onTileCleared'](q),(null===(w=this['fightProcess'])||void 0x0===w?void 0x0:w['isPlaying']())&&(this['combo']%0xa==0x0||p['bid']==j['FightDefine']['MJ_TILE_STAR_BID'])&&this['doAutoMatchAndClear']())return;(null===(x=this['fightProcess'])||void 0x0===x?void 0x0:x['isPlaying']())&&(this['checkIsPass']()?(k['CommonCtrl']['instance']['toast']('过关!'),this['fightProcess']['finishWithResult'](!0x0)):this['hasValidMatchPairs']());}}['onTileCleared'](p){var q;null===(q=this['fightProcess'])||void 0x0===q||q['isPlaying']();}['playMatchCombo'](p){}['playMatchAddScore'](p){}['checkClearGreyTiles'](){var p;let q=null===(p=this['fightProcess'])||void 0x0===p?void 0x0:p['elemMgr'];q&&q['travelTiles'](u=>(u['isGrey']&&!u['isBlocked']()&&u['setGrey'](!0x1),!0x0));}['checkFreeIcecream'](){var p;let q=null===(p=this['fightProcess'])||void 0x0===p?void 0x0:p['elemMgr'];if(!q)return;let u=[];do{if(u['length']=0x0,q['travelTiles'](v=>(v['bid']!=j['FightDefine']['MJ_TILE_ICE_CREAM_BID']||v['isBlocked']()||u['push'](v),!0x0)),u['length']>0x0){for(let v of u)v==this['currentTile']&&this['changeCurrentTile'](null),q['takeOutTile'](v),this['playFreeIcecream'](v);this['checkClearGreyTiles']();}}while(u['length']>0x0);}['playFreeIcecream'](p){cc['tween'](p['node'])['to'](0.1,{'scale':1.5})['to'](0.1,{'angle':0xf})['to'](0.1,{'angle':-0xf})['to'](0.1,{'angle':0xf})['to'](0.1,{'angle':-0xf})['parallel'](cc['tween']()['to'](0.2,{'opacity':0x0}),cc['tween']()['to'](0.2,{'scale':0.1}))['call'](()=>{this['onTileCleared'](p),p['closeMe']();})['start']();}['doAutoMatchAndClear'](){let p=[];if(this['calcValidMatchPairs'](p)>0x0){let q=p[m['MathUtil']['randInt'](0x0,p['length']-0x1)],u=q[0x0],v=q[0x1];return u!=this['currentTile']&&v!=this['currentTile']||(this['currentTile']['setHighlight'](!0x1),this['currentTile']=null),u['turnFace'](!0x1),v['turnFace'](!0x1),this['onTilePairMatch'](u,v),!0x0;}return!0x1;}['calcValidMatchPairs'](p=null){var q;let u=null===(q=this['fightProcess'])||void 0x0===q?void 0x0:q['elemMgr'];if(!u)return 0x0;let v=[];u['travelTiles'](y=>(y['isBlocked']()||v['push'](y),!0x0));let w=0x0,x=v['length'];for(let y=0x0;y<x;++y){let z=v[y];for(let A=y+0x1;A<x;++A){let B=v[A];g['FightLib']['isTileMatch'](z,B)&&(p&&p['push']([z,B]),w++);}}return w;}['hasValidMatchPairs'](){var p;let q=null===(p=this['fightProcess'])||void 0x0===p?void 0x0:p['elemMgr'];if(!q)return!0x1;let u=[];q['travelTiles'](w=>(w['isBlocked']()||u['push'](w),!0x0));let v=u['length'];for(let w=0x0;w<v;++w){let x=u[w];for(let y=w+0x1;y<v;++y){let z=u[y];if(g['FightLib']['isTileMatch'](x,z))return!0x0;}}return!0x1;}['checkIsPass'](){var p;return!(null===(p=this['fightProcess']['elemMgr'])||void 0x0===p||!p['isAllTileCleared']());}['playClearAllLeftTiles'](p){var q;(null===(q=this['fightProcess'])||void 0x0===q?void 0x0:q['isResulting']())&&p&&p();}['onDestroy'](){super['onDestroy']();}};const g=b('../FightLib'),h=b('../../../Core/CCUtil'),j=b('../FightDefine'),k=b('../../Common/CommonCtrl'),m=b('../../../Core/MathUtil');cc['_RF']['pop']();},{'../../../Core/CCUtil':'CCUtil','../../../Core/MathUtil':'MathUtil','../../Common/CommonCtrl':'CommonCtrl','../FightDefine':'FightDefine','../FightLib':'FightLib','./FightLogicBase':'FightLogicBase'}],'FightLogicFactory':[function(a,b,c){'use strict';cc['_RF']['push'](b,'5e43d5m1r5Nm61fEYvgTlT5','FightLogicFactory'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightLogicFactory']=void 0x0,c['FightLogicFactory']=class{static['getLogicType'](g){let h=d['FightLogicDefault'];switch(g['fightType']){case f['DungeonTypeID']['TEST']:case f['DungeonTypeID']['MASTER']:h=d['FightLogicDefault'];}return h;}};const d=a('./FightLogicDefault'),f=a('../../Dungeon/DungeonDefine');cc['_RF']['pop']();},{'../../Dungeon/DungeonDefine':'DungeonDefine','./FightLogicDefault':'FightLogicDefault'}],'FightModelElement':[function(a,b,c){'use strict';cc['_RF']['push'](b,'ebc0c20AcJFBJ+DFFkXps8R','FightModelElement'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightModelElement']=void 0x0;const d=a('./FightElement');c['FightModelElement']=class extends d['FightElement']{['onInit'](){super['onInit'](),this['modelMgr']=f['CCUtil']['getOrCreateComponent'](this['node'],g['ModelMgr']);}['onDestroy'](){this['modelMgr']=null,super['onDestroy']();}};const f=a('../../../Core/CCUtil'),g=a('./ModelMgr');cc['_RF']['pop']();},{'../../../Core/CCUtil':'CCUtil','./FightElement':'FightElement','./ModelMgr':'ModelMgr'}],'FightModuleBase':[function(a,b,c){'use strict';cc['_RF']['push'](b,'182e6f6tuFE/56Z+OICQ4xC','FightModuleBase'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightModuleBase']=void 0x0;const d=a('../../Core/GameEnhanceComponent');c['FightModuleBase']=class extends d['GameEnhanceComponent']{constructor(){super(...arguments),this['_isInitComplete']=!0x1,this['_isPrepareComplete']=!0x1,this['_isResultComplete']=!0x1;}['isInitCompleted'](){return this['_isInitComplete'];}['isPrepareCompleted'](){return this['_isPrepareComplete'];}['isResultCompleted'](){return this['_isResultComplete'];}['onInitComplete'](){this['_isInitComplete']=!0x0;}['onPrepareComplete'](){this['_isPrepareComplete']=!0x0;}['onResultComplete'](){this['_isResultComplete']=!0x0;}['onEnterInit'](){this['onInitComplete']();}['onLeaveInit'](){}['onUpdateInit'](f){}['onEnterPrepare'](){this['onPrepareComplete']();}['onLeavePrepare'](){}['onUpdatePrepare'](f){}['onEnterPlaying'](){}['onLeavePlaying'](){}['onUpdatePlaying'](f){}['onEnterResult'](){this['onResultComplete']();}['onLeaveResult'](){}['onUpdateResult'](f){}['onEnterFinish'](){}['onDestroy'](){this['fightProcess']['onModuleDestroy'](this),super['onDestroy']();}},cc['_RF']['pop']();},{'../../Core/GameEnhanceComponent':'GameEnhanceComponent'}],'FightParam':[function(a,b,c){'use strict';cc['_RF']['push'](b,'6027fY/FZdAWYOX/kNBJkUR','FightParam'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightParam']=void 0x0;class d{constructor(){this['fightType']=0x0,this['typeBid']=0x0,this['typeData']=0x0,this['dungeonBid']=0x0,this['startTime']=0x0;}['clone'](){let f=new d();return f['fightType']=this['fightType'],f['typeBid']=this['typeBid'],f['typeData']=this['typeData'],f['dungeonBid']=this['dungeonBid'],f['startTime']=this['startTime'],f;}}c['FightParam']=d,cc['_RF']['pop']();},{}],'FightProcess':[function(b,f,j){'use strict';cc['_RF']['push'](f,'7b2afJocmFDu6RqvcDBP8QJ','FightProcess'),Object['defineProperty'](j,'__esModule',{'value':!0x0}),j['FightProcess']=void 0x0;const k=b('../../Core/SimpleStateMachine'),m=b('./FightDefine'),q=b('../../Core/GameEnhanceComponent');class v extends q['GameEnhanceComponent']{constructor(){super(),this['_moduleList']=[],this['_isAllInited']=!0x1,this['_isAllPrepared']=!0x1,this['_isAllResulted']=!0x1,this['_orgiSpeed']=0x1,this['_fightResult']=null,v['_instance']=this,this['_stm']=new k['SimpleStateMachine'](),this['_stm']['addStateByHandler'](m['FightState']['INIT'],this['onEnterInit'],this['onLeaveInit'],this['onUpdateInit'],this),this['_stm']['addStateByHandler'](m['FightState']['PREPARE'],this['onEnterPrepare'],this['onLeavePrepare'],this['onUpdatePrepare'],this),this['_stm']['addStateByHandler'](m['FightState']['PLAYING'],this['onEnterPlaying'],this['onLeavePlaying'],this['onUpdatePlaying'],this),this['_stm']['addStateByHandler'](m['FightState']['RESULT'],this['onEnterResult'],this['onLeaveResult'],this['onUpdateResult'],this),this['_stm']['addStateByHandler'](m['FightState']['FINISH'],this['onEnterFinish'],null,null,this);}static get['instance'](){return this['_instance'];}['startProcess'](F){this['fightParam']=F,this['_initLayers'](),this['_createModules'](),this['_stm']['changeToState'](m['FightState']['INIT']);}['isPlaying'](){return this['_stm']['isState'](m['FightState']['PLAYING']);}['isResulting'](){return this['_stm']['isState'](m['FightState']['RESULT']);}['_initLayers'](){v['floorLayer']=this['_addLayer']('@floor'),v['elementLayer']=this['_addLayer']('@element'),v['airLayer']=this['_addLayer']('@air');}['_addLayer'](F){return x['CCUtil']['getOrAddChild'](w['GF']['ui']['fightLayer'],F,!0x0);}['createModule'](F){let G=new cc['Node']();G['parent']=this['node'],G['name']=F['name'];let H=G['addComponent'](F);return H['fightParam']=this['fightParam'],H['fightProcess']=this,this['_moduleList']['push'](H),H;}['_createModules'](){this['logic']=this['createModule'](z['FightLogicFactory']['getLogicType'](this['fightParam'])),this['elemMgr']=this['createModule'](A['ElementMgr']),this['viewMgr']=this['createModule'](B['FightViewMgr']);}['onModuleDestroy'](F){this['logic']==F&&(this['logic']=null),this['elemMgr']==F&&(this['elemMgr']=null),this['viewMgr']==F&&(this['viewMgr']=null);}['onEnterInit'](){E['LogUtil']['info']('Fight\x20onEnterInit');for(let F=0x0,G=this['_moduleList']['length'];F<G;F++)this['_moduleList'][F]['onEnterInit']();}['onLeaveInit'](){for(let F=0x0,G=this['_moduleList']['length'];F<G;F++)this['_moduleList'][F]['onLeaveInit']();}['onUpdateInit'](F){for(let G=0x0,H=this['_moduleList']['length'];G<H;G++)this['_moduleList'][G]['onUpdateInit'](F);!this['_isAllInited']&&this['_moduleList']['findIndex'](I=>!I['isInitCompleted']())<0x0&&(this['_isAllInited']=!0x0,this['_stm']['changeToState'](m['FightState']['PREPARE']));}['onEnterPrepare'](){E['LogUtil']['info']('Fight\x20onEnterPrepare');for(let F=0x0,G=this['_moduleList']['length'];F<G;F++)this['_moduleList'][F]['onEnterPrepare']();}['onLeavePrepare'](){for(let F=0x0,G=this['_moduleList']['length'];F<G;F++)this['_moduleList'][F]['onLeavePrepare']();}['onUpdatePrepare'](F){for(let G=0x0,H=this['_moduleList']['length'];G<H;G++)this['_moduleList'][G]['onUpdatePrepare'](F);!this['_isAllPrepared']&&this['_moduleList']['findIndex'](I=>!I['isPrepareCompleted']())<0x0&&(this['_isAllPrepared']=!0x0,this['_stm']['changeToState'](m['FightState']['PLAYING']));}['onEnterPlaying'](){E['LogUtil']['info']('Fight\x20onEnterPlaying');for(let F=0x0,G=this['_moduleList']['length'];F<G;F++)this['_moduleList'][F]['onEnterPlaying']();}['onLeavePlaying'](){for(let F=0x0,G=this['_moduleList']['length'];F<G;F++)this['_moduleList'][F]['onLeavePlaying']();}['onUpdatePlaying'](F){for(let G=0x0,H=this['_moduleList']['length'];G<H;G++)this['_moduleList'][G]['onUpdatePlaying'](F);}['onEnterResult'](){E['LogUtil']['info']('Fight\x20onEnterResult');for(let F=0x0,G=this['_moduleList']['length'];F<G;F++)this['_moduleList'][F]['onEnterResult']();}['onLeaveResult'](){for(let F=0x0,G=this['_moduleList']['length'];F<G;F++)this['_moduleList'][F]['onLeaveResult']();}['onUpdateResult'](F){for(let G=0x0,H=this['_moduleList']['length'];G<H;G++)this['_moduleList'][G]['onUpdateResult'](F);!this['_isAllResulted']&&this['_moduleList']['findIndex'](I=>!I['isResultCompleted']())<0x0&&(this['_isAllResulted']=!0x0,this['_stm']['changeToState'](m['FightState']['FINISH']));}['onEnterFinish'](){E['LogUtil']['info']('Fight\x20onEnterFinish');for(let F=0x0,G=this['_moduleList']['length'];F<G;F++)this['_moduleList'][F]['onEnterFinish']();w['GF']['event']['emit'](C['FightEvent']['FIGHT_ENTER_FINISH']),this['timer']['nextFrameCall'](()=>{D['FightCtrl']['instance']['clearFight']();});}['update'](F){this['_stm']['update'](F*y['GameRoot']['timeScale']);}['changeSpeed'](F){F!=y['GameRoot']['timeScale']&&(0x0==F&&(this['_orgiSpeed']=y['GameRoot']['timeScale']),y['GameRoot']['timeScale']=F);}['pause'](){0x0!=y['GameRoot']['timeScale']&&this['changeSpeed'](0x0);}['resume'](){0x0==y['GameRoot']['timeScale']&&this['changeSpeed'](this['_orgiSpeed']);}['isPause'](){return 0x0==y['GameRoot']['timeScale'];}['finishWithResult'](F){this['isPlaying']()&&(this['_fightResult']={'isWin':F,'rewards':[]},this['_stm']['changeToState'](m['FightState']['RESULT']));}['getFightResult'](){return this['_fightResult'];}['onDestroy'](){this['_stm']['changeToNullState'](),this['_stm']=null;for(let F=this['_moduleList']['length']-0x1;F>=0x0;F--){let G=this['_moduleList'][F];(null==G?void 0x0:G['isValid'])&&G['destroy']();}this['_moduleList']['length']=0x0,y['GameRoot']['timeScale']=0x1,v['_instance']==this&&(v['_instance']=null),super['onDestroy']();}}j['FightProcess']=v,v['_instance']=null;const w=b('../../Core/GF'),x=b('../../Core/CCUtil'),y=b('../../Core/GameRoot'),z=b('./Logic/FightLogicFactory'),A=b('./Element/ElementMgr'),B=b('./View/FightViewMgr'),C=b('./FightEvent'),D=b('./FightCtrl'),E=b('../../Core/LogUtil');cc['_RF']['pop']();},{'../../Core/CCUtil':'CCUtil','../../Core/GF':'GF','../../Core/GameEnhanceComponent':'GameEnhanceComponent','../../Core/GameRoot':'GameRoot','../../Core/LogUtil':'LogUtil','../../Core/SimpleStateMachine':'SimpleStateMachine','./Element/ElementMgr':'ElementMgr','./FightCtrl':'FightCtrl','./FightDefine':'FightDefine','./FightEvent':'FightEvent','./Logic/FightLogicFactory':'FightLogicFactory','./View/FightViewMgr':'FightViewMgr'}],'FightViewMgr':[function(a,b,c){'use strict';cc['_RF']['push'](b,'dce8bdT2kRPm4PzSB1cNQ36','FightViewMgr'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FightViewMgr']=void 0x0;const d=a('../FightModuleBase'),f=a('../../../Core/GF');c['FightViewMgr']=class extends d['FightModuleBase']{constructor(){super(...arguments),this['_fightViewMap']=new Map();}['onEnterInit'](){this['subscribe']['add'](g['UIViewEvent']['UIVIEW_OPEN'],this['onUIViewChange'],this),this['subscribe']['add'](g['UIViewEvent']['UIVIEW_CLOSE'],this['onUIViewChange'],this),this['onInitComplete']();}['onEnterPrepare'](){this['onPrepareComplete']();}['onFightViewOpen'](k){this['_fightViewMap']['set'](k['entityId'],k);}['onFightViewClose'](k){this['_fightViewMap']['delete'](k['entityId']);}['getFightView'](k){for(let m of this['_fightViewMap']['values']())if(m instanceof k)return m;return null;}['onUIViewChange'](k){}['pauseOrResumeByUI'](){let k=!0x1,m=h['UIViewFlag']['MAIN']|h['UIViewFlag']['STICKER'];f['GF']['ui']['travelViews'](p=>{var q;return((null!==(q=p['getViewParam']()['flag'])&&void 0x0!==q?q:0x0)&m)>0x0||(k=!0x0,!0x1);},j['UILayerID']['FIGHT'],j['UILayerID']['TOP']),k?this['fightProcess']['pause']():this['fightProcess']['resume']();}['onDestroy'](){let k=Array['from'](this['_fightViewMap']['keys']());this['_fightViewMap']['clear']();for(let m of k)f['GF']['entity']['close'](m);super['onDestroy']();}};const g=a('../../../Core/EventDefine'),h=a('../../../Core/BaseUIView'),j=a('../../../Core/UIManager');cc['_RF']['pop']();},{'../../../Core/BaseUIView':'BaseUIView','../../../Core/EventDefine':'EventDefine','../../../Core/GF':'GF','../../../Core/UIManager':'UIManager','../FightModuleBase':'FightModuleBase'}],'FlashWhite':[function(b,c,d){'use strict';cc['_RF']['push'](c,'55ac1ufPMJE+409wgLcPI8J','FlashWhite');var f=this&&this['__decorate']||function(p,q,u,v){var w,x=arguments['length'],y=x<0x3?q:null===v?v=Object['getOwnPropertyDescriptor'](q,u):v;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])y=Reflect['decorate'](p,q,u,v);else for(var z=p['length']-0x1;z>=0x0;z--)(w=p[z])&&(y=(x<0x3?w(y):x>0x3?w(q,u,y):w(q,u))||y);return x>0x3&&y&&Object['defineProperty'](q,u,y),y;};Object['defineProperty'](d,'__esModule',{'value':!0x0}),d['FlashWhite']=void 0x0;const {ccclass:g,property:h}=cc['_decorator'];let j=class extends cc['Component']{constructor(){super(...arguments),this['duration']=0.25,this['fromRate']=0.2,this['toRate']=0.8,this['count']=0x1,this['tm']=0x0;}['onLoad'](){this['targetSprite']=this['node']['getComponent'](cc['Sprite']),this['targetSprite']&&(this['flashMaterial']=this['targetSprite']['getMaterial'](0x0),this['_updateRateProperty'](this['fromRate']));}['addFlashCount'](p=0x1){this['count']+=p;}['update'](p){if(this['targetSprite']){this['tm']+=p*k['GameRoot']['timeScale'];let q=m['MathUtil']['limitRange'](this['tm']/this['duration'],0x0,0x1);this['_updateRateProperty'](this['fromRate']+(this['toRate']-this['fromRate'])*q),this['tm']>=this['duration']&&(this['tm']=0x0,this['count']--,this['count']<=0x0&&(this['_updateRateProperty'](0x1),this['destroy']()));}else this['destroy']();}['_updateRateProperty'](p){var q;null===(q=this['flashMaterial'])||void 0x0===q||q['setProperty']('u_rate',p);}['onDestroy'](){this['targetSprite']=null,this['flashMaterial']=null;}};j=f([g],j),d['FlashWhite']=j;const k=b('../../../Core/GameRoot'),m=b('../../../Core/MathUtil');cc['_RF']['pop']();},{'../../../Core/GameRoot':'GameRoot','../../../Core/MathUtil':'MathUtil'}],'FollowTarget':[function(a,b,c){'use strict';cc['_RF']['push'](b,'21148oTey1DSLmipTOvdSz9','FollowTarget');var d=this&&this['__decorate']||function(j,k,m,p){var q,u=arguments['length'],v=u<0x3?k:null===p?p=Object['getOwnPropertyDescriptor'](k,m):p;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])v=Reflect['decorate'](j,k,m,p);else for(var w=j['length']-0x1;w>=0x0;w--)(q=j[w])&&(v=(u<0x3?q(v):u>0x3?q(k,m,v):q(k,m))||v);return u>0x3&&v&&Object['defineProperty'](k,m,v),v;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FollowTarget']=void 0x0;const {ccclass:f,property:g}=cc['_decorator'];class h extends cc['Component']{constructor(){super(...arguments),this['followTarget']=null;}['update'](){this['followTarget']&&(this['node']['position']=this['followTarget']['position']);}}d([g(cc['Node'])],h['prototype'],'followTarget',void 0x0),c['FollowTarget']=h,cc['_RF']['pop']();},{}],'GF':[function(b,j,k){'use strict';cc['_RF']['push'](j,'b2f69y7scRJsYl9IuHB0umt','GF'),Object['defineProperty'](k,'__esModule',{'value':!0x0}),k['GF']=void 0x0;const m=b('./GameRoot'),q=b('./ResManager'),v=b('./EventManager'),w=b('./TimerManager'),x=b('./CtrlManager'),y=b('./EntityManager'),z=b('./UIManager'),A=b('./ConfigManager'),B=b('./SoundManager'),C=b('./HttpManager'),D=b('./StorageManager'),{ccclass:E,property:F}=cc['_decorator'];class G{static get['res'](){return this['_res']&&this['_res']['isValid']||(this['_res']=m['GameRoot']['instance']['getManager'](q['ResManager'])),this['_res'];}static get['event'](){return this['_event']&&this['_event']['isValid']||(this['_event']=m['GameRoot']['instance']['getManager'](v['EventManager'])),this['_event'];}static get['timer'](){return this['_timer']&&this['_timer']['isValid']||(this['_timer']=m['GameRoot']['instance']['getManager'](w['TimerManager'])),this['_timer'];}static get['ctrl'](){return this['_ctrl']&&this['_ctrl']['isValid']||(this['_ctrl']=m['GameRoot']['instance']['getManager'](x['CtrlManager'])),this['_ctrl'];}static get['entity'](){return this['_entity']&&this['_entity']['isValid']||(this['_entity']=m['GameRoot']['instance']['getManager'](y['EntityManager'])),this['_entity'];}static get['ui'](){return this['_ui']&&this['_ui']['isValid']||(this['_ui']=m['GameRoot']['instance']['getManager'](z['UIManager'])),this['_ui'];}static get['cfg'](){return this['_cfg']&&this['_cfg']['isValid']||(this['_cfg']=m['GameRoot']['instance']['getManager'](A['ConfigManager'])),this['_cfg'];}static get['sound'](){return this['_sound']&&this['_sound']['isValid']||(this['_sound']=m['GameRoot']['instance']['getManager'](B['SoundManager'])),this['_sound'];}static get['http'](){return this['_http']&&this['_http']['isValid']||(this['_http']=m['GameRoot']['instance']['getManager'](C['HttpManager'])),this['_http'];}static get['storage'](){return this['_storage']&&this['_storage']['isValid']||(this['_storage']=m['GameRoot']['instance']['getManager'](D['StorageManager'])),this['_storage'];}static['monitorGameRoot'](){G['_isMonitorRoot']||(G['_isMonitorRoot']=!0x0,G['_rootParent']=m['GameRoot']['instance']['node']['parent'],G['_rootParent']['on']('child-removed',G['onHostParentRemoveChild']));}static['unmonitorGameRoot'](){G['_isMonitorRoot']&&(G['_isMonitorRoot']=!0x1,G['_rootParent']['off']('child-removed',G['onHostParentRemoveChild']),G['_rootParent']=null);}static['onHostParentRemoveChild'](H){H==m['GameRoot']['instance']['node']&&G['destroySub']();}static['destroySub'](){G['unmonitorGameRoot'](),G['entity']['cancelAllOpening'](),G['entity']['closeAll'](),G['ctrl']['clearAll'](),G['res']['clearAllRequest']();}static['destroyAll'](){G['destroySub'](),m['GameRoot']['instance']['destroyAll']();}}k['GF']=G,G['_isMonitorRoot']=!0x1,G['_rootParent']=null,cc['_RF']['pop']();},{'./ConfigManager':'ConfigManager','./CtrlManager':'CtrlManager','./EntityManager':'EntityManager','./EventManager':'EventManager','./GameRoot':'GameRoot','./HttpManager':'HttpManager','./ResManager':'ResManager','./SoundManager':'SoundManager','./StorageManager':'StorageManager','./TimerManager':'TimerManager','./UIManager':'UIManager'}],'GameDefine':[function(a,b,c){'use strict';cc['_RF']['push'](b,'f2a90a1IrpPpbYMKFNyiLZc','GameDefine'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['QualityColorMap']=c['GameDefine']=void 0x0,c['GameDefine']=class{},c['QualityColorMap']={1:new cc['Color'](0xff,0xff,0xff),2:new cc['Color'](0x22,0xb1,0x4c),3:new cc['Color'](0x7,0x78,0xc6),4:new cc['Color'](0x70,0x50,0x8a),5:new cc['Color'](0xad,0x68,0x31),6:new cc['Color'](0x9c,0x28,0x40),7:new cc['Color'](0xff,0xc9,0xe)},cc['_RF']['pop']();},{}],'GameEnhanceComponent':[function(b,d,f){'use strict';cc['_RF']['push'](d,'98bb2yefeNJX4Bqdb4AsxcZ','GameEnhanceComponent');var g=this&&this['__decorate']||function(u,v,w,x){var y,z=arguments['length'],A=z<0x3?v:null===x?x=Object['getOwnPropertyDescriptor'](v,w):x;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])A=Reflect['decorate'](u,v,w,x);else for(var B=u['length']-0x1;B>=0x0;B--)(y=u[B])&&(A=(z<0x3?y(A):z>0x3?y(v,w,A):y(v,w))||A);return z>0x3&&A&&Object['defineProperty'](v,w,A),A;};Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['GameEnhanceComponent']=void 0x0;const h=b('./ResAgent'),j=b('./EventSubscriber'),k=b('./TimerManager'),{ccclass:m,property:p}=cc['_decorator'];let q=class extends cc['Component']{['getOrCreateComponent'](u){let v=this['node']['getComponent'](u);return v&&v['isValid']||(v=this['node']['addComponent'](u)),v;}get['res'](){var u;return null!==(u=this['_res'])&&void 0x0!==u||(this['_res']=this['getOrCreateComponent'](h['ResAgent'])),this['_res'];}get['subscribe'](){var u;return null!==(u=this['_subscribe'])&&void 0x0!==u||(this['_subscribe']=this['getOrCreateComponent'](j['EventSubscriber'])),this['_subscribe'];}get['timer'](){var u;return null!==(u=this['_timer'])&&void 0x0!==u||(this['_timer']=this['getOrCreateComponent'](k['TimerManager'])),this['_timer'];}['clearEnhanceCommon'](u){u?this['_res']&&this['_res']['isValid']&&(this['_res']['clearAll'](),u&&(this['_res']=null)):this['_res']&&this['_res']['isValid']&&this['_res']['clearLoading'](),this['_subscribe']&&this['_subscribe']['isValid']&&(this['_subscribe']['clearAll'](),u&&(this['_subscribe']=null)),this['_timer']&&this['_timer']['isValid']&&(this['_timer']['clearAll'](),u&&(this['_timer']=null));}['onDestroy'](){this['clearEnhanceCommon'](!0x0);}};q=g([m],q),f['GameEnhanceComponent']=q,cc['_RF']['pop']();},{'./EventSubscriber':'EventSubscriber','./ResAgent':'ResAgent','./TimerManager':'TimerManager'}],'GameEnum':[function(a,b,c){'use strict';cc['_RF']['push'](b,'4897amS3MNA3JVecILMEOHv','GameEnum'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['ItemQualityID']=c['AssetID']=c['AttrID']=void 0x0,function(d){d[d['HP']=0x65]='HP',d[d['HURT']=0x66]='HURT',d[d['SPEED']=0x68]='SPEED',d[d['HP_PER']=0xc9]='HP_PER',d[d['HURT_PER']=0xca]='HURT_PER',d[d['SPEED_PER']=0xcc]='SPEED_PER';}(c['AttrID']||(c['AttrID']={})),function(d){d[d['SHUFFLE']=0xb]='SHUFFLE',d[d['HELP']=0xc]='HELP';}(c['AssetID']||(c['AssetID']={})),function(d){d[d['IQ_WHITE']=0x1]='IQ_WHITE',d[d['IQ_GREEN']=0x2]='IQ_GREEN',d[d['IQ_BLUE']=0x3]='IQ_BLUE',d[d['IQ_PURPLE']=0x4]='IQ_PURPLE',d[d['IQ_ORANGE']=0x5]='IQ_ORANGE',d[d['IQ_RED']=0x6]='IQ_RED',d[d['IQ_YELLOW']=0x7]='IQ_YELLOW';}(c['ItemQualityID']||(c['ItemQualityID']={})),cc['_RF']['pop']();},{}],'GameLoader':[function(a,b,c){'use strict';cc['_RF']['push'](b,'d2751Mz6RRC17L71dspVhKk','GameLoader'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['GameLoader']=void 0x0;const d=a('./GF'),f=a('./ClientConfig'),g=a('./LogUtil');c['GameLoader']=class{static['loadBundles'](h){return new Promise(j=>{if(h&&h['length']>0x0){let k=h['length'],m=0x0,p=[],q=null;for(let u=0x0;u<k;u++){let v=h[u];d['GF']['res']['loadBundle'](v,(w,x)=>{g['LogUtil']['info']('loadBundles:',v,w),m++,w?q=w:p['push'](x),m>=k&&j(q);});}}else j(null);});}static['loadClientConfig'](h,j=null){return new Promise(k=>{d['GF']['res']['loadWithBundle'](j,h,cc['JsonAsset'],null,(l,m)=>{g['LogUtil']['info']('loadClientConfig:',h,l),!l&&m&&Object['assign'](f['ClientConfig'],m['json']),k(l);});});}static['loadGameConfigs'](h,j,k=null){return new Promise(l=>{d['GF']['res']['loadDirWithBundle'](k,h,cc['JsonAsset'],null,(m,p)=>{g['LogUtil']['info']('loadGameConfigs:',h,m);for(let q=0x0;q<p['length'];q++){const u=p[q];d['GF']['cfg']['parseCfg'](u['name'],u['json'],j);}l(m);});});}},cc['_RF']['pop']();},{'./ClientConfig':'ClientConfig','./GF':'GF','./LogUtil':'LogUtil'}],'GameRoot':[function(a,b,c){'use strict';cc['_RF']['push'](b,'6bd6cGKclZL75MnJkvSKOsN','GameRoot');var d,f=this&&this['__decorate']||function(k,m,p,q){var u,v=arguments['length'],w=v<0x3?m:null===q?q=Object['getOwnPropertyDescriptor'](m,p):q;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])w=Reflect['decorate'](k,m,p,q);else for(var x=k['length']-0x1;x>=0x0;x--)(u=k[x])&&(w=(v<0x3?u(w):v>0x3?u(m,p,w):u(m,p))||w);return v>0x3&&w&&Object['defineProperty'](m,p,w),w;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['GameRoot']=void 0x0;const {ccclass:g,property:h}=cc['_decorator'];let j=d=class extends cc['Component']{constructor(){super(...arguments),this['_mgrMap']=new Map(),this['_updaterList']=[];}static get['instance'](){if(null==this['_instance']){let k=new cc['Node']();k['name']='@GameRoot',cc['director']['getScene']()['addChild'](k),this['_instance']=k['addComponent'](d);}return this['_instance'];}['onLoad'](){d['_instance']=this,this['node']['parent']instanceof cc['Scene']&&cc['game']['addPersistRootNode'](this['node']);}['getManager'](k){let m=this['_mgrMap']['get'](k);if(m)return m;if(m=this['getComponent'](k))return this['_mgrMap']['set'](k,m),m;for(let q of this['node']['children'])if(m=q['getComponent'](k))return this['_mgrMap']['set'](k,m),m;let p=new cc['Node']();return p['name']=k['name'],p['parent']=this['node'],m=p['addComponent'](k),this['_mgrMap']['set'](k,m),m;}static get['timeScale'](){return this['_timeScale'];}static set['timeScale'](k){this['_timeScale']=k;}static get['gameTime'](){return this['_gameTime'];}static['hookCalculateDT'](){d['_oldCalculateDT']||(d['_oldCalculateDT']=cc['director']['calculateDeltaTime'],cc['director']['calculateDeltaTime']=function(k){k||(k=performance['now']()),this['_deltaTime']=(k>this['_lastUpdate']?(k-this['_lastUpdate'])/0x3e8:0x0)*d['_timeScale'],this['_lastUpdate']=k;});}static['unhookCalculateDT'](){d['_oldCalculateDT']&&(cc['director']['calculateDeltaTime']=d['_oldCalculateDT'],d['_oldCalculateDT']=null);}['registerFrameUpdate'](k){k&&this['_updaterList']['indexOf'](k)<0x0&&this['_updaterList']['push'](k);}['unregisterFrameUpdate'](k){let m=this['_updaterList']['indexOf'](k);m>=0x0&&(this['_updaterList'][m]=null);}['update'](k){let m=k*d['_timeScale'];d['_gameTime']+=m;let p=!0x1;for(let q of this['_updaterList'])q?q['frameUpdate'](m,k):p=!0x0;if(p)for(let u=this['_updaterList']['length']-0x1;u>=0x0;u--)this['_updaterList'][u]||this['_updaterList']['splice'](u,0x1);}['clearAll'](){for(let k=0x0,m=this['_updaterList']['length'];k<m;k++)this['_updaterList'][k]=null;this['_updaterList']['splice'](0x0,this['_updaterList']['length']);}['destroySub'](){for(let [k,m]of this['_mgrMap'])m&&m['isValid']&&m['node']['destroy']();}['destroyAll'](){this['destroySub'](),this['node']['destroy']();}['onDestroy'](){this['_mgrMap']['clear'](),this['clearAll'](),d['timeScale']=0x1,d['_instance']==this&&(d['_instance']=null);}};j['_gameTime']=0x0,j['_timeScale']=0x1,j=d=f([g],j),c['GameRoot']=j,cc['_RF']['pop']();},{}],'GameVar':[function(a,b,c){'use strict';cc['_RF']['push'](b,'b2705/ir0xP34PjZf8QgzUB','GameVar'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['GameVar']=void 0x0;const {ccclass:d,property:f}=cc['_decorator'];c['GameVar']=class{},cc['_RF']['pop']();},{}],'HttpManager':[function(a,b,c){'use strict';cc['_RF']['push'](b,'f0038lVwOJM4KYh+LN5rv1Q','HttpManager'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['HttpManager']=c['HttpRequest']=void 0x0;const d=a('./LogUtil'),f=a('./HttpUtil');class g{constructor(h,j='GET',k=null){this['_url']='',this['_method']='',this['_params']=null,this['_timeout']=0xf,this['_withCredentials']=!0x1,this['_headerObj']={},this['_postData']=null,this['_responseType']='',this['_cbComplete']=null,this['_cbTimeout']=null,this['_cbError']=null,this['_xhr']=null,this['_url']=f['HttpUtil']['refixUrl'](h),this['_method']=j,this['_params']=k;}['setTimeout'](h){this['_timeout']=h;}['setHeader'](h,j){this['_headerObj'][h]=j;}['setWithCredentials'](h){this['_withCredentials']=h;}['setPostData'](h){this['_postData']=h;}['setResponseType'](h){this['_responseType']=h;}['setCompleteCallback'](h){this['_cbComplete']=h;}['setTimeoutCallback'](h){this['_cbTimeout']=h;}['setErrorCallback'](h){this['_cbError']=h;}['start'](){this['_xhr']&&(this['_xhr']['abort'](),this['_xhr']=null);let h=new XMLHttpRequest();this['_xhr']=h,h['onreadystatechange']=this['onReadyStateChange']['bind'](this),h['ontimeout']=this['onTimeout']['bind'](this),h['onerror']=this['onError']['bind'](this);let j=this['_url'];if(this['_params']){let k='';if('string'==typeof this['_params'])k=this['_params'];else for(let [l,m]of Object['entries'](this['_params']))''!=k&&(k+='&'),k=k+l+'='+encodeURIComponent(m);''!=k&&(j=j['indexOf']('?')>=0x0?j+'&'+k:j+'?'+k);}h['open'](this['_method'],j,!0x0),h['withCredentials']=this['_withCredentials'];for(let [p,q]of Object['entries'](this['_headerObj']))h['setRequestHeader'](p,q);''!=this['_responseType']&&(h['responseType']=this['_responseType']),h['timeout']=0x3e8*this['_timeout'],d['LogUtil']['debug']('HttpRequest\x20start',this['_url']),h['send'](this['_postData']);}['abort'](){this['_xhr']&&(this['_xhr']['abort'](),this['_xhr']=null);}['onReadyStateChange'](h){let j=this['_xhr'];if(null!=j&&0x4==j['readyState']){let k=j['status']>=0xc8&&j['status']<0x190;this['onComplete'](k);}}['onComplete'](h){d['LogUtil']['debug']('HttpRequest\x20onComplete',this['_url'],h,this['getResponse']()),this['_cbComplete']&&this['_cbComplete'](h,this);}['onTimeout'](h){d['LogUtil']['err']('HttpRequest\x20onTimeout',this['_url']),this['_cbTimeout']&&this['_cbTimeout'](this);}['onError'](h){d['LogUtil']['err']('HttpRequest\x20onError',this['_url'],h),this['_cbError']&&this['_cbError'](this);}['getResponse'](){return this['_xhr']?null!=this['_xhr']['response']?this['_xhr']['response']:''==this['_responseType']||'text'==this['_responseType']?this['_xhr']['responseText']:'document'==this['_responseType']?this['_xhr']['responseXML']:null:null;}['getAllResponseHeaders'](){if(!this['_xhr'])return'';return this['_xhr']['getAllResponseHeaders']()||'';}['getResponseHeader'](h){if(!this['_xhr'])return'';return this['_xhr']['getResponseHeader'](h)||'';}}c['HttpRequest']=g,c['HttpManager']=class extends cc['Component']{constructor(){super(...arguments),this['_request_id']=0x0,this['_request_map']=new Map();}['nextId'](){return this['_request_id']++,this['_request_id'];}['startRequest'](h,j='GET',k=null,m=null,p=null,q=0xf){let u=this['nextId'](),v=new g(h,j,k);return this['_request_map']['set'](u,v),v['setTimeout'](q),v['setPostData'](m),v['setCompleteCallback'](w=>{this['_doRequestComplete'](u,w,p);}),v['setErrorCallback'](()=>{this['_doRequestError'](u,p);}),v['setTimeoutCallback'](()=>{this['_doRequestTimeout'](u,p);}),v['start'](),u;}['cancelRequest'](h){let j=this['_request_map']['get'](h);j&&(this['_request_map']['delete'](h),j['abort']());}['_doRequestComplete'](h,j,k){if(this['_request_map']['has'](h)){let l=this['_request_map']['get'](h);this['_request_map']['delete'](h),null!=l&&k&&k(j,l['getResponse']());}}['_doRequestError'](h,j){this['_request_map']['has'](h)&&(this['_request_map']['delete'](h),j&&j(!0x1,null));}['_doRequestTimeout'](h,j){this['_request_map']['has'](h)&&(this['_request_map']['delete'](h),j&&j(!0x1,null));}['onDestroy'](){let h=[];for(let j of this['_request_map']['values']())h['push'](j);this['_request_map']['clear']();for(let k of h)k['abort']();}},cc['_RF']['pop']();},{'./HttpUtil':'HttpUtil','./LogUtil':'LogUtil'}],'HttpUtil':[function(a,b,c){'use strict';cc['_RF']['push'](b,'ba85dU6Dy1Gdpu0rjodRNlb','HttpUtil'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['HttpUtil']=void 0x0,c['HttpUtil']=class{static['refixUrl'](d){return d['indexOf']('://')<0x0?cc['sys']['isMobile']?'https://'+d:'http://'+d:d;}static['buildParamsString'](d){if(null==d)return'';if('string'==typeof d)return d;let f='';for(let [g,h]of Object['entries'](d))''!=f&&(f+='&'),f=f+g+'='+encodeURIComponent(h);return f;}},cc['_RF']['pop']();},{}],'IFrameUpdate':[function(a,b,c){'use strict';cc['_RF']['push'](b,'c98ffBlY6BNfI+McdJGkgAc','IFrameUpdate'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),cc['_RF']['pop']();},{}],'LayoutPolicy':[function(a,b,c){'use strict';cc['_RF']['push'](b,'5acc5u0rvdPhqddzS+6MT0z','LayoutPolicy'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['FixSizeVerticalLayoutPolicy']=c['FixSizeHorizontalLayoutPolicy']=c['FixSizeGridLayoutPolicy']=c['LayoutPolicy']=void 0x0;class d{constructor(){this['dirtyFlag']=!0x0,this['containerAr']=new cc['Vec2'](0.5,0.5),this['padLeft']=0x0,this['padRight']=0x0,this['padTop']=0x0,this['padBottom']=0x0,this['containerMinSize']=new cc['Size'](0x0,0x0);}['iniContainerAnchor'](g){return this['containerAr']=g||new cc['Vec2'](0.5,0.5),this['dirtyFlag']=!0x0,this;}['iniContainerPadding'](g=0x0,h=0x0,j=0x0,k=0x0){return this['padLeft']=g,this['padRight']=h,this['padTop']=j,this['padBottom']=k,this['dirtyFlag']=!0x0,this;}['initContainerMinSize'](g){return this['containerMinSize']=g,this['dirtyFlag']=!0x0,this;}['preCalc'](){this['dirtyFlag']&&(this['dirtyFlag']=!0x1,this['_preCalcCache']());}}c['LayoutPolicy']=d;class f extends d{constructor(){super(),this['itemSize']=new cc['Size'](0x0,0x0),this['spacex']=0x0,this['spacey']=0x0,this['column']=0x0,this['itemCount']=0x0,this['_cacheContainerSize']=new cc['Size'](0x0,0x0),this['_cacheItemPosList']=[];}['initItemSize'](g){return this['itemSize']=g||new cc['Size'](0x0,0x0),this['dirtyFlag']=!0x0,this;}['initItemSpace'](g,h){return this['spacex']=g,this['spacey']=h,this['dirtyFlag']=!0x0,this;}['initColumnCount'](g){return this['column']=g,this['dirtyFlag']=!0x0,this;}['initItemCount'](g){return this['itemCount']=g,this['dirtyFlag']=!0x0,this;}['_preCalcCache'](){let g=this['column']>0x0?Math['ceil'](this['itemCount']/this['column']):0x1,h=this['column']>0x0?this['column']:this['itemCount'],j=this['padLeft']+this['padRight']+this['itemSize']['width']*h+(h>0x0?this['spacex']*(h-0x1):0x0),k=this['padTop']+this['padBottom']+this['itemSize']['height']*g+(g>0x0?this['spacey']*(g-0x1):0x0);if(this['_cacheContainerSize']=new cc['Size'](Math['max'](j,this['containerMinSize']['width']),Math['max'](k,this['containerMinSize']['height'])),this['_cacheItemPosList']['length']=this['itemCount'],this['itemCount']>0x0){let l=this['padLeft']-this['_cacheContainerSize']['width']*this['containerAr']['x'],m=this['_cacheContainerSize']['height']-this['padTop']-this['itemSize']['height']-this['_cacheContainerSize']['height']*this['containerAr']['y'];this['_cacheItemPosList'][0x0]=new cc['Vec2'](l,m);for(let o=0x1;o<this['itemCount'];o++)this['column']>0x0&&o%this['column']==0x0?(l=this['padLeft']-this['_cacheContainerSize']['width']*this['containerAr']['x'],m-=this['itemSize']['height']+this['spacey']):l+=this['itemSize']['width']+this['spacex'],this['_cacheItemPosList'][o]=new cc['Vec2'](l,m);}}['getContainerSize'](){return this['preCalc'](),this['_cacheContainerSize']['clone']();}['getItemPosition'](g,h){this['preCalc']();let j=this['_cacheItemPosList'][g]||cc['Vec2']['ZERO'];return h?new cc['Vec2'](j['x']+this['itemSize']['width']*h['x'],j['y']+this['itemSize']['height']*h['y']):new cc['Vec2'](j['x'],j['y']);}['getItemRect'](g){let h=this['getItemPosition'](g,null);return new cc['Rect'](h['x'],h['y'],this['itemSize']['width'],this['itemSize']['height']);}}c['FixSizeGridLayoutPolicy']=f,c['FixSizeHorizontalLayoutPolicy']=class extends f{constructor(){super(),this['column']=0x0;}},c['FixSizeVerticalLayoutPolicy']=class extends f{constructor(){super(),this['column']=0x1;}},cc['_RF']['pop']();},{}],'Load':[function(b,f,j){'use strict';cc['_RF']['push'](f,'2f819aj1vJKqrX4Iwisi+PN','Load');var k=this&&this['__decorate']||function(F,G,H,I){var J,K=arguments['length'],L=K<0x3?G:null===I?I=Object['getOwnPropertyDescriptor'](G,H):I;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])L=Reflect['decorate'](F,G,H,I);else for(var M=F['length']-0x1;M>=0x0;M--)(J=F[M])&&(L=(K<0x3?J(L):K>0x3?J(G,H,L):J(G,H))||L);return K>0x3&&L&&Object['defineProperty'](G,H,L),L;},m=this&&this['__awaiter']||function(F,G,H,I){return new(H||(H=Promise))(function(J,K){function L(O){try{N(I['next'](O));}catch(P){K(P);}}function M(O){try{N(I['throw'](O));}catch(P){K(P);}}function N(O){var P;O['done']?J(O['value']):(P=O['value'],P instanceof H?P:new H(function(Q){Q(P);}))['then'](L,M);}N((I=I['apply'](F,G||[]))['next']());});};Object['defineProperty'](j,'__esModule',{'value':!0x0});const q=b('../Core/GameLoader'),v=b('../Core/GF'),w=b('../Config/Config'),{ccclass:x,property:y}=cc['_decorator'];let z=class extends cc['Component']{['start'](){this['loadAll']();}['loadAll'](){return m(this,void 0x0,void 0x0,function*(){v['GF']['sound']['loadSetting'](),yield q['GameLoader']['loadClientConfig']('/ClientConfig'),yield q['GameLoader']['loadGameConfigs']('/Res/Config',w['Config']),this['onLoadComplete']();});}['onLoadComplete'](){E['BagCtrl']['instance'],D['DungeonCtrl']['instance'],A['FightCtrl']['instance'],C['BackendCtrl']['instance']['startAsUser']('default',()=>{let F=new B['FightParam']();F['dungeonBid']=0x3f2,A['FightCtrl']['instance']['startFight'](F);}),this['destroy']();}};z=k([x],z),j['default']=z;const A=b('../Game/Fight/FightCtrl'),B=b('../Game/Fight/FightParam'),C=b('../Game/Backend/BackendCtrl'),D=b('../Game/Dungeon/DungeonCtrl'),E=b('../Game/Bag/BagCtrl');cc['_RF']['pop']();},{'../Config/Config':'Config','../Core/GF':'GF','../Core/GameLoader':'GameLoader','../Game/Backend/BackendCtrl':'BackendCtrl','../Game/Bag/BagCtrl':'BagCtrl','../Game/Dungeon/DungeonCtrl':'DungeonCtrl','../Game/Fight/FightCtrl':'FightCtrl','../Game/Fight/FightParam':'FightParam'}],'LogUtil':[function(a,b,c){'use strict';var d;cc['_RF']['push'](b,'af0b1U7DbpBrKmNeblaIMJR','LogUtil'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['LogUtil']=c['LogLevel']=void 0x0,function(g){g[g['ALL']=0x0]='ALL',g[g['DEBUG']=0x1]='DEBUG',g[g['INFO']=0x2]='INFO',g[g['NOTICE']=0x3]='NOTICE',g[g['WARN']=0x4]='WARN',g[g['ERR']=0x5]='ERR';}(d=c['LogLevel']||(c['LogLevel']={}));class f{static['setLogLev'](g){f['level']=g,f['print']=console['log'],f['debug']=f['level']<=d['DEBUG']?console['debug']:()=>{},f['info']=f['level']<=d['INFO']?console['log']:()=>{},f['notice']=f['level']<=d['NOTICE']?console['info']:()=>{},f['warn']=f['level']<=d['WARN']?console['warn']:()=>{},f['err']=f['level']<=d['ERR']?console['error']:()=>{};}static['setLogCaller'](g){f['isLogCaller']=g;}static['setLogTime'](g){f['isLogTime']=g;}static['check_debug'](g,...h){g&&f['debug'](...h);}static['check_info'](g,...h){g&&f['info'](...h);}static['check_notice'](g,...h){g&&f['notice'](...h);}static['check_warn'](g,...h){g&&f['warn'](...h);}static['check_err'](g,...h){g&&f['err'](...h);}}c['LogUtil']=f,f['level']=d['DEBUG'],f['isLogCaller']=!0x1,f['isLogTime']=!0x1,f['setLogLev'](d['DEBUG']),cc['_RF']['pop']();},{}],'MathUtil':[function(a,b,c){'use strict';cc['_RF']['push'](b,'1eb290og4xO3Y87wDqBmTuY','MathUtil'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['MathUtil']=void 0x0;class d{static['randInt'](f,g){return Math['floor'](Math['random']()*(g-f+0x1))+f;}static['rand0ToMax'](f){return d['randInt'](0x0,f);}static['rand1ToMax'](f){return d['randInt'](0x1,f);}static['randFloat'](f,g){return Math['random']()*(g-f)+f;}static['randPer'](){return d['randInt'](0x0,0x3e7);}static['isRandPerSucc'](f){return this['randPer']()<f;}static['div'](f,g){return Math['floor'](f/g);}static['inRange'](f,g,h){return g<=f&&f<=h;}static['limitRange'](f,g,h){return f<g?g:f>h?h:f;}static['limitInt'](f,g,h){return f=Math['floor'](f),g=Math['ceil'](g),h=Math['floor'](h),f<g?g:f>h?h:f;}static['randWeightList'](f){let g=0x0;for(const l of f)g+=l[l['length']-0x1];if(g<=0x0)return[null,-0x1];let h=d['rand0ToMax'](g),j=0x0;for(let m=0x0,p=f['length'];m<p;++m){let q=f[m],u=q[q['length']-0x1];if(h<=u){j=m;break;}h-=u;}let k=[...f[j]];return k['splice'](k['length']-0x1,0x1),[k,j];}static['randWeightList2'](f){let g=0x0;for(const k of f)g+=k['weight'];if(g<=0x0)return[null,-0x1];let h=d['rand0ToMax'](g),j=0x0;for(let l=0x0,m=f['length'];l<m;++l){let p=f[l]['weight'];if(h<=p){j=l;break;}h-=p;}return[f[j]['data'],j];}static['calcItemCount'](f,g){return f['reduce']((h,j)=>j==g?h+0x1:h,0x0);}}c['MathUtil']=d,cc['_RF']['pop']();},{}],'MjTile':[function(b,f,j){'use strict';cc['_RF']['push'](f,'ce496y3Du5HeoIVvjrhhX/W','MjTile');var k=this&&this['__decorate']||function(D,E,F,G){var H,I=arguments['length'],J=I<0x3?E:null===G?G=Object['getOwnPropertyDescriptor'](E,F):G;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])J=Reflect['decorate'](D,E,F,G);else for(var K=D['length']-0x1;K>=0x0;K--)(H=D[K])&&(J=(I<0x3?H(J):I>0x3?H(E,F,J):H(E,F))||J);return I>0x3&&J&&Object['defineProperty'](E,F,J),J;};Object['defineProperty'](j,'__esModule',{'value':!0x0}),j['MjTile']=void 0x0;const m=b('../FightDefine'),p=b('./FightElement'),{ccclass:q,property:v}=cc['_decorator'];let w=class extends p['FightElement']{constructor(){super(...arguments),this['sprite']=null,this['match_group']=0x0,this['layerIndex']=0x0,this['cx']=0x0,this['cy']=0x0,this['flag']=0x0,this['_isRegistered']=!0x1,this['_isShowBack']=!0x1,this['_isHighLight']=!0x1,this['_isGrey']=!0x1,this['_isTarget']=!0x1,this['_errTimeout']=0x0;}['onInit'](){super['onInit']();}['onWillOpen'](){var D,E;super['onWillOpen']();let F=this['openParams']['data'];this['layerIndex']=F['layerIndex'],this['cx']=F['cx'],this['cy']=F['cy'],this['flag']=F['flag'],this['match_group']=null!==(E=null===(D=y['Config']['Tile'][this['bid']])||void 0x0===D?void 0x0:D['group_match'])&&void 0x0!==E?E:0x0,this['_isShowBack']=this['isMask']();}['onOpen'](){var D,E;super['onOpen'](),null===(E=null===(D=B['FightProcess']['instance'])||void 0x0===D?void 0x0:D['elemMgr'])||void 0x0===E||E['onMjTileOpen'](this),this['updateSprite'](),z['CCUtil']['getOrCreateComponent'](this['sprite']['node'],A['UIClick'])['setClickListener'](this['onClick'],this);}['isMask'](){return 0x0!=(this['flag']&m['MjTileFlag']['MASK']);}['setRegistered'](D){this['_isRegistered']=D;}['getCellList'](){return[new cc['Vec2'](this['cx']-0x1,this['cy']-0x1),new cc['Vec2'](this['cx'],this['cy']-0x1),new cc['Vec2'](this['cx']-0x1,this['cy']),new cc['Vec2'](this['cx'],this['cy'])];}['updateSprite'](){this['_isShowBack']?this['updateSpriteToBack']():this['updateSpriteToFront']();}['updateSpriteToFront'](){let D=y['Config']['Tile'][this['bid']];if(!D)return;let E=x['PathUtil']['getTileResPath'](D['res']);this['changeSpriteFrame'](this['sprite'],E);}['updateSpriteToBack'](){let D=x['PathUtil']['getTileResPath']('back');this['changeSpriteFrame'](this['sprite'],D);}['isHighLight'](){return this['_isHighLight'];}['setHighlight'](D){this['_isHighLight']!=D&&(this['_isHighLight']=D,this['updateColor']());}['isGrey'](){return this['_isGrey'];}['setGrey'](D){this['_isGrey']!=D&&(this['_isGrey']=D,this['updateColor']());}['isTarget'](){return this['_isTarget'];}['setTarget'](D){this['_isTarget']!=D&&(this['_isTarget']=D,this['updateColor']());}['updateColor'](){let D=cc['Color']['WHITE'];this['_isHighLight']?D=cc['Color']['YELLOW']:this['_isGrey']?D=cc['Color']['GRAY']:this['_isTarget']&&(D=cc['Color']['MAGENTA']),this['sprite']['node']['color']=D;}['turnFace'](D,E=!0x0,F=null){this['isMask']()&&this['_isShowBack']!=D?(this['_isShowBack']=D,E?cc['tween'](this['node'])['parallel'](cc['tween'](this['node'])['to'](0.05,{'scaleX':0.2}),cc['tween'](this['node'])['call'](()=>this['updateSprite']()))['to'](0.05,{'scaleX':0x1})['call'](()=>{F&&F();})['start']():(this['updateSprite'](),F&&F())):F&&F();}['isBlockLeft'](){var D;let E=null===(D=B['FightProcess']['instance'])||void 0x0===D?void 0x0:D['elemMgr'];return!E||null!=E['getTileAt'](this['layerIndex'],this['cx']-0x2,this['cy']-0x1)||null!=E['getTileAt'](this['layerIndex'],this['cx']-0x2,this['cy']);}['isBlockRight'](){var D;let E=null===(D=B['FightProcess']['instance'])||void 0x0===D?void 0x0:D['elemMgr'];return!E||null!=E['getTileAt'](this['layerIndex'],this['cx']+0x1,this['cy']-0x1)||null!=E['getTileAt'](this['layerIndex'],this['cx']+0x1,this['cy']);}['isBlockTop'](){var D;let E=null===(D=B['FightProcess']['instance'])||void 0x0===D?void 0x0:D['elemMgr'];if(!E)return!0x0;let F=this['layerIndex']+0x1;return null!=E['getTileAt'](F,this['cx']-0x1,this['cy']-0x1)||null!=E['getTileAt'](F,this['cx']-0x1,this['cy'])||null!=E['getTileAt'](F,this['cx'],this['cy']-0x1)||null!=E['getTileAt'](F,this['cx'],this['cy']);}['isBlocked'](){return this['isBlockTop']()||this['isBlockLeft']()&&this['isBlockRight']();}['onClick'](){var D,E;this['_isRegistered']&&(null===(E=null===(D=B['FightProcess']['instance'])||void 0x0===D?void 0x0:D['logic'])||void 0x0===E||E['onClickTile'](this));}['moveToHome'](D=!0x0){var E,F;let G=null===(F=null===(E=B['FightProcess']['instance'])||void 0x0===E?void 0x0:E['elemMgr'])||void 0x0===F?void 0x0:F['calcTilePosition'](this['cx'],this['cy']);G&&(D?cc['tween'](this['node'])['to'](0.1,{'position':z['CCUtil']['toVec3'](G)})['start']():this['node']['position']=z['CCUtil']['toVec3'](G));}['moveToUnblockSide'](D=!0x0){var E,F;let G=null===(F=null===(E=B['FightProcess']['instance'])||void 0x0===E?void 0x0:E['elemMgr'])||void 0x0===F?void 0x0:F['calcTilePosition'](this['cx'],this['cy']);if(!G)return;let H=this['isBlockLeft']();H!=this['isBlockRight']()&&(H?G['x']+=m['FightDefine']['MJ_FORMAT_CELL_WIDTH']:G['x']-=m['FightDefine']['MJ_FORMAT_CELL_WIDTH'],D?cc['tween'](this['node'])['to'](0.1,{'position':z['CCUtil']['toVec3'](G)})['start']():this['node']['position']=z['CCUtil']['toVec3'](G));}['playErrorClick'](){this['_errTimeout']=C['GameRoot']['gameTime']+0.5,this['setGrey'](!0x0),this['playShake']();}['isShowingError'](){return C['GameRoot']['gameTime']<this['_errTimeout'];}['playShake'](){let D=this['node']['position'],E=new cc['Vec3'](D['x']+0xa,D['y'],D['z']);cc['tween'](this['node'])['to'](0.1,{'position':E})['to'](0.1,{'position':D})['start']();}['onClose'](D){var E,F;null===(F=null===(E=B['FightProcess']['instance'])||void 0x0===E?void 0x0:E['elemMgr'])||void 0x0===F||F['onMjTileClose'](this),this['_isRegistered']=!0x1,this['_isShowBack']=!0x1,this['_isHighLight']=!0x1,this['_isGrey']=!0x1;let G=this['sprite']['getComponent'](A['UIClick']);null==G||G['unsetClickListener'](),cc['Tween']['stopAllByTarget'](this['node']),super['onClose'](D);}['onDestroy'](){super['onDestroy']();}};k([v(cc['Sprite'])],w['prototype'],'sprite',void 0x0),w=k([q],w),j['MjTile']=w;const x=b('../../Util/PathUtil'),y=b('../../../Config/Config'),z=b('../../../Core/CCUtil'),A=b('../../../Core/UIClick'),B=b('../FightProcess'),C=b('../../../Core/GameRoot');cc['_RF']['pop']();},{'../../../Config/Config':'Config','../../../Core/CCUtil':'CCUtil','../../../Core/GameRoot':'GameRoot','../../../Core/UIClick':'UIClick','../../Util/PathUtil':'PathUtil','../FightDefine':'FightDefine','../FightProcess':'FightProcess','./FightElement':'FightElement'}],'ModelMgr':[function(a,b,c){'use strict';cc['_RF']['push'](b,'d7128Ab1wFJzZijWVHbYHTp','ModelMgr'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['ModelMgr']=void 0x0;const d=a('../../../Core/GameEnhanceComponent'),f=a('../FightDefine');c['ModelMgr']=class extends d['GameEnhanceComponent']{constructor(){super(...arguments),this['_autoId']=0x0,this['_playingName']='',this['_playingOpt']={},this['_playingCounter']=0x0,this['_dirType']=f['ModelDirType']['NONE'],this['_isFlipX']=!0x1;}['onLoad'](){this['_modelNode']=this['node']['getChildByName']('model')||this['node'],this['_skeleton']=this['_modelNode']['getComponent'](sp['Skeleton']),this['_skeleton']||(this['_animation']=this['_modelNode']['getComponent'](cc['Animation'])),this['_skeleton']||this['_animation']||(this['_sprite']=this['_modelNode']['getComponent'](cc['Sprite'])),this['_animation']&&(this['_animation']['on']('lastframe',this['onPlayEachComplete'],this),this['_animation']['on']('finished',this['onPlayEachComplete'],this));}['play'](j,k){var l;this['_autoId']++;let m=this['_autoId'];if(null!=k||(k={}),k['count']=null!==(l=k['count'])&&void 0x0!==l?l:k['loop']?-0x1:0x1,this['_playingName']=j,this['_playingOpt']=k,this['_playingCounter']=0x0,this['_skeleton'])this['_skeleton']['setAnimation'](0x0,j,0x1!=k['count']),this['_skeleton']['setCompleteListener'](this['onPlayEachComplete']['bind'](this));else if(this['_animation']){let p=this['_animation']['getAnimationState'](j);p&&(p['wrapMode']=0x1!=k['count']?cc['WrapMode']['Loop']:cc['WrapMode']['Default']),this['_animation']['play'](j);}return m;}['onPlayEachComplete'](){if(this['_playingOpt']){this['_playingCounter']++;try{this['_playingOpt']['onEachComplete']&&this['_playingOpt']['onEachComplete'](this['_playingCounter'],this['_playingOpt']['count']);}catch(j){g['LogUtil']['err']('ModelMgr\x20onEachComplete\x20exception:\x20',j['stack']);}if(this['isValid']&&this['_playingOpt']['count']>0x0&&this['_playingCounter']>=this['_playingOpt']['count']&&(this['_playingOpt']['onEachComplete']=null,this['_playingName']='',this['_playingOpt']['onAllComplete'])){let k=this['_playingOpt']['onAllComplete'];this['_playingOpt']['onAllComplete']=null;try{k&&k();}catch(l){g['LogUtil']['err']('ModelMgr\x20onAllComplete\x20exception:\x20',l['stack']);}}}}['hasAnim'](j){return this['_skeleton']?null!=this['_skeleton']['findAnimation'](j):!!this['_animation']&&this['_animation']['hasAnimationState'](j);}['getPlayingName'](){return this['_playingName'];}['setModelVisible'](j){this['_modelNode']==this['node']?(this['_skeleton']&&(this['_skeleton']['enabled']=j),this['_animation']&&(this['_animation']['enabled']=j),this['_sprite']&&(this['_sprite']['enabled']=j)):this['_modelNode']['active']=j;}['changeModelSprite'](j){this['_sprite']&&j&&this['res']['load'](j,cc['SpriteFrame'],(k,l)=>{l&&(this['_sprite']['spriteFrame']=l);});}['setDirType'](j){this['_dirType']=j;}['setDir'](j){switch(this['_dirType']){case f['ModelDirType']['FLIP_X']:this['setFlipX'](j['x']<0x0);break;case f['ModelDirType']['REVERSE_FLIP_X']:this['setFlipX'](j['x']>0x0);break;case f['ModelDirType']['ROTATE_FROM_RIGHT']:{let k=cc['Vec2']['RIGHT']['signAngle'](j);this['_modelNode']['angle']=0xb4*k/Math['PI'];}break;case f['ModelDirType']['ROTATE_FROM_UP']:{let l=cc['Vec2']['UP']['signAngle'](j);this['_modelNode']['angle']=0xb4*l/Math['PI'];}}}['setFlipX'](j){if(this['_isFlipX']!=j){this['_isFlipX']=j;let k=Math['abs'](this['_modelNode']['scaleX']);this['_modelNode']['scaleX']=j?-k:k;}}['isFlipX'](){return this['_isFlipX'];}['startFlashWhite'](){let j=this['node']['getComponent'](h['FlashWhite']);j?j['addFlashCount']():j=this['node']['addComponent'](h['FlashWhite']);}['stopFlashWhite'](){let j=this['node']['getComponent'](h['FlashWhite']);j&&j['destroy']();}['onDestroy'](){this['_animation']&&this['_animation']['isValid']&&(this['_animation']['on']('lastframe',this['onPlayEachComplete'],this),this['_animation']['off']('finished',this['onPlayEachComplete'],this)),this['_skeleton']&&this['_skeleton']['isValid']&&(this['_skeleton']['setCompleteListener'](null),this['_skeleton']['setEndListener'](null)),this['_skeleton']=null,this['_animation']&&this['_animation']['isValid']&&this['_animation']['targetOff'](this),this['_animation']=null,this['_sprite']=null,this['_playingOpt']['onEachComplete']=null,this['_playingOpt']['onAllComplete']=null,super['onDestroy']();}};const g=a('../../../Core/LogUtil'),h=a('../../Common/Effect/FlashWhite');cc['_RF']['pop']();},{'../../../Core/GameEnhanceComponent':'GameEnhanceComponent','../../../Core/LogUtil':'LogUtil','../../Common/Effect/FlashWhite':'FlashWhite','../FightDefine':'FightDefine'}],'PathUtil':[function(a,b,c){'use strict';cc['_RF']['push'](b,'ba129SuCUlDDKPHDzVuMeDe','PathUtil'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['PathUtil']=void 0x0,c['PathUtil']=class{static['getPrefabPath'](d){return d['startsWith']('/')?d:'/Res/Prefab/'+d;}static['getEffectResPath'](d){return d['startsWith']('/')?d:'/Res/Prefab/Effect/'+d+'/'+d;}static['getUIViewPath'](d){return d['startsWith']('/')?d:'/Res/UIPrefab/'+d;}static['getTileResPath'](d){return d['startsWith']('/')?d:'/Res/UI/Tile/'+d;}static['getItemQualityBoxPath'](d){return'/Res/UI/Common/qbox'+d;}static['getIconPath'](d){return d['startsWith']('/')?d:'/Res/UI/Icon/'+d;}static['getSoundPath'](d){return d['startsWith']('/')?d:'/Res/Audio/'+d;}},cc['_RF']['pop']();},{}],'ResAgent':[function(a,b,c){'use strict';cc['_RF']['push'](b,'6dfecW0+iZFMZhv/BipMgvc','ResAgent');var d=this&&this['__decorate']||function(k,m,p,q){var u,v=arguments['length'],w=v<0x3?m:null===q?q=Object['getOwnPropertyDescriptor'](m,p):q;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])w=Reflect['decorate'](k,m,p,q);else for(var x=k['length']-0x1;x>=0x0;x--)(u=k[x])&&(w=(v<0x3?u(w):v>0x3?u(m,p,w):u(m,p))||w);return v>0x3&&w&&Object['defineProperty'](m,p,w),w;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['ResAgent']=void 0x0;const f=a('./GF'),{ccclass:g,property:h}=cc['_decorator'];let j=class extends cc['Component']{constructor(){super(...arguments),this['_loadingSet']=new Set(),this['_cacheList']=[];}['load'](k,m,p){let q=f['GF']['res']['load'](k,m,null,(u,v)=>{this['_loadingSet']['delete'](q),!u&&v&&this['_cacheList']['indexOf'](v)<0x0&&(v['addRef'](),this['_cacheList']['push'](v)),p&&p(u,v);});return q>0x0&&this['_loadingSet']['add'](q),q;}['loadList'](k,m){let p=f['GF']['res']['loadList'](k,null,(q,u)=>{this['_loadingSet']['delete'](p);for(let v of u)v['result']&&this['_cacheList']['indexOf'](v['result'])<0x0&&(v['result']['addRef'](),this['_cacheList']['push'](v['result']));m&&m(q,u);});return p>0x0&&this['_loadingSet']['add'](p),p;}['clearLoaded'](){for(let k of this['_cacheList'])k&&k['decRef']();this['_cacheList']['splice'](0x0,this['_cacheList']['length']);}['loadTask'](k,m){return new Promise(p=>{this['load'](k,m,(q,u)=>{p([q,u]);});});}['loadListTask'](k){return new Promise(m=>{this['loadList'](k,(p,q)=>{m([p,q]);});});}['clearLoading'](){this['_loadingSet']['forEach'](k=>{f['GF']['res']['cancelRequest'](k);}),this['_loadingSet']['clear']();}['clearAll'](){this['clearLoading'](),this['clearLoaded']();}['onDestroy'](){this['clearAll']();}};j=d([g],j),c['ResAgent']=j,cc['_RF']['pop']();},{'./GF':'GF'}],'ResManager':[function(b,c,d){'use strict';cc['_RF']['push'](c,'44990MM8KJGcI3G7yaaoBEm','ResManager');var f,g=this&&this['__decorate']||function(p,q,u,v){var w,x=arguments['length'],y=x<0x3?q:null===v?v=Object['getOwnPropertyDescriptor'](q,u):v;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])y=Reflect['decorate'](p,q,u,v);else for(var z=p['length']-0x1;z>=0x0;z--)(w=p[z])&&(y=(x<0x3?w(y):x>0x3?w(q,u,y):w(q,u))||y);return x>0x3&&y&&Object['defineProperty'](q,u,y),y;};Object['defineProperty'](d,'__esModule',{'value':!0x0}),d['ResManager']=void 0x0;const h=b('./LogUtil'),{ccclass:j,property:k}=cc['_decorator'];let m=f=class extends cc['Component']{constructor(){super(...arguments),this['_requestingSet']=new Set(),this['_remoteBundlesInfo']=[];}['newRequest'](){return f['_request_id']=f['_request_id']+0x1,this['_requestingSet']['add'](f['_request_id']),f['_request_id'];}['isRequestValid'](p){var q;return null===(q=this['_requestingSet'])||void 0x0===q?void 0x0:q['has'](p);}['checkRequestValid'](p){var q;return null===(q=this['_requestingSet'])||void 0x0===q?void 0x0:q['delete'](p);}['cancelRequest'](p){this['_requestingSet']['delete'](p);}['clearAllRequest'](){this['_requestingSet']['clear']();}['setRemoteBundleInfo'](p){if(p){let q=this['_remoteBundlesInfo']['findIndex'](u=>u['name']==p['name']);q>=0x0?this['_remoteBundlesInfo'][q]=p:this['_remoteBundlesInfo']['push'](p);}}['setRemoteBundleInfoList'](p){if(p)for(let q of p)this['setRemoteBundleInfo'](q);}['getRemoteBundleInfo'](p){let q=this['_remoteBundlesInfo']['findIndex'](u=>u['name']==p);return q>=0x0?this['_remoteBundlesInfo'][q]:null;}['getBundles'](){let p=[];return cc['assetManager']['bundles']['forEach'](q=>{p['push'](q);}),p;}['getBundleNames'](){let p=[];return cc['assetManager']['bundles']['forEach'](q=>{p['push'](q['name']);}),p;}['getBundle'](p){return cc['assetManager']['getBundle'](p);}['loadBundle'](p,q){let u=p,v={},w=this['getRemoteBundleInfo'](p);w&&(u=w['url'],v['version']=w['version']);let x=this['newRequest']();return cc['assetManager']['loadBundle'](u,v,(y,z)=>{if(y&&h['LogUtil']['err']('loadBundle\x20FAIL:\x20'+p+',\x20'+y),this['checkRequestValid'](x))try{q&&q(y,z);}catch(A){h['LogUtil']['err']('loadBundle\x20onComplete\x20exception:\x20',A['stack']);}}),x;}['loadMultiBundles'](p,q){let u=p['length'],v=0x0,w=0x0,x=this['newRequest']();for(let y of p)this['loadBundle'](y,z=>{this['isRequestValid'](x)&&(z?w++:v++,v+w>=u&&this['checkRequestValid'](x)&&q&&q(v,w));});return x;}['loadAllRemoteBundles'](p){let q=[];return this['_remoteBundlesInfo']['forEach'](u=>q['push'](u['name'])),this['loadMultiBundles'](q,p);}['findBundleByPath'](p,q){return cc['assetManager']['bundles']['find'](u=>!!u['getInfoWithPath'](p,q));}['findBundleByDir'](p){return cc['assetManager']['bundles']['find'](q=>{let u=q['getDirWithPath'](p);return u&&u['length']>0x0;});}['findBundleByScene'](p){return cc['assetManager']['bundles']['find'](q=>!!q['getSceneInfo'](p));}['load'](p,q,u,v){let w=this['findBundleByPath'](p,q);if(!w)return h['LogUtil']['err']('load\x20FAIL:\x20'+p+',\x20not\x20found'),-0x1;let x=this['newRequest']();return w['load'](p,q,(y,z,A)=>{if(this['isRequestValid'](x))try{u&&u(y,z,A);}catch(B){h['LogUtil']['err']('load\x20onProgress\x20exception:\x20',B['stack']);}},(y,z)=>{if(y&&h['LogUtil']['err']('load\x20FAIL:\x20'+p+',\x20'+y),this['checkRequestValid'](x))try{v&&v(y,z);}catch(A){h['LogUtil']['err']('load\x20onComplete\x20exception:\x20',A['stack']);}}),x;}['loadDir'](p,q,u,v){let w=this['findBundleByDir'](p);if(!w)return h['LogUtil']['err']('loadDir\x20FAIL:\x20'+p+',\x20not\x20found'),-0x1;let x=this['newRequest']();return w['loadDir'](p,q,(y,z,A)=>{if(this['isRequestValid'](x))try{u&&u(y,z,A);}catch(B){h['LogUtil']['err']('loadDir\x20onProgress\x20exception:\x20',B['stack']);}},(y,z)=>{if(y&&h['LogUtil']['err']('loadDir\x20FAIL:\x20'+p+',\x20'+y),this['checkRequestValid'](x))try{v&&v(y,z);}catch(A){h['LogUtil']['err']('loadDir\x20onComplete\x20exception:\x20',A['stack']);}}),x;}['loadWithBundle'](p,q,u,v,w){if(!p||this['getBundle'](p))return this['load'](q,u,v,w);let x=this['newRequest']();return this['loadBundle'](p,y=>{y?this['checkRequestValid'](x)&&w&&w(y,null):this['isRequestValid'](x)&&this['load'](q,u,(z,A,B)=>{this['isRequestValid'](x)&&v&&v(z,A,B);},(z,A)=>{this['checkRequestValid'](x)&&w&&w(z,A);});}),x;}['loadDirWithBundle'](p,q,u,v,w){if(!p||this['getBundle'](p))return this['loadDir'](q,u,v,w);let x=this['newRequest']();return this['loadBundle'](p,y=>{y?this['checkRequestValid'](x)&&w&&w(y,null):this['isRequestValid'](x)&&this['loadDir'](q,u,(z,A,B)=>{this['isRequestValid'](x)&&v&&v(z,A,B);},(z,A)=>{this['checkRequestValid'](x)&&w&&w(z,A);});}),x;}['loadList'](p,q,u){if(!p||0x0==p['length'])return-0x1;let v=this['newRequest'](),w=null,x=p['length'],y=0x0,z=(A,B,C)=>{if(this['isRequestValid'](v)){B&&(w=B),p[A]['result']=C,y++;try{q&&q(y,x);}catch(D){h['LogUtil']['err']('loadList\x20onProgress\x20exception:',D['stack']);}if(y>=x&&this['checkRequestValid'](v))try{u&&u(w,p);}catch(E){h['LogUtil']['err']('loadList\x20onComplete\x20exception:',E['stack']);}}};for(let A=0x0,B=p['length'];A<B;A++){let C=p[A];C['bundle']?this['loadWithBundle'](C['bundle'],C['path'],C['type'],null,(D,E)=>{z(A,D,E);}):this['load'](C['path'],C['type'],null,(D,E)=>{z(A,D,E);});}return v;}['loadScene'](p,q,u){let v=this['findBundleByScene'](p);if(!v)return h['LogUtil']['err']('loadScene\x20FAIL:\x20'+p+',\x20not\x20found'),-0x1;let w=this['newRequest']();return v['loadScene'](p,(x,y,z)=>{if(this['isRequestValid'](w))try{q&&q(x,y,z);}catch(A){h['LogUtil']['err']('loadScene\x20onProgress\x20exception:',A['stack']);}},(x,y)=>{if(x&&h['LogUtil']['err']('loadScene\x20FAIL:\x20'+p+',\x20'+x),this['checkRequestValid'](w))try{u&&u(x,y);}catch(z){h['LogUtil']['err']('loadScene\x20onComplete\x20exception:',z['stack']);}}),w;}['loadSceneWithBundle'](p,q,u,v){if(!p||this['getBundle'](p))return this['loadScene'](q,u,v);let w=this['newRequest']();return this['loadBundle'](p,x=>{x?this['checkRequestValid'](w)&&v&&v(x,null):this['isRequestValid'](w)&&this['loadScene'](q,(y,z,A)=>{this['isRequestValid'](w)&&u&&u(y,z,A);},(y,z)=>{this['checkRequestValid'](w)&&v&&v(y,z);});}),w;}['onDestroy'](){this['clearAllRequest']();}};m['_request_id']=0x0,m=f=g([j],m),d['ResManager']=m,cc['_RF']['pop']();},{'./LogUtil':'LogUtil'}],'ScrollGridView':[function(b,j,k){'use strict';cc['_RF']['push'](j,'02f84z30RBIXpRttkJh+1Tb','ScrollGridView');var q,v=this&&this['__decorate']||function(J,K,L,M){var N,O=arguments['length'],P=O<0x3?K:null===M?M=Object['getOwnPropertyDescriptor'](K,L):M;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])P=Reflect['decorate'](J,K,L,M);else for(var Q=J['length']-0x1;Q>=0x0;Q--)(N=J[Q])&&(P=(O<0x3?N(P):O>0x3?N(K,L,P):N(K,L))||P);return O>0x3&&P&&Object['defineProperty'](K,L,P),P;};Object['defineProperty'](k,'__esModule',{'value':!0x0}),k['ScrollGridDefaultLayouter']=k['ScrollGridView']=k['SVItemStatusFlag']=k['SVBatchMethod']=k['SVSetPosParam']=k['SVSetPosType']=k['SVScrollToItemType']=k['ScrollGridLayouterParamId']=k['ScrollGridDataVo']=void 0x0;const {ccclass:w,property:x}=cc['_decorator'],y=b('./UIUtil');class z{constructor(J=null,K=0x0,L=0x0,M=''){this['$index']=0x0,this['$data']=null,this['$type']=0x0,this['$lev']=0x0,this['$levindex']=0x0,this['$id']='',this['$uid']='',this['$status']=0x0,this['$x']=0x0,this['$y']=0x0,this['$w']=0x0,this['$h']=0x0,this['$item']=null,this['$data']=J,this['$type']=K,this['$lev']=L,this['$id']=M;}}var A,B,C,D,E;k['ScrollGridDataVo']=z,function(J){J[J['COL_NUM']=0x1]='COL_NUM',J[J['ITEM_SIZE']=0x2]='ITEM_SIZE',J[J['ITEM_SIZE_FUNC']=0x3]='ITEM_SIZE_FUNC',J[J['TOP_MARGIN']=0x4]='TOP_MARGIN',J[J['BOTTOM_MARGIN']=0x5]='BOTTOM_MARGIN',J[J['LEFT_MARGIN']=0x6]='LEFT_MARGIN',J[J['RIGHT_MARGIN']=0x7]='RIGHT_MARGIN',J[J['X_SPACE']=0x8]='X_SPACE',J[J['Y_SPACE']=0x9]='Y_SPACE',J[J['NEW_TYPE_WRAP']=0xa]='NEW_TYPE_WRAP',J[J['ONE_LINE_TYPE']=0xb]='ONE_LINE_TYPE';}(A=k['ScrollGridLayouterParamId']||(k['ScrollGridLayouterParamId']={})),function(J){J[J['FIRST']=0x0]='FIRST',J[J['LAST']=0x1]='LAST',J[J['SHOW']=0x2]='SHOW',J[J['FULL_SHOW']=0x3]='FULL_SHOW';}(B=k['SVScrollToItemType']||(k['SVScrollToItemType']={})),function(J){J[J['NONE']=0x0]='NONE',J[J['VALID_RANGE']=0x1]='VALID_RANGE',J[J['SET_OFFSET']=0x2]='SET_OFFSET',J[J['INDEX_FIRST']=0x3]='INDEX_FIRST',J[J['INDEX_LAST']=0x4]='INDEX_LAST',J[J['INDEX_KEEP']=0x5]='INDEX_KEEP',J[J['INDEX_SHOW']=0x6]='INDEX_SHOW',J[J['INDEX_FULL_SHOW']=0x7]='INDEX_FULL_SHOW',J[J['ITEM_FIRST']=0x8]='ITEM_FIRST',J[J['ITEM_LAST']=0x9]='ITEM_LAST',J[J['ITEM_KEEP']=0xa]='ITEM_KEEP',J[J['ITEM_SHOW']=0xb]='ITEM_SHOW',J[J['ITEM_FULL_SHOW']=0xc]='ITEM_FULL_SHOW';}(C=k['SVSetPosType']||(k['SVSetPosType']={}));class F{constructor(J=C['NONE'],K=[],L=0x0){this['set_type']=0x0,this['set_params']=[],this['anim_time']=0x0,this['set_type']=J,this['set_params']=K,this['anim_time']=L;}}k['SVSetPosParam']=F,function(J){J[J['NONE']=0x0]='NONE',J[J['MANUAL_BATCH']=0x1]='MANUAL_BATCH',J[J['AUTO_BATCH']=0x2]='AUTO_BATCH';}(D=k['SVBatchMethod']||(k['SVBatchMethod']={})),function(J){J[J['NONE']=0x0]='NONE',J[J['SELECTED']=0x1]='SELECTED',J[J['DELAY_ONSELECT']=0x2]='DELAY_ONSELECT';}(E=k['SVItemStatusFlag']||(k['SVItemStatusFlag']={}));let G=q=class extends cc['Component']{constructor(){super(),this['templatePrefabList']=[],this['_vo_list']=[],this['_layouter']=null,this['_reuse_map']=new Map(),this['_pool_map']=new Map(),this['_itemIdFun']=null,this['_createItemFun']=null,this['_updateItemFun']=null,this['_isCanSelectFun']=null,this['_itemSelectFun']=null,this['_itemTouchFun']=null,this['_scrollFun']=null,this['_async_create_enable']=!0x0,this['_async_create_item_index']=-0x1,this['_async_create_task_seq']=0x0,this['_scroll_last_offset']=new cc['Vec2'](0x0,0x0),this['_touch_enabled']=!0x0,this['_touch_registered']=!0x1,this['_touching_index']=-0x1,this['_touch_auto_select']=!0x0,this['_touch_auto_unselect']=!0x0,this['_touch_can_loop_select']=!0x1,this['_select_max']=0x1,this['_select_uids']=[],this['_batch_method']=D['NONE'],this['_batch_layers']=new Map(),this['_cacheScrollView']=null;}['onLoad'](){let J=this['node']['getComponent'](cc['Widget']);J&&J['updateAlignment']();let K=this['getSVView']();K!=this['node']?(y['UIUtil']['setAnchorPoint'](K,new cc['Vec2'](0x0,0x1)),y['UIUtil']['fillParent'](K),this['node']['on'](cc['Node']['EventType']['SIZE_CHANGED'],this['_syncViewSize'],this)):y['UIUtil']['safeChangeAnchor'](K,new cc['Vec2'](0x0,0x1));let L=this['getSVContent']();y['UIUtil']['setAnchorPoint'](L,new cc['Vec2'](0x0,0x1)),y['UIUtil']['fillParent'](L);}['_syncViewSize'](){let J=this['getSVView']();J!=this['node']&&y['UIUtil']['fillParent'](J);}['onEnable'](){this['_registerNodeEvent']();}['onDisable'](){this['_unregisterNodeEvent']();}['onDestroy'](){this['_itemIdFun']=null,this['_createItemFun']=null,this['_updateItemFun']=null,this['_isCanSelectFun']=null,this['_itemSelectFun']=null,this['_itemTouchFun']=null,this['_scrollFun']=null,this['_layouter']=null,this['_vo_list']=[],this['_reuse_map']['clear'](),this['_pool_map']['clear'](),this['_batch_layers']['clear']();}['clear'](){this['_pushAllReuseToPool'](),this['_pushAllToPool'](),this['_vo_list']=[],this['_clearPool']();}['_registerNodeEvent'](){this['node']['on']('scroll-began',this['onScrollBegan'],this),this['node']['on']('scroll-ended',this['onScrollEnded'],this),this['node']['on']('scrolling',this['onScrolling'],this),this['_registerTouchEvent']();}['_unregisterNodeEvent'](){this['node']['off']('scroll-began',this['onScrollBegan'],this),this['node']['off']('scroll-ended',this['onScrollEnded'],this),this['node']['off']('scrolling',this['onScrolling'],this),this['_unregisterTouchEvent']();}['_registerTouchEvent'](){this['_touch_enabled']&&!this['_touch_registered']&&(this['_touch_registered']=!0x0,this['node']['on'](cc['Node']['EventType']['TOUCH_START'],this['_onTouchBegan'],this,!0x0),this['node']['on'](cc['Node']['EventType']['TOUCH_END'],this['_onTouchEnded'],this,!0x0),this['node']['on'](cc['Node']['EventType']['TOUCH_CANCEL'],this['_onTouchCancelled'],this,!0x0));}['_unregisterTouchEvent'](){this['_touch_registered']&&(this['_touch_registered']=!0x1,this['node']['off'](cc['Node']['EventType']['TOUCH_START'],this['_onTouchBegan'],this,!0x0),this['node']['off'](cc['Node']['EventType']['TOUCH_END'],this['_onTouchEnded'],this,!0x0),this['node']['off'](cc['Node']['EventType']['TOUCH_CANCEL'],this['_onTouchCancelled'],this,!0x0));}['getScrollView'](){return this['_cacheScrollView']||(this['_cacheScrollView']=this['getComponent'](cc['ScrollView'])),this['_cacheScrollView'];}['getSVView'](){return this['getSVContent']()['parent'];}['getSVContent'](){return this['getScrollView']()['content'];}['getSVViewSize'](){return y['UIUtil']['getContentSize'](this['getSVView']());}['getSVContentSize'](){return y['UIUtil']['getContentSize'](this['getSVContent']());}['isVertical'](){return this['getScrollView']()['vertical'];}['setLayouter'](J){this['_layouter']=J;}['getLayouter'](){return this['_layouter']||(this['_layouter']=new H()),this['_layouter'];}['getLayoutParam'](J){return this['getLayouter']()['getParam'](J);}['setLayoutParam'](J,K){this['getLayouter']()['setParam'](J,K);}['setColNum'](J){this['getLayouter']()['setParam'](A['COL_NUM'],J);}['getColNum'](){var J;return null!==(J=this['getLayouter']()['getParam'](A['COL_NUM']))&&void 0x0!==J?J:0x1;}['setItemSize'](J){this['getLayouter']()['setParam'](A['ITEM_SIZE'],J);}['getItemSize'](){var J;return null!==(J=this['getLayouter']()['getParam'](A['ITEM_SIZE']))&&void 0x0!==J?J:new cc['Size'](0x0,0x0);}['setItemSizeFun'](J){this['getLayouter']()['setParam'](A['ITEM_SIZE_FUNC'],J);}['getItemSizeFun'](){var J;return null!==(J=this['getLayouter']()['getParam'](A['ITEM_SIZE_FUNC']))&&void 0x0!==J?J:null;}['setMargin'](J,K,L,M){this['getLayouter']()['setParam'](A['LEFT_MARGIN'],J),this['getLayouter']()['setParam'](A['TOP_MARGIN'],L),this['getLayouter']()['setParam'](A['RIGHT_MARGIN'],K),this['getLayouter']()['setParam'](A['BOTTOM_MARGIN'],M);}['setXSpace'](J){this['getLayouter']()['setParam'](A['X_SPACE'],J);}['getXSpace'](){var J;return null!==(J=this['getLayouter']()['getParam'](A['X_SPACE']))&&void 0x0!==J?J:0x0;}['setYSpace'](J){this['getLayouter']()['setParam'](A['Y_SPACE'],J);}['getYSpace'](){var J;return null!==(J=this['getLayouter']()['getParam'](A['Y_SPACE']))&&void 0x0!==J?J:0x0;}['setWrapOnNewType'](J){this['getLayouter']()['setParam'](A['NEW_TYPE_WRAP'],J);}['getWrapOnNewType'](){var J;return null!==(J=this['getLayouter']()['getParam'](A['NEW_TYPE_WRAP']))&&void 0x0!==J&&J;}['setOneLineType'](J){this['getLayouter']()['setParam'](A['ONE_LINE_TYPE'],J);}['getOneLineType'](){var J;return null!==(J=this['getLayouter']()['getParam'](A['ONE_LINE_TYPE']))&&void 0x0!==J?J:-0x1;}['setList'](J,K={}){var L,M;this['_pushAllToReuse']();let N=K['is_full_refresh']?{}:this['_saveStatusData'](),O=this['_vo_list'],P=this['getSVContentSize']();this['_vo_list']=[];let Q=[],R=[],S=-0x1;for(let U=0x0,V=J['length'];U<V;++U){let W=new z();W['$index']=U;let X=J[U];X instanceof z?(W['$data']=X['$data'],W['$type']=X['$type'],W['$lev']=X['$lev'],W['$id']=X['$id']):W['$data']=X,''===W['$id']&&(W['$id']=this['_itemIdFun']?this['_itemIdFun'](W['$data'],W['$type']):U),''===W['$uid']&&(W['$uid']=q['_combineUid'](W['$id'],W['$lev'],Q));let Y=W['$lev'];Q[Y]=W['$id'],Y>S?(R[Y]=0x0,W['$levindex']=0x0):(R[Y]=(null!==(L=R[Y])&&void 0x0!==L?L:-0x1)+0x1,W['$levindex']=R[Y]),S=Y,this['_vo_list'][U]=W;}K['is_full_refresh']||this['_restoreStatusData'](N);let T=this['getLayouter']();if(T&&this['_createItemFun']){let Z=T['calcLayout'](this['_vo_list'],this['getSVViewSize']());y['UIUtil']['setContentSize'](this['getSVContent'](),Z);for(let [a1,a2]of this['_batch_layers'])y['UIUtil']['setContentSize'](a2,Z);let a0=null!==(M=K['restore_pos_param'])&&void 0x0!==M?M:new F(C['VALID_RANGE']);this['_changeContentOffset'](a0,O,P),this['updateView']();}}static['_combineUid'](J,K,L){let M='';for(let N=0x0;N<K;++N)M=M+String(L[N])+'/';return M+String(J);}['_saveStatusData'](){let J={};for(let K=0x0,L=this['_vo_list']['length'];K<L;++K){let M=this['_vo_list'][K];0x0!=M['$status']&&(J[M['$uid']]=M['$status']);}return J;}['_restoreStatusData'](J){for(let K=0x0,L=this['_vo_list']['length'];K<L;++K){let M=this['_vo_list'][K],N=J[M['$uid']];M['$status']=null!=N?N:0x0;}}['getLength'](){return this['_vo_list']['length'];}['getVoList'](){return this['_vo_list'];}['getDataList'](){let J=[];for(let K=0x0,L=this['_vo_list']['length'];K<L;++K){let M=this['_vo_list'][K];J['push'](M['$data']);}return J;}['getVoByIndex'](J){return this['_vo_list'][J]||null;}['getVoByUid'](J){for(let K=0x0,L=this['_vo_list']['length'];K<L;++K){let M=this['_vo_list'][K];if(M['$uid']==J)return M;}return null;}['getVoByIdAndType'](J,K=0x0){for(let L=0x0,M=this['_vo_list']['length'];L<M;++L){let N=this['_vo_list'][L];if(N['$id']==J&&N['$type']==K)return N;}return null;}['getIndexByUid'](J){let K=this['getVoByUid'](J);return K?K['$index']:-0x1;}['removeDataAt'](J,K={}){let L=[];for(let M=0x0,N=this['_vo_list']['length'];M<N;++M)if(M!=J){let O=this['_vo_list'][M];L['push'](new z(O['$data'],O['$type'],O['$lev'],O['$id']));}this['setList'](L,K);}['insertDataAt'](J,K,L={}){let M=[];for(let N=0x0,O=this['_vo_list']['length'];N<O;++N){N==J&&M['push'](K);let P=this['_vo_list'][N];M['push'](new z(P['$data'],P['$type'],P['$lev'],P['$id']));}this['setList'](M,L);}['insertDataListAt'](J,K,L={}){let M=[];for(let N=0x0,O=this['_vo_list']['length'];N<O;++N){if(N==J)for(let Q=0x0,R=K['length'];Q<R;++Q)M['push'](K[Q]);let P=this['_vo_list'][N];M['push'](new z(P['$data'],P['$type'],P['$lev'],P['$id']));}this['setList'](M,L);}['removeChildDatasAt'](J,K={}){let L=[],M=-0x1,N=!0x1;for(let O=0x0,P=this['_vo_list']['length'];O<P;++O){let Q=this['_vo_list'][O];O==J?(L['push'](new z(Q['$data'],Q['$type'],Q['$lev'],Q['$id'])),M=Q['$lev'],N=!0x0):N?Q['$lev']<=M&&(L['push'](new z(Q['$data'],Q['$type'],Q['$lev'],Q['$id'])),N=!0x1):L['push'](new z(Q['$data'],Q['$type'],Q['$lev'],Q['$id']));}this['setList'](L,K);}['getScrollOffset'](){let J=this['getSVContent']()['position'];return new cc['Vec2'](-J['x'],J['y']);}['getMaxScrollOffset'](){let J=y['UIUtil']['getContentSize'](this['getSVContent']()),K=y['UIUtil']['getContentSize'](this['getSVView']());return new cc['Vec2'](Math['max'](J['width']-K['width'],0x0),Math['max'](J['height']-K['height']));}['limitScrollOffset'](J){let K=this['getMaxScrollOffset']();return J['clampf'](cc['Vec2']['ZERO'],K);}['scrollToOffset'](J,K=0x0,L=!0x1){this['getScrollView']()['scrollToOffset'](J,K,L);}['stopAutoScroll'](){this['getScrollView']()['stopAutoScroll']();}['isAutoScrolling'](){return this['getScrollView']()['isAutoScrolling']();}['_changeContentOffset'](J,K=[],L=new cc['Size'](0x0,0x0)){switch(J['set_type']){case C['SET_OFFSET']:if(J['set_params'][0x0]instanceof cc['Vec2']){let N=this['limitScrollOffset'](J['set_params'][0x0]);return void this['scrollToOffset'](N,J['anim_time']);}break;case C['INDEX_FIRST']:if('number'==typeof J['set_params'][0x0]&&this['scrollToIndex'](J['set_params'][0x0],B['FIRST'],J['anim_time']))return;break;case C['INDEX_LAST']:if('number'==typeof J['set_params'][0x0]&&this['scrollToIndex'](J['set_params'][0x0],B['LAST'],J['anim_time']))return;break;case C['INDEX_KEEP']:if('number'==typeof J['set_params'][0x0]){let O=J['set_params'][0x0],P=J['set_params'][0x1]&&J['set_params'][0x1]instanceof cc['Vec2']?J['set_params'][0x1]:new cc['Vec2'](0x0,0x1),Q=K[O],R=this['_vo_list'][O];if(Q&&R){let S=this['getScrollOffset']();S['x']=S['x']+R['$x']+R['$w']*P['x']-Q['$x']-Q['$w']*P['x'],S['y']=S['y']-R['$y']-R['$h']*P['y']+Q['$y']+Q['$h']*P['y'],this['scrollToOffset'](this['limitScrollOffset'](S),J['anim_time']);}}break;case C['INDEX_SHOW']:if('number'==typeof J['set_params'][0x0]&&this['scrollToIndex'](J['set_params'][0x0],B['SHOW'],J['anim_time']))return;break;case C['INDEX_FULL_SHOW']:if('number'==typeof J['set_params'][0x0]&&this['scrollToIndex'](J['set_params'][0x0],B['FULL_SHOW'],J['anim_time']))return;break;case C['ITEM_FIRST']:if('string'==typeof J['set_params'][0x0]&&this['scrollToUid'](J['set_params'][0x0],B['FIRST'],J['anim_time']))return;break;case C['ITEM_LAST']:if('string'==typeof J['set_params'][0x0]&&this['scrollToUid'](J['set_params'][0x0],B['LAST'],J['anim_time']))return;break;case C['ITEM_KEEP']:if('string'==typeof J['set_params'][0x0]){let T=J['set_params'][0x0],U=J['set_params'][0x1]&&J['set_params'][0x1]instanceof cc['Vec2']?J['set_params'][0x1]:new cc['Vec2'](0x0,0x1),V=K['find'](X=>X['$uid']==T),W=this['_vo_list']['find'](X=>X['$uid']==T);if(V&&W){let X=this['getScrollOffset']();X['x']=X['x']+W['$x']+W['$w']*U['x']-V['$x']-V['$w']*U['x'],X['y']=X['y']-W['$y']-W['$h']*U['y']+V['$y']+V['$h']*U['y'],this['scrollToOffset'](this['limitScrollOffset'](X),J['anim_time']);}}break;case C['ITEM_SHOW']:if('string'==typeof J['set_params'][0x0]&&this['scrollToUid'](J['set_params'][0x0],B['SHOW'],J['anim_time']))return;break;case C['ITEM_FULL_SHOW']:if('string'==typeof J['set_params'][0x0]&&this['scrollToUid'](J['set_params'][0x0],B['FULL_SHOW'],J['anim_time']))return;}let M=this['limitScrollOffset'](this['getScrollOffset']());this['scrollToOffset'](M,J['anim_time']);}['changeContentOffset'](J){this['_changeContentOffset'](J,this['_vo_list'],this['getSVContentSize']()),J['anim_time']<=0x0&&this['updateView']();}['getVoScrollOffset'](J,K=new cc['Vec2'](0x0,0x1)){return new cc['Vec2'](J['$x']+K['x']*J['$w'],-(J['$y']+K['y']*J['$h']));}['getScrollOffsetByUid'](J,K=new cc['Vec2'](0x0,0x1)){let L=this['getVoByUid'](J);return L?this['getVoScrollOffset'](L,K):new cc['Vec2'](0x0,0x0);}['getScrollOffsetByIndex'](J,K=new cc['Vec2'](0x0,0x1)){let L=this['getVoByIndex'](J);return L?this['getVoScrollOffset'](L,K):new cc['Vec2'](0x0,0x0);}['_calcItemScrollOffset'](J,K){switch(K){case B['FIRST']:return this['getVoScrollOffset'](J);case B['LAST']:{let L=this['getVoScrollOffset'](J),M=this['getSVContentSize']();return this['isVertical']()?L['y']=L['y']-M['height']+J['$h']:L['x']=L['x']-M['width']+J['$w'],L;}case B['SHOW']:{let N=this['getInSightRect']();if(this['isItemInSight'](J,N))return this['getScrollOffset']();let O=this['getVoScrollOffset'](J),P=this['getSVContentSize']();return this['isVertical']()?J['$y']>=N['yMax']?O:(O['y']=O['y']-P['height']+J['$h'],O):J['$x']+J['$w']<=N['xMin']?O:(O['x']=O['x']-P['width']+J['$w'],O);}case B['FULL_SHOW']:{let Q=this['getInSightRect']();if(this['isItemAllInSight'](J,Q))return this['getScrollOffset']();let R=this['getVoScrollOffset'](J),S=this['getSVContentSize']();return this['isVertical']()?J['$y']+J['$h']>=Q['yMax']?R:(R['y']=R['y']-S['height']+J['$h'],R):J['$x']<=Q['xMin']?R:(R['x']=R['x']-S['width']+J['$w'],R);}}return new cc['Vec2'](0x0,0x0);}['scrollToUid'](J,K=B['FIRST'],L=0x0,M=!0x1){let N=this['getVoByUid'](J);if(N){let O=this['limitScrollOffset'](this['_calcItemScrollOffset'](N,K));return this['scrollToOffset'](O,L,M),!0x0;}return!0x1;}['scrollToIndex'](J,K=B['FIRST'],L=0x0,M=!0x1){let N=this['getVoByIndex'](J);if(N){let O=this['limitScrollOffset'](this['_calcItemScrollOffset'](N,K));return this['scrollToOffset'](O,L,M),!0x0;}return!0x1;}['getInSightRect'](){let J=this['getSVContent']()['position'],K=this['getSVViewSize']();return new cc['Rect'](-J['x'],-J['y']-K['height'],K['width'],K['height']);}['getExtendInSightRect'](){let J=this['getInSightRect']();return J['x']=J['x']-0x64,J['y']=J['y']-0x64,J['width']=J['width']+0xc8,J['height']=J['height']+0xc8,J;}['getInSightRange'](){let J=this['getSVContent']()['position'],K=this['getSVViewSize']();return[new cc['Vec2'](-J['x'],-J['y']-K['height']),new cc['Vec2'](-J['x']+K['width'],-J['y'])];}['isItemInSight'](J,K=null){return K=null!=K?K:this['getInSightRect'](),!(J['$y']>K['yMax']||J['$y']+J['$h']<K['yMin']||J['$x']>K['xMax']||J['$x']+J['$w']<K['xMin']);}['isItemAllInSight'](J,K=null){return K=null!=K?K:this['getInSightRect'](),J['$x']>=K['xMin']&&J['$y']>=K['yMin']&&J['$x']+J['$w']<=K['xMax']&&J['$y']+J['$h']<=K['yMax'];}['isIndexInSight'](J,K=null){let L=this['getVoByIndex'](J);return!!L&&this['isItemInSight'](L,K);}['isUidInSight'](J,K=null){let L=this['getVoByUid'](J);return!!L&&this['isItemInSight'](L,K);}['findVoByPos'](J){let K=J['x'],L=J['y'];for(let M=0x0,N=this['_vo_list']['length'];M<N;++M){let O=this['_vo_list'][M];if(O['$x']<=K&&K<O['$x']+O['$w']&&O['$y']<=L&&L<O['$y']+O['$h'])return O;}return null;}['findVoByWorldPos'](J){let K=this['getSVContent']();if(K){let L=K['convertToNodeSpaceAR'](new cc['Vec2'](J['x'],J['y']));return this['findVoByPos'](new cc['Vec2'](L['x'],L['y']));}return null;}['updateView'](){if(!this['_createItemFun'])return;let J=this['getExtendInSightRect']();this['_moveNoShowToPool'](J),this['_async_create_enable']?this['_createInSightItemsAsync'](J):(this['_createInSightItems'](J),this['_pushAllReuseToPool']());}['_moveNoShowToPool'](J=null){J=null!=J?J:this['getExtendInSightRect']();for(let K=0x0,L=this['_vo_list']['length'];K<L;++K){let M=this['_vo_list'][K];if(M['$item']&&!this['isItemInSight'](M,J)){let N=M['$item'];M['$item']=null,this['_pushPoolItem'](M['$type'],N);}}}['_createInSightItems'](J=null){J=null!=J?J:this['getExtendInSightRect']();for(let K=0x0,L=this['_vo_list']['length'];K<L;++K)this['_createOneInSightItem'](K,J);}['_createInSightItemsAsync'](J=null){this['_async_create_item_index']=0x0,this['_async_create_task_seq']++;}['_createOneInSightItem'](J,K=null){K=null!=K?K:this['getExtendInSightRect']();let L=this['_vo_list'][J];if(L&&this['isItemInSight'](L,K)){let M=L['$item'];if(!M){(M=this['_popReuseItem'](L['$type']))||(M=this['_popPoolItem'](L['$type'])),M||(M=this['_createItem'](L));let N=M['node']['active'],O=(M['node']['parent'],M['node']['getAnchorPoint']()),P=M['node']['getContentSize']();M['node']['setPosition'](L['$x']+O['x']*P['width'],L['$y']+O['y']*P['height']),M['node']['active']=!0x0,M['node']['parent']||(M['node']['parent']=this['getSVContent']()),L['$item']=M,this['_batch_method']==D['MANUAL_BATCH']&&(N||M['syncBatchActive']&&M['syncBatchActive'](),M['syncBatchPosition']&&M['syncBatchPosition']());let Q=(L['$status']&E['SELECTED'])>0x0;return M['setItemIndex'](L['$index']),M['setItemUid'](L['$uid']),M['setItemSelected'](Q),M['setItemData'](L['$data']),this['_updateItemFun']&&this['_updateItemFun'](M,L['$data'],L['$type'],L),Q&&(L['$status']&E['DELAY_ONSELECT'])>0x0&&(L['$status']=L['$status']&~E['DELAY_ONSELECT'],this['_itemSelectFun']&&this['_itemSelectFun'](M,Q)),M;}}return null;}['getShowItemList'](){let J=[];for(const K of this['_vo_list'])K['$item']&&J['push'](K['$item']);return J;}['getInSightItemList'](){let J=[],K=this['getInSightRect']();for(const L of this['_vo_list'])L['$item']&&this['isItemInSight'](L,K)&&J['push'](L['$item']);return J;}['findShowCell'](J){if(!J)return null;for(let K of this['_vo_list'])if(J(K['$data']))return K['$item'];return null;}['createItemWithTemplate'](J,K){let L=this['templatePrefabList'][K],M=null;return I['GF']['entity']['open'](J,L,this['getSVContent'](),null,N=>{M=N;}),M;}['update'](){if(this['_async_create_item_index']>=0x0){let J=this['_async_create_task_seq'],K=this['_async_create_item_index'],L=this['_vo_list']['length'];for(;K<L;++K)if(null!=this['_createOneInSightItem'](K)){++K;break;}this['_async_create_task_seq']==J&&(K>=L?(this['_async_create_item_index']=-0x1,this['_pushAllReuseToPool']()):this['_async_create_item_index']=K);}}['onScrollBegan'](J){this['_scroll_last_offset']=this['getScrollOffset'](),this['_scrollFun']&&this['_scrollFun'](this,'scroll-began');}['onScrollEnded'](J){this['_scrollFun']&&this['_scrollFun'](this,'scroll-ended'),this['updateView']();}['onScrolling'](J){this['_scrollFun']&&this['_scrollFun'](this,'scrolling');let K=this['getScrollOffset']();cc['Vec2']['squaredDistance'](this['_scroll_last_offset'],K)<0x9||(this['_scroll_last_offset']=K,this['updateView']());}['enableTouch'](J=!0x0){this['_touch_enabled']!=J&&(this['_touch_enabled']=J,this['_touch_enabled']&&this['enabled']?this['_registerTouchEvent']():this['_unregisterTouchEvent']());}['isTouchEnabled'](){return this['_touch_enabled'];}['setTouchAutoSelect'](J){this['_touch_auto_select']=J;}['isTouchAutoSelect'](){return this['_touch_auto_select'];}['setTouchAutoUnselect'](J){this['_touch_auto_unselect']=J;}['isTouchAutoUnselect'](){return this['_touch_auto_unselect'];}['setTouchCanLoopSelect'](J){this['_touch_can_loop_select']=J;}['isTouchCanLoopSelect'](){return this['_touch_can_loop_select'];}['_onTouchBegan'](J,K){if(!J)return;let L=this['findVoByWorldPos'](J['getLocation']());if(!L)return;this['_touching_index']=L['$index'];let M=L['$item'];M&&M['onSVTouchBegan'](J);}['_onTouchCancelled'](J,K){J&&this['_doSVTouchCancel'](J);}['_onTouchEnded'](J,K){if(!J)return;if(cc['Vec2']['distance'](J['getStartLocation'](),J['getLocation']())>0x14)return void this['_doSVTouchCancel'](J);let L=this['findVoByWorldPos'](J['getLocation']());L&&L['$index']==this['_touching_index']?this['_doSVTouchEnd'](J):this['_doSVTouchCancel'](J);}['_doSVTouchCancel'](J){if(this['_touching_index']>=0x0){let K=this['_vo_list'][this['_touching_index']];if(K){let L=K['$item'];L&&L['onSVTouchCancel'](J);}}this['_touching_index']=-0x1;}['_doSVTouchEnd'](J){if(this['_touching_index']>=0x0){let K=this['_vo_list'][this['_touching_index']];if(K){let L=K['$item'];L&&(L['onSVTouchEnded'](J),this['_doCheckTouchSelect'](K),this['_itemTouchFun']&&this['_itemTouchFun'](L,K['$data'],K['$type']));}}this['_touching_index']=-0x1;}['_doCheckTouchSelect'](J){let K=J['$item'];if(!K)return!0x1;if(this['_select_max']>0x0){let L=(J['$status']&E['SELECTED'])>0x0;if(!L&&this['_touch_auto_select']){let M=!0x0;if(!this['_touch_can_loop_select']&&this['_select_uids']['length']>=this['_select_max']&&(M=!0x1),M&&this['_isCanSelectFun']&&(M=this['_isCanSelectFun'](K)),M)return this['_doSelect'](J),!0x0;}else if(L&&this['_touch_auto_unselect'])return this['_doUnselect'](J),!0x0;}return!0x1;}['_doUnselect'](J){let K=J['$uid'],L=this['_select_uids']['indexOf'](K);L>=0x0&&this['_select_uids']['splice'](L,0x1),J['$status']=J['$status']&~E['SELECTED'],J['$status']=J['$status']&~E['DELAY_ONSELECT'];let M=J['$item'];M&&(M['setItemSelected'](!0x1),this['_itemSelectFun']&&this['_itemSelectFun'](M,!0x1));}['_doSelect'](J){for(;this['_select_uids']['length']>0x0&&this['_select_uids']['length']+0x1>this['_select_max'];)this['unselectOld']();if(this['_select_max']<=0x0)return;this['_select_uids']['push'](J['$uid']);let K=J['$item'];J['$status']=J['$status']|E['SELECTED'],K?(J['$status']=J['$status']&~E['DELAY_ONSELECT'],K['setItemSelected'](!0x0),this['_itemSelectFun']&&this['_itemSelectFun'](K,!0x0)):J['$status']=J['$status']|E['DELAY_ONSELECT'];}['setSelectMax'](J){this['_select_max']=Math['max'](Math['floor'](J),0x0);}['getSelectMax'](){return this['_select_max'];}['getSelectUid'](){return this['_select_uids']['length']>0x0?this['_select_uids'][0x0]:'';}['getSelectVo'](){let J=this['getSelectUid']();return J?this['getVoByUid'](J):null;}['getSelectIndex'](){let J=this['getSelectVo']();return J?J['$index']:-0x1;}['getSelectData'](){let J=this['getSelectVo']();return J?J['$data']:null;}['getSelectItem'](){let J=this['getSelectVo']();return J?J['$item']:null;}['getSelectUids'](){return this['_select_uids'];}['getSelectVos'](){let J=[];for(let K of this['_select_uids']){let L=this['getVoByUid'](K);L&&J['push'](L);}return J;}['getSelectIndexs'](){let J=this['getSelectVos'](),K=[];for(const L of J)K['push'](L['$index']);return K;}['getSelectDatas'](){let J=this['getSelectVos'](),K=[];for(const L of J)K['push'](L['$data']);return K;}['getSelectItems'](){let J=this['getSelectVos'](),K=[];for(const L of J)L['$item']&&K['push'](L['$item']);return K;}['unselectOld'](){if(this['_select_uids']['length']>0x0){let J=this['_select_uids'][0x0],K=this['getVoByUid'](J);K&&this['_doUnselect'](K);}}['unselectAll'](){for(let J=this['_select_uids']['length']-0x1;J>=0x0;--J){let K=this['_select_uids'][J],L=this['getVoByUid'](K);L&&this['_doUnselect'](L);}}['unselectByUid'](J){if(this['_select_uids']['indexOf'](J)>=0x0){let K=this['getVoByUid'](J);K&&this['_doUnselect'](K);}}['unselectByIndex'](J){let K=this['getVoByIndex'](J);K&&this['unselectByUid'](K['$uid']);}['unselectByIdAndType'](J,K=0x0){let L=this['getVoByIdAndType'](J,K);L&&this['unselectByUid'](L['$uid']);}['setSelectByUid'](J){if(J){let K=this['getVoByUid'](J);K&&this['_doSelect'](K);}else this['unselectAll']();}['setSelectByIndex'](J){if(J<0x0)this['unselectAll']();else{let K=this['getVoByIndex'](J);K&&this['_doSelect'](K);}}['setSelectByIdAndType'](J,K=0x0){if(null==J)this['unselectAll']();else{let L=this['getVoByIdAndType'](J,K);L&&this['_doSelect'](L);}}['_pushAllToReuse'](J=0x0){for(let K=J,L=this['_vo_list']['length'];K<L;++K){let M=this['_vo_list'][K],N=M['$item'];N&&(M['$item']=null,this['_pushReuseItem'](M['$type'],N));}for(let [O,P]of this['_reuse_map'])P['reverse']();}['_pushReuseItem'](J,K){if(!K)return;let L=this['_reuse_map']['get'](J);L||(L=[],this['_reuse_map']['set'](J,L)),L['indexOf'](K)>=0x0||L['push'](K);}['_popReuseItem'](J){let K=this['_reuse_map']['get'](J);if(K&&K['length']>0x0){let L=K['pop']();if(L)return L;}return null;}['_pushAllReuseToPool'](){for(let [J,K]of this['_reuse_map'])for(let L of K)this['_pushPoolItem'](J,L);this['_reuse_map']['clear']();}['_clearPool'](){var J;for(let [K,L]of this['_pool_map'])for(let M of L)M&&(M['isValidEntity']?M['closeMe'](!0x0):(null===(J=M['node'])||void 0x0===J?void 0x0:J['isValid'])&&(M['node']['removeFromParent'](!0x1),M['node']['destroy']()));this['_pool_map']['clear']();}['_createItem'](J){return this['_createItemFun'](J['$data'],J['$type'],J,this['getSVContent']());}['_popPoolItem'](J){let K=this['_pool_map']['get'](J);if(K&&K['length']>0x0){let L=K['pop']();if(L)return L;}return null;}['_pushPoolItem'](J,K){if(!K)return;let L=K['node']['active'];K['node']['active']=!0x1,L&&this['_batch_method']==D['MANUAL_BATCH']&&K['syncBatchActive']&&K['syncBatchActive']();let M=this['_pool_map']['get'](J);M||(M=[],this['_pool_map']['set'](J,M)),M['indexOf'](K)>=0x0||M['push'](K);}['_pushAllToPool'](J=0x0){for(let K=J,L=this['_vo_list']['length'];K<L;++K){let M=this['_vo_list'][K],N=M['$item'];N&&(M['$item']=null,this['_pushPoolItem'](M['$type'],N));}}['enableBatch'](J=D['MANUAL_BATCH']){this['_batch_method']=J;}['_ensureBatchLayer'](J){if(this['_batch_method']!=D['MANUAL_BATCH'])return null;let K=this['_batch_layers'][J];if(K)return K;let L=this['getSVContent']();(K=new cc['Node']())['name']='$BatchLayer'+J,K['setAnchorPoint'](new cc['Vec2'](0x0,0x1)),K['setContentSize'](y['UIUtil']['getContentSize'](L)),K['setPosition'](0x0,0x0),K['parent']=L;let M=Array['from'](this['_batch_layers']['keys']())['sort']();for(let N=0x0,O=M['length'];N<O;++N){let P=M[N],Q=this['_batch_layers'][P];Q&&Q['setSiblingIndex'](N);}return K;}['_clearBatchLayers'](){for(let [J,K]of this['_batch_layers'])K['isValid']&&(K['removeFromParent'](!0x1),K['destroy']());this['_batch_layers']['clear']();}['moveToBatchLayer'](J,K){let L=this['_ensureBatchLayer'](K);L&&y['UIUtil']['safeChangeParent'](J,L);}};v([x([cc['Prefab']])],G['prototype'],'templatePrefabList',void 0x0),G=q=v([w],G),k['ScrollGridView']=G;class H{constructor(){this['col_num']=0x1,this['item_size']=new cc['Size'](0x0,0x0),this['item_size_func']=null,this['left_margin']=0x0,this['right_margin']=0x0,this['top_margin']=0x0,this['bottom_margin']=0x0,this['x_space']=0x0,this['y_space']=0x0,this['new_type_wrap']=!0x0,this['one_line_type']=-0x1;}['setParam'](J,K){switch(J){case A['COL_NUM']:'number'==typeof K&&this['setColNum'](K);break;case A['ITEM_SIZE']:K instanceof cc['Size']&&this['setItemSize'](K);break;case A['ITEM_SIZE_FUNC']:null!==K&&'function'!=typeof K||this['setItemSizeFunc'](K);break;case A['TOP_MARGIN']:'number'==typeof K&&(this['top_margin']=K);break;case A['BOTTOM_MARGIN']:'number'==typeof K&&(this['bottom_margin']=K);break;case A['LEFT_MARGIN']:'number'==typeof K&&(this['left_margin']=K);break;case A['RIGHT_MARGIN']:'number'==typeof K&&(this['right_margin']=K);break;case A['X_SPACE']:'number'==typeof K&&(this['x_space']=K);break;case A['Y_SPACE']:'number'==typeof K&&(this['y_space']=K);break;case A['NEW_TYPE_WRAP']:'boolean'==typeof K&&(this['new_type_wrap']=K);break;case A['ONE_LINE_TYPE']:'string'!=typeof K&&'number'!=typeof K||(this['one_line_type']=K);}return this;}['getParam'](J){switch(J){case A['COL_NUM']:return this['col_num'];case A['ITEM_SIZE']:return this['item_size']['clone']();case A['ITEM_SIZE_FUNC']:return this['item_size_func'];case A['TOP_MARGIN']:return this['top_margin'];case A['BOTTOM_MARGIN']:return this['bottom_margin'];case A['LEFT_MARGIN']:return this['left_margin'];case A['RIGHT_MARGIN']:return this['right_margin'];case A['X_SPACE']:return this['x_space'];case A['Y_SPACE']:return this['y_space'];case A['NEW_TYPE_WRAP']:return this['new_type_wrap'];case A['ONE_LINE_TYPE']:return this['one_line_type'];}return null;}['setColNum'](J){return this['col_num']=J,this;}['setItemSize'](J){return this['item_size']=J,this;}['setItemSizeFunc'](J){return this['item_size_func']=J,this;}['calcLayout'](J,K){if(J['length']<=0x0)return new cc['Size'](K);let L=this['left_margin'],M=-this['top_margin'],N=0x0,O=0x0,P=0x0;for(let R=0x0,S=J['length'];R<S;++R){let T=J[R],U=this['item_size_func']?this['item_size_func'](T['$data'],T['$type']):this['item_size'];T['$x']=L,T['$y']=M-U['height'],T['$w']=U['width'],T['$h']=U['height'],L+=T['$w'],O=Math['max'](T['$h'],O),P=Math['max'](L,P),N++,R==S-0x1?M-=O:!(this['col_num']<=0x0||N<this['col_num'])||this['new_type_wrap']&&T['$type']!=J[R+0x1]['$type']||T['$type']==this['one_line_type']?(L=this['left_margin'],M-=O+this['y_space'],N=0x0,O=0x0):L+=this['x_space'];}let Q=-M+this['bottom_margin'];return(P+=this['right_margin'])<K['width']&&(P=K['width']),Q<K['height']&&(Q=K['height']),new cc['Size'](P,Q);}}k['ScrollGridDefaultLayouter']=H;const I=b('./GF');cc['_RF']['pop']();},{'./GF':'GF','./UIUtil':'UIUtil'}],'ShakeLock':[function(a,b,c){'use strict';cc['_RF']['push'](b,'2c18d2/NMdH3KPBe3qcAIDq','ShakeLock');var d=this&&this['__decorate']||function(k,m,p,q){var u,v=arguments['length'],w=v<0x3?m:null===q?q=Object['getOwnPropertyDescriptor'](m,p):q;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])w=Reflect['decorate'](k,m,p,q);else for(var x=k['length']-0x1;x>=0x0;x--)(u=k[x])&&(w=(v<0x3?u(w):v>0x3?u(m,p,w):u(m,p))||w);return v>0x3&&w&&Object['defineProperty'](m,p,w),w;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['ShakeLock']=void 0x0;const f=a('../../../Core/BaseEntity'),{ccclass:g,property:h}=cc['_decorator'];let j=class extends f['BaseEntity']{constructor(){super(...arguments),this['leftLock']=null,this['rightLock']=null;}['onOpen'](){super['onOpen'](),this['playShake']();}['playShake'](){cc['tween'](this['leftLock']['node'])['to'](0.06,{'angle':0x1e})['to'](0.15,{'angle':-0x1e})['to'](0.15,{'angle':0x1e})['to'](0.15,{'angle':-0x1e})['to'](0.06,{'angle':0x0})['start'](),cc['tween'](this['rightLock']['node'])['to'](0.06,{'angle':0x1e})['to'](0.15,{'angle':-0x1e})['to'](0.15,{'angle':0x1e})['to'](0.15,{'angle':-0x1e})['to'](0.06,{'angle':0x0})['start'](),this['timer']['delayCallUI'](0.6,()=>{this['closeMe']();});}['onClose'](k){super['onClose'](k);}['onDestroy'](){super['onDestroy']();}};d([h(cc['Sprite'])],j['prototype'],'leftLock',void 0x0),d([h(cc['Sprite'])],j['prototype'],'rightLock',void 0x0),j=d([g],j),c['ShakeLock']=j,cc['_RF']['pop']();},{'../../../Core/BaseEntity':'BaseEntity'}],'SimpleStateMachine':[function(a,b,c){'use strict';cc['_RF']['push'](b,'665359ho/RBwbyDky5ce4r3','SimpleStateMachine'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['SimpleTreeStateMachine']=c['SimpleStateMachine']=c['SimpleStateObject']=c['NullStateName']=void 0x0;const d=a('./LogUtil');c['NullStateName']=-0x1;class f{constructor(g,h,j,k,l=null){this['stateName']=g,this['enterFunc']=h,this['leaveFunc']=j,this['updateFunc']=k,this['target']=l;}['getStateName'](){return this['stateName'];}['onEnterState'](g,h,j){var k;null===(k=this['enterFunc'])||void 0x0===k||k['call'](this['target'],g,h,j);}['onLeaveState'](g,h,j){var k;null===(k=this['leaveFunc'])||void 0x0===k||k['call'](this['target'],g,h,j);}['onUpdateState'](g,h){var j;null===(j=this['updateFunc'])||void 0x0===j||j['call'](this['target'],g,h);}}c['SimpleStateObject']=f,c['SimpleStateMachine']=class{constructor(){this['_is_debug']=!0x1,this['_state_map']=new Map(),this['_cur_name']=c['NullStateName'],this['_cur_state']=null;}['addState'](g){if(!g)return!0x1;let h=g['getStateName']();return h!=c['NullStateName']&&(this['_state_map']['has'](h)?(d['LogUtil']['err']('addState\x20already\x20exist!',h),!0x1):(this['_state_map']['set'](h,g),!0x0));}['addStateByHandler'](g,h,j,k,l=null){return this['addState'](new f(g,h,j,k,l));}['update'](g){this['_cur_state']&&this['_cur_state']['onUpdateState'](g,this['_cur_name']);}['changeToState'](g,h=null,j=!0x1){if(g!=c['NullStateName']&&!this['_state_map']['has'](g))return!0x1;if(!j&&g==this['_cur_name'])return!0x1;this['_is_debug']&&d['LogUtil']['info']('changeToState\x20===>',g);let k=this['_cur_name'];if(this['_cur_state'])try{let l=this['_cur_state'];this['_cur_state']=null,l['onLeaveState'](k,g,h);}catch(m){d['LogUtil']['err']('onLeaveState\x20exception:',m['stack']);}if(this['_cur_name']=g,this['_cur_state']=this['_state_map']['get'](g)||null,this['_cur_state'])try{this['_cur_state']['onEnterState'](k,g,h);}catch(p){d['LogUtil']['err']('onEnterState\x20exception:',p['stack']);}return!0x0;}['changeToNullState'](){return this['changeToState'](c['NullStateName']);}['getCurStateName'](){return this['_cur_name'];}['isState'](g){return this['_cur_name']==g;}['setDebug'](g){this['_is_debug']=g;}['clearAll'](){this['changeToNullState'](),this['_state_map']['clear'](),this['_cur_name']=c['NullStateName'],this['_cur_state']=null;}},c['SimpleTreeStateMachine']=class{constructor(){this['_is_debug']=!0x1,this['_state_map']=new Map(),this['_parent_map']=new Map(),this['_cur_names']=[],this['_cur_states']=[],this['_changeKey']=0x0;}['addState'](g){if(!g)return!0x1;let h=g['getStateName']();return h!=c['NullStateName']&&(this['_state_map']['has'](h)?(d['LogUtil']['err']('addState\x20already\x20exist!',h),!0x1):(this['_state_map']['set'](h,g),!0x0));}['addStateByHandler'](g,h,j,k,l=null){return this['addState'](new f(g,h,j,k,l));}['addSubState'](g,h){return g!=c['NullStateName']&&this['_state_map']['has'](g)&&g!=h['getStateName']()?!!this['addState'](h)&&(this['_parent_map']['set'](h['getStateName'](),g),!0x0):(d['LogUtil']['err']('addSubState\x20parent\x20not\x20exist!',g),!0x1);}['addSubStateByHandler'](g,h,j,k,l,m=null){return this['addSubState'](g,new f(h,j,k,l,m));}['update'](g){if(this['_cur_states']&&this['_cur_states']['length']>0x0){let h,j=this['_changeKey'],k=this['getCurStateName']();for(let l=this['_cur_states']['length']-0x1;l>=0x0&&((h=this['_cur_states'][l])&&h['onUpdateState'](g,k),this['_changeKey']==j);l--);}}['changeToState'](g,h=null,j=!0x1){if(g!=c['NullStateName']){if(!this['_state_map']['has'](g))return!0x1;for(let u of this['_parent_map']['values']())if(u==g)return d['LogUtil']['err']('changeToState\x20must\x20leaf\x20state!'),!0x1;}if(!j&&g==this['getCurStateName']())return!0x1;this['_changeKey']++,this['_is_debug']&&d['LogUtil']['info']('changeToState\x20===>',g);let k=[],m=[];this['_findToRootStates'](g,k,m);let p=m['length']-0x1,q=this['getCurStateName']();if(this['_cur_states']&&this['_cur_states']['length']>0x0)try{let v=this['_cur_states'];this['_cur_states']=[];for(let w=0x0,x=v['length'];w<x;++w){let y=v[w];if(m['indexOf'](y)>=0x0){p=m['indexOf'](y)-0x1;break;}y&&y['onLeaveState'](q,g,h);}}catch(z){d['LogUtil']['err']('onLeaveState\x20exception:',z['stack']);}if(this['_cur_names']=k,this['_cur_states']=m,m&&m['length']>0x0)try{for(let A=p;A>=0x0;--A){let B=m[A];B&&B['onEnterState'](q,g,h);}}catch(C){d['LogUtil']['err']('onEnterState\x20exception:',C['stack']);}return!0x0;}['_findToRootStates'](g,h,j){if(g==c['NullStateName'])return;let k=g,l=this['_state_map']['get'](k);for(;l;)h['push'](k),j['push'](l),l=(k=this['_parent_map']['get'](k))?this['_state_map']['get'](k):null;}['changeToNullState'](){return this['changeToState'](c['NullStateName']);}['getCurStateName'](){return this['_cur_names']['length']>0x0?this['_cur_names'][0x0]:c['NullStateName'];}['isState'](g){return this['_cur_names']['indexOf'](g)>=0x0;}['setDebug'](g){this['_is_debug']=g;}['clearAll'](){this['changeToNullState'](),this['_state_map']['clear'](),this['_parent_map']['clear'](),this['_cur_names']=[],this['_cur_states']=[];}},cc['_RF']['pop']();},{'./LogUtil':'LogUtil'}],'SoundManager':[function(a,b,c){'use strict';cc['_RF']['push'](b,'6bee43iiVJGH7W9170dxdWV','SoundManager'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['SoundManager']=void 0x0;const d=a('./GF'),{ccclass:f,property:g}=cc['_decorator'];c['SoundManager']=class extends cc['Component']{constructor(){super(...arguments),this['maxEffectSource']=0x4,this['_musicVolume']=0x1,this['_effectVolume']=0x1,this['_musicSwitch']=0x1,this['_effectSwitch']=0x1,this['_effectSources']=[],this['_musicLoadingId']=0x0,this['_effectLoadingSet']=new Set();}['getMusicSource'](){return this['_musicSource']||(this['_musicSource']=this['node']['addComponent'](cc['AudioSource']),this['_musicSource']['playOnLoad']=!0x1),this['_musicSource'];}['getFreeEffectSource'](){for(let h of this['_effectSources'])if(h&&!h['isPlaying'])return h;if(this['_effectSources']['length']<this['maxEffectSource']){let j=this['node']['addComponent'](cc['AudioSource']);return j['playOnLoad']=!0x1,this['_effectSources']['push'](j),j;}return null;}['getMusicVolume'](){return this['_musicVolume'];}['setMusicVolume'](h){this['_musicVolume']=h,this['_musicSource']&&this['_musicSource']['isValid']&&(this['_musicSource']['volume']=this['_musicVolume']*this['_musicSwitch']);}['getEffectVolume'](){return this['_effectVolume'];}['setEffectVolume'](h){this['_effectVolume']=h;for(let j of this['_effectSources'])j&&j['isValid']&&(j['volume']=this['_effectVolume']);}['getMusicSwitch'](){return this['_musicSwitch']>0x0;}['setMusicSwitch'](h){let j=h?0x1:0x0;this['_musicSwitch']!=j&&(this['_musicSwitch']=j,this['setMusicVolume'](this['_musicVolume']));}['getEffectSwitch'](){return this['_effectSwitch']>0x0;}['setEffectSwitch'](h){let j=h?0x1:0x0;this['_effectSwitch']!=j&&(this['_effectSwitch']=j,this['_effectSwitch']<=0x0&&this['stopAllEffects']());}['playMusic'](h,j=!0x0){h&&(this['stopMusic'](),this['_musicLoadingId']=d['GF']['res']['load'](h,cc['AudioClip'],null,(k,l)=>{if(this['_musicLoadingId']=0x0,!k&&l){let m=this['getMusicSource']();m['clip']=l,m['loop']=j,m['volume']=this['_musicVolume']*this['_musicSwitch'],m['setCurrentTime'](0x0),m['play']();}}));}['isMusicPlaying'](){return!(!this['_musicSource']||!this['_musicSource']['isValid'])&&this['_musicSource']['isPlaying'];}['pauseMusic'](){this['_musicSource']&&this['_musicSource']['isValid']&&this['_musicSource']['isPlaying']&&this['_musicSource']['pause']();}['resumeMusic'](){this['_musicSource']&&this['_musicSource']['isValid']&&this['_musicSource']['resume']();}['stopMusic'](){this['_musicSource']&&this['_musicSource']['isValid']&&this['_musicSource']['stop'](),this['_musicLoadingId']>0x0&&(d['GF']['res']['cancelRequest'](this['_musicLoadingId']),this['_musicLoadingId']=0x0);}['playEffect'](h,j=0x1){if(!h)return;if(!this['_effectSwitch']||this['_effectVolume']<=0x0)return;if(!this['getFreeEffectSource']())return;let k=d['GF']['res']['load'](h,cc['AudioClip'],null,(l,m)=>{if(this['_effectLoadingSet']['delete'](k),!l&&m&&this['_effectSwitch']&&this['_effectVolume']>0x0){let p=this['getFreeEffectSource']();p&&(p['clip']=m,p['loop']=!0x1,p['volume']=this['_effectVolume']*j,p['setCurrentTime'](0x0),p['play']());}});this['_effectLoadingSet']['add'](k);}['stopAllLoadingEffects'](){for(let h of this['_effectLoadingSet'])d['GF']['res']['cancelRequest'](h);this['_effectLoadingSet']['clear']();}['stopAllEffects'](){for(let h of this['_effectSources'])h&&h['isValid']&&h['stop']();this['stopAllLoadingEffects']();}['loadSetting'](){this['_musicVolume']=d['GF']['storage']['getNumberItem']('minigame_music_volume',0x1),this['_effectVolume']=d['GF']['storage']['getNumberItem']('minigame_effect_volume',0x1);}['saveSetting'](){d['GF']['storage']['setNumberItem']('minigame_music_volume',this['_musicVolume']),d['GF']['storage']['setNumberItem']('minigame_effect_volume',this['_effectVolume']);}['onDestroy'](){this['stopMusic'](),this['stopAllEffects'](),this['_musicSource']=null,this['_effectSources']['length']=0x0;}},cc['_RF']['pop']();},{'./GF':'GF'}],'StorageManager':[function(a,b,c){'use strict';cc['_RF']['push'](b,'c6564a1BgxDnb+jxwi4QGek','StorageManager');var d=this&&this['__decorate']||function(j,k,m,p){var q,u=arguments['length'],v=u<0x3?k:null===p?p=Object['getOwnPropertyDescriptor'](k,m):p;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])v=Reflect['decorate'](j,k,m,p);else for(var w=j['length']-0x1;w>=0x0;w--)(q=j[w])&&(v=(u<0x3?q(v):u>0x3?q(k,m,v):q(k,m))||v);return u>0x3&&v&&Object['defineProperty'](k,m,v),v;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['StorageManager']=void 0x0;const {ccclass:f,property:g}=cc['_decorator'];let h=class extends cc['Component']{constructor(){super(...arguments),this['_userKey']='';}['onLoad'](){this['setUserKey'](this['getItem']('mini.USER_KEY'));}['setItem'](j,k){try{return cc['sys']['localStorage']['setItem'](j,null!=k?k:''),!0x0;}catch(l){return!0x1;}}['getItem'](j){var k;return null!==(k=cc['sys']['localStorage']['getItem'](j))&&void 0x0!==k?k:'';}['setNumberItem'](j,k){return this['setItem'](j,k['toString']());}['getNumberItem'](j,k=0x0){let l=Number['parseFloat'](this['getItem'](j));return Number['isNaN'](l)?k:l;}['setObjectItem'](j,k){return this['setItem'](j,JSON['stringify'](k));}['getObjectItem'](j){try{return JSON['parse'](this['getItem'](j));}catch(k){return null;}}['setSecretItem'](j,k){try{let l=JSON['stringify'](k);return l=Array['from'](l)['map'](m=>String['fromCharCode'](m['charCodeAt'](0x0)+0x7))['join'](''),this['setItem'](j,l);}catch(m){return!0x1;}}['getSecretItem'](j){try{let k=this['getItem'](j);return k=Array['from'](k)['map'](l=>String['fromCharCode'](l['charCodeAt'](0x0)-0x7))['join'](''),JSON['parse'](k);}catch(l){return null;}}['setUserKey'](j){this['_userKey']=null!=j?j:'',this['setItem']('mini.USER_KEY',this['_userKey']);}['getUserItemKey'](j){return this['_userKey']+'__'+j;}['setUserItem'](j,k){return this['setItem'](this['getUserItemKey'](j),k);}['getUserItem'](j){return this['getItem'](this['getUserItemKey'](j));}['setUserNumberItem'](j,k){return this['setNumberItem'](this['getUserItemKey'](j),k);}['getUserNumberItem'](j,k=0x0){return this['getNumberItem'](this['getUserItemKey'](j),k);}['setUserObjectItem'](j,k){return this['setObjectItem'](this['getUserItemKey'](j),k);}['getUserObjectItem'](j){return this['getObjectItem'](this['getUserItemKey'](j));}['setUserSecretItem'](j,k){return this['setSecretItem'](this['getUserItemKey'](j),k);}['getUserSecretItem'](j){return this['getSecretItem'](this['getUserItemKey'](j));}['onDestroy'](){}};h=d([f],h),c['StorageManager']=h,cc['_RF']['pop']();},{}],'TabCtrl':[function(a,b,c){'use strict';cc['_RF']['push'](b,'18643SRaLxCs4a5x16hP5q0','TabCtrl');var d=this&&this['__decorate']||function(k,m,p,q){var u,v=arguments['length'],w=v<0x3?m:null===q?q=Object['getOwnPropertyDescriptor'](m,p):q;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])w=Reflect['decorate'](k,m,p,q);else for(var x=k['length']-0x1;x>=0x0;x--)(u=k[x])&&(w=(v<0x3?u(w):v>0x3?u(m,p,w):u(m,p))||w);return v>0x3&&w&&Object['defineProperty'](m,p,w),w;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['TabCtrl']=void 0x0;const {ccclass:f,property:g}=cc['_decorator'];let h=class extends cc['Component']{constructor(){super(...arguments),this['tab_list']=[],this['tab_index']=-0x1,this['_isCanSelectFunc']=null,this['_unselectFunc']=null,this['_selectCompleteFunc']=null;}['onLoad'](){let k=this['tab_list'];this['tab_list']=[],this['initTabByList'](k);}['initTabByList'](k){this['clearTabList'](),this['tab_list']=[...k];for(let m of k)m['node']['on']('click',this['onTabBtnClick'],this);}['clearTabList'](){var k;for(let m of this['tab_list'])(null===(k=null==m?void 0x0:m['node'])||void 0x0===k?void 0x0:k['isValid'])&&m['node']['off']('click',this['onTabBtnClick'],this);this['tab_list']=[];}['onTabBtnClick'](k){let m=this['tab_list']['indexOf'](k);m<0x0||this['_isCanSelectFunc']&&!this['_isCanSelectFunc'](m)||this['changeSwitch'](m);}['changeSwitch'](k){if(0x0==this['tab_list']['length'])return;let m=this['tab_index'];if(m==k)return;if(k<0x0)return;if(k>=this['tab_list']['length']&&(k=this['tab_list']['length']-0x1),m>=0x0){let q=this['tab_list'][m];q&&(q['interactable']=!0x0,j['UIUtil']['buttonUpdateState'](q)),this['_unselectFunc']&&this['_unselectFunc'](m);}this['tab_index']=k;let p=this['tab_list'][k];p&&(p['interactable']=!0x1,j['UIUtil']['buttonUpdateState'](p)),this['_selectCompleteFunc']&&this['_selectCompleteFunc'](k);}['getIndex'](){return this['tab_index'];}['getTabList'](){return this['tab_list'];}['getTab'](k){return this['tab_list'][k];}['onDestroy'](){this['clearTabList'](),this['tab_list']=[],this['tab_index']=-0x1,this['_isCanSelectFunc']=null,this['_selectCompleteFunc']=null;}};d([g([cc['Button']])],h['prototype'],'tab_list',void 0x0),h=d([f],h),c['TabCtrl']=h;const j=a('./UIUtil');cc['_RF']['pop']();},{'./UIUtil':'UIUtil'}],'TestItem':[function(b,d,f){'use strict';cc['_RF']['push'](d,'767ebV9OkhGyZjYrAIqf/+h','TestItem');var g,j=this&&this['__decorate']||function(w,x,y,z){var A,B=arguments['length'],C=B<0x3?x:null===z?z=Object['getOwnPropertyDescriptor'](x,y):z;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])C=Reflect['decorate'](w,x,y,z);else for(var D=w['length']-0x1;D>=0x0;D--)(A=w[D])&&(C=(B<0x3?A(C):B>0x3?A(x,y,C):A(x,y))||C);return B>0x3&&C&&Object['defineProperty'](x,y,C),C;};Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['TestItem']=void 0x0;const k=b('./BaseUIItem'),m=b('./EntityWrap'),p=b('./GF'),{ccclass:q,property:u}=cc['_decorator'];let v=g=class extends k['BaseUIItem']{static['create'](w,x=null,y){return p['GF']['entity']['open'](g,'/Res/UI/Test/TestItem',w,x,y);}static['createWrap'](w){return m['EntityWrap']['create'](g,'/Res/UI/Test/TestItem',w,m['EntityWrap']['Item']);}};v=g=j([q],v),f['TestItem']=v,cc['_RF']['pop']();},{'./BaseUIItem':'BaseUIItem','./EntityWrap':'EntityWrap','./GF':'GF'}],'TestPanel':[function(b,d,f){'use strict';cc['_RF']['push'](d,'a3f9fyPhHpMsIG+aSIRxtz6','TestPanel');var g,j=this&&this['__decorate']||function(w,x,y,z){var A,B=arguments['length'],C=B<0x3?x:null===z?z=Object['getOwnPropertyDescriptor'](x,y):z;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])C=Reflect['decorate'](w,x,y,z);else for(var D=w['length']-0x1;D>=0x0;D--)(A=w[D])&&(C=(B<0x3?A(C):B>0x3?A(x,y,C):A(x,y))||C);return B>0x3&&C&&Object['defineProperty'](x,y,C),C;};Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['TestPanel']=void 0x0;const k=b('./BaseUIPanel'),m=b('./EntityWrap'),p=b('./GF'),{ccclass:q,property:u}=cc['_decorator'];let v=g=class extends k['BaseUIPanel']{static['create'](w,x=null,y){return p['GF']['entity']['open'](g,'/Res/UI/Test/TestPanel',w,x,y);}static['createWrap'](w){return m['EntityWrap']['create'](g,'/Res/UI/Test/TestPanel',w,m['EntityWrap']['Panel']);}};v=g=j([q],v),f['TestPanel']=v,cc['_RF']['pop']();},{'./BaseUIPanel':'BaseUIPanel','./EntityWrap':'EntityWrap','./GF':'GF'}],'TestView':[function(b,d,f){'use strict';cc['_RF']['push'](d,'44aabfOcwVI5JyqhqtGhjaB','TestView');var g,j=this&&this['__decorate']||function(w,x,y,z){var A,B=arguments['length'],C=B<0x3?x:null===z?z=Object['getOwnPropertyDescriptor'](x,y):z;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])C=Reflect['decorate'](w,x,y,z);else for(var D=w['length']-0x1;D>=0x0;D--)(A=w[D])&&(C=(B<0x3?A(C):B>0x3?A(x,y,C):A(x,y))||C);return B>0x3&&C&&Object['defineProperty'](x,y,C),C;};Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['TestView']=void 0x0;const k=b('./BaseUIView'),m=b('./EntityWrap'),p=b('./GF'),{ccclass:q,property:u}=cc['_decorator'];let v=g=class extends k['BaseUIView']{static['create'](w=null,x){let y=p['GF']['ui']['panelLayer'];return p['GF']['entity']['open'](g,'/Res/UI/Test/TestView',y,w,x);}static['createWrap'](){let w=p['GF']['ui']['panelLayer'];return m['EntityWrap']['create'](g,'/Res/UI/Test/TestView',w,m['EntityWrap']['View']);}};v=g=j([q],v),f['TestView']=v,cc['_RF']['pop']();},{'./BaseUIView':'BaseUIView','./EntityWrap':'EntityWrap','./GF':'GF'}],'TimeUtil':[function(a,b,c){'use strict';cc['_RF']['push'](b,'872f5gXih5EIqaK2Bl21JtL','TimeUtil'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['TimeUtil']=void 0x0;class d{static['time'](){return Math['floor'](Date['now']()/0x3e8);}static['floatTime'](){return Date['now']()/0x3e8;}static['mstime'](){return Date['now']();}static['getTimeZone'](){return Math['floor'](-new Date()['getTimezoneOffset']()/0x3c);}static['isLeadYear'](f){return f%0x190==0x0||f%0x4==0x0&&f%0x64!=0x0;}static['getWeekDay'](f){let g=null!=f?f:d['time'](),h=new Date(0x3e8*g)['getDay']();return 0x0==h?0x7:h;}static['getDaySeconds'](f){let g=null!=f?f:d['time'](),h=new Date(0x3e8*g);return 0xe10*h['getHours']()+0x3c*h['getMinutes']()+h['getSeconds']();}static['getDayLeftSeconds'](f){return 0x15180-d['getDaySeconds'](f);}static['getDayTimestamp'](f){let g=null!=f?f:d['time'](),h=new Date(0x3e8*g);return h['setHours'](0x0),h['setMinutes'](0x0),h['setSeconds'](0x0),Math['floor'](h['getTime']()/0x3e8);}static['getMidnightTimestamp'](f=0x0,g=0x0,h=0x0,j){let k=null!=j?j:d['time'](),l=new Date(0x3e8*k);return l['setHours'](f),l['setMinutes'](g),l['setSeconds'](h),Math['floor'](l['getTime']()/0x3e8);}static['nextWeekTime'](f){let g=d['getDayTimestamp'](f),h=new Date(0x3e8*g);return 0x0==h['getDay']()?g+0x15180:g+0x15180*(0x7-h['getDay']()+0x1);}static['isSameDay'](f,g){let h=new Date(0x3e8*f),j=new Date(0x3e8*g);return h['getFullYear']()==j['getFullYear']()&&h['getMonth']()==j['getMonth']()&&h['getDate']()==j['getDate']();}static['parseTime'](f,g=0x0){let h=Date['parse'](f);return Number['isNaN'](h)?g:Math['floor'](h/0x3e8);}}c['TimeUtil']=d,cc['_RF']['pop']();},{}],'TimerManager':[function(b,f,g){'use strict';cc['_RF']['push'](f,'241b6cSb3lPf5EEHBFpaz25','TimerManager');var j,k=this&&this['__decorate']||function(A,B,C,D){var E,F=arguments['length'],G=F<0x3?B:null===D?D=Object['getOwnPropertyDescriptor'](B,C):D;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])G=Reflect['decorate'](A,B,C,D);else for(var H=A['length']-0x1;H>=0x0;H--)(E=A[H])&&(G=(F<0x3?E(G):F>0x3?E(B,C,G):E(B,C))||G);return F>0x3&&G&&Object['defineProperty'](B,C,G),G;},m=this&&this['__awaiter']||function(A,B,C,D){return new(C||(C=Promise))(function(E,F){function G(J){try{I(D['next'](J));}catch(K){F(K);}}function H(J){try{I(D['throw'](J));}catch(K){F(K);}}function I(J){var K;J['done']?E(J['value']):(K=J['value'],K instanceof C?K:new C(function(L){L(K);}))['then'](G,H);}I((D=D['apply'](A,B||[]))['next']());});};Object['defineProperty'](g,'__esModule',{'value':!0x0}),g['TimerManager']=g['TimerType']=void 0x0;const p=b('./LogUtil'),q=b('./GameRoot'),{ccclass:v,property:w}=cc['_decorator'];var x;(function(A){A[A['DEFAULT']=0x0]='DEFAULT',A[A['SCALE']=0x0]='SCALE',A[A['UNSCALE']=0x1]='UNSCALE',A[A['REAL']=0x2]='REAL';}(x=g['TimerType']||(g['TimerType']={})));class y{constructor(){this['type']=x['DEFAULT'],this['interval']=0x0,this['maxCount']=-0x1,this['target']=null,this['callparam']=null,this['passTime']=0x0,this['callCount']=0x0;}}let z=j=class extends cc['Component']{constructor(){super(...arguments),this['_timerList']=[],this['_lastRealTime']=0x0;}static['newTimerId'](){return j['_autoId']=j['_autoId']+0x1,'@timer_'+j['_autoId'];}['isValidTimer'](A){return!!A&&this['_timerList']['findIndex'](B=>B&&B['id']==A)>=0x0;}['startTimer'](A,B,C=null,D=null){var E,F,G,H;null!=A||(A={});let I=A['id']||j['newTimerId']();this['stopTimer'](I);let J=new y();return J['id']=I,J['type']=null!==(E=A['type'])&&void 0x0!==E?E:A['_unscale']?x['UNSCALE']:x['DEFAULT'],J['interval']=null!==(F=A['interval'])&&void 0x0!==F?F:0x0,J['maxCount']=null!==(G=A['maxCount'])&&void 0x0!==G?G:-0x1,J['callback']=B,J['target']=C,J['callparam']=D,J['passTime']=J['interval']-(null!==(H=A['firstInterval'])&&void 0x0!==H?H:J['interval']),J['callCount']=0x0,this['_timerList']['push'](J),I;}['delayCall'](A,B,C=null,D=null){return null!=D||(D={}),D['interval']=A,D['firstInterval']=A,D['maxCount']=0x1,this['startTimer'](D,B,C);}['repeatCall'](A,B,C,D=null,E=null){return null!=E||(E={}),E['interval']=B,E['maxCount']=A,this['startTimer'](E,C,D);}['delayCallUI'](A,B,C=null,D=null){return null!=D||(D={}),D['type']=x['UNSCALE'],this['delayCall'](A,B,C,D);}['repeatCallUI'](A,B,C,D=null,E=null){return null!=E||(E={}),E['type']=x['UNSCALE'],this['repeatCall'](A,B,C,D,E);}['delayCallReal'](A,B,C=null,D=null){return null!=D||(D={}),D['type']=x['REAL'],this['delayCall'](A,B,C,D);}['repeatCallReal'](A,B,C,D=null,E=null){return null!=E||(E={}),E['type']=x['REAL'],this['repeatCall'](A,B,C,D,E);}['nextFrameCall'](A,B=null){return this['delayCall'](0.00001,A,B,{'type':x['UNSCALE']});}['startCD'](A,B,C=null){return!this['isValidTimer'](A)&&(this['delayCallUI'](B,null,C,{'id':A}),!0x0);}['stopTimer'](A){if(!A)return!0x1;let B=this['_timerList']['findIndex'](C=>C&&C['id']==A);return B>=0x0&&(this['_timerList'][B]=null,!0x0);}['stopAllForTarget'](A){if(A)for(let B=0x0,C=this['_timerList']['length'];B<C;B++){let D=this['_timerList'][B];D&&D['target']==A&&(this['_timerList'][B]=null);}}['stopAll'](){for(let A=0x0,B=this['_timerList']['length'];A<B;A++)this['_timerList'][A]=null;}['waitForSeconds'](A){return m(this,void 0x0,void 0x0,function*(){return new Promise(B=>{this['delayCall'](A,()=>{B();});});});}['start'](){this['_lastRealTime']=performance['now']()/0x3e8;}['update'](A){let B=A*q['GameRoot']['timeScale'],C=performance['now']()/0x3e8,D=C-this['_lastRealTime'];this['_lastRealTime']=C;let E=0x0;for(let F=0x0,G=this['_timerList']['length'];F<G;F++){let H=this['_timerList'][F];if(H){if(H['type']==x['SCALE']?H['passTime']+=B:H['type']==x['UNSCALE']?H['passTime']+=A:H['passTime']+=D,H['passTime']>=H['interval']){H['passTime']-=H['interval'],H['callCount']++;try{!H['callback']||H['target']instanceof cc['Object']&&!cc['isValid'](H['target'],!0x0)||(H['target']?H['callback']['call'](H['target'],H['callCount'],H['maxCount'],H['callparam']):H['callback'](H['callCount'],H['maxCount'],H['callparam']));}catch(I){p['LogUtil']['err']('timer\x20callback\x20exception:',I['stack']);}H['maxCount']>0x0&&H['callCount']>=H['maxCount']&&(this['_timerList'][F]=null,E++);}}else E++;}if(E>0x5)for(let J=this['_timerList']['length']-0x1;J>=0x0;J--)this['_timerList'][J]||this['_timerList']['splice'](J,0x1);}['clearAll'](){this['stopAll'](),this['_timerList']['length']=0x0;}['onDestroy'](){this['clearAll']();}};z['_autoId']=0x0,z=j=k([v],z),g['TimerManager']=z,cc['_RF']['pop']();},{'./GameRoot':'GameRoot','./LogUtil':'LogUtil'}],'ToastView':[function(b,d,f){'use strict';cc['_RF']['push'](d,'f9956jvFQ5LFLckgfHy2RKq','ToastView');var g,j=this&&this['__decorate']||function(y,z,A,B){var C,D=arguments['length'],E=D<0x3?z:null===B?B=Object['getOwnPropertyDescriptor'](z,A):B;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])E=Reflect['decorate'](y,z,A,B);else for(var F=y['length']-0x1;F>=0x0;F--)(C=y[F])&&(E=(D<0x3?C(E):D>0x3?C(z,A,E):C(z,A))||E);return D>0x3&&E&&Object['defineProperty'](z,A,E),E;};Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['ToastView']=void 0x0;const k=b('../../../Core/BaseUIView'),{ccclass:m,property:p}=cc['_decorator'];let q=g=class extends k['BaseUIView']{constructor(){super(...arguments),this['templateNode']=null,this['toastCd']=0x0,this['showingToastItem']=[],this['poolToastItem']=[];}static['create'](y=null,z){let A=w['PathUtil']['getUIViewPath']('Common/ToastView'),B=v['GF']['ui']['topLayer'];return v['GF']['entity']['open'](g,A,B,y,z);}['getViewParam'](){return{};}['onInit'](){super['onInit'](),this['templateNode']['active']=!0x1,this['origPos']=this['templateNode']['position'];}['onOpen'](){super['onOpen']();}['onToastReq'](){this['showingToastItem']['length']>0x0||(this['toastCd']=0x0);}['showNextToast'](){let y=x['CommonCtrl']['instance']['popToast']();if(!y)return;let z=this['poolToastItem']['shift']()||cc['instantiate'](this['templateNode']);z['parent']=this['templateNode']['parent'],z['active']=!0x0,z['opacity']=0xff,z['position']=this['origPos'];let A=z['getChildByName']('text');if(A){let B=A['getComponent'](cc['RichText']);B&&(B['string']=y['msg']);}this['showingToastItem']['push'](z),cc['tween'](z)['by'](0.15,{'position':new cc['Vec3'](0x0,0xc8-0x32*this['showingToastItem']['length'],0x0)},{'easing':'circOut'})['delay'](0.4)['to'](0.5,{'opacity':0x0})['call'](()=>{z['active']=!0x1;let C=this['showingToastItem']['indexOf'](z);C>=0x0&&this['showingToastItem']['splice'](C,0x1),this['poolToastItem']['push'](z);})['start']();}['update'](y){this['toastCd']-=y,this['toastCd']<=0x0&&(this['toastCd']=0.3,this['showNextToast']());}['onClose'](y){super['onClose'](y);}};j([p(cc['Node'])],q['prototype'],'templateNode',void 0x0),q=g=j([m],q),f['ToastView']=q;const v=b('../../../Core/GF'),w=b('../../Util/PathUtil'),x=b('../CommonCtrl');cc['_RF']['pop']();},{'../../../Core/BaseUIView':'BaseUIView','../../../Core/GF':'GF','../../Util/PathUtil':'PathUtil','../CommonCtrl':'CommonCtrl'}],'UIClick':[function(a,b,c){'use strict';cc['_RF']['push'](b,'524483d+hZEGasnJcqoWiNP','UIClick');var d=this&&this['__decorate']||function(k,m,p,q){var u,v=arguments['length'],w=v<0x3?m:null===q?q=Object['getOwnPropertyDescriptor'](m,p):q;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])w=Reflect['decorate'](k,m,p,q);else for(var x=k['length']-0x1;x>=0x0;x--)(u=k[x])&&(w=(v<0x3?u(w):v>0x3?u(m,p,w):u(m,p))||w);return v>0x3&&w&&Object['defineProperty'](m,p,w),w;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['UIClick']=void 0x0;const f=a('./UITouch'),{ccclass:g,property:h}=cc['_decorator'];let j=class extends f['UITouch']{constructor(){super(...arguments),this['_clickCallback']=null,this['_clickCbTarget']=null;}['onDestroy'](){this['unsetClickListener'](),super['onDestroy']();}['_onTouchEnded'](k){if(!k)return;if(super['_onTouchEnded'](k),!this['_is_touch_enabled'])return;let m=!0x0;k&&(m=cc['Vec2']['distance'](k['getLocation'](),k['getStartLocation']())<0x14),m&&this['_clickCallback']&&this['_clickCallback']['call'](this['_clickCbTarget'],this);}['setClickListener'](k,m=null){this['_clickCallback']=k,this['_clickCbTarget']=m;}['unsetClickListener'](){this['_clickCallback']=null,this['_clickCbTarget']=null;}};j=d([g],j),c['UIClick']=j,cc['_RF']['pop']();},{'./UITouch':'UITouch'}],'UIManager':[function(b,d,f){'use strict';cc['_RF']['push'](d,'8eda1V6p7JErpKI/VdYAUaP','UIManager');var g=this&&this['__decorate']||function(w,x,y,z){var A,B=arguments['length'],C=B<0x3?x:null===z?z=Object['getOwnPropertyDescriptor'](x,y):z;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])C=Reflect['decorate'](w,x,y,z);else for(var D=w['length']-0x1;D>=0x0;D--)(A=w[D])&&(C=(B<0x3?A(C):B>0x3?A(x,y,C):A(x,y))||C);return B>0x3&&C&&Object['defineProperty'](x,y,C),C;};Object['defineProperty'](f,'__esModule',{'value':!0x0}),f['UIManager']=f['UILayerID']=void 0x0;const {ccclass:j,property:k}=cc['_decorator'];var m;(function(w){w['BACKGROUND']='@background',w['MAIN']='@main',w['FIGHT']='@fight',w['PANEL']='@panel',w['TIPDOWN']='@tipDown',w['GUIDE']='@guide',w['TIPUP']='@tipUp',w['TOP']='@top',w['LOCK']='@lock',w['DEBUG']='@debug';}(m=f['UILayerID']||(f['UILayerID']={})));let p=class extends cc['Component']{constructor(){super(...arguments),this['_isInited']=!0x1,this['viewMap']=new Map();}['onLoad'](){this['initUILayers'](),cc['director']['on'](cc['Director']['EVENT_AFTER_SCENE_LAUNCH'],this['onSceneLaunch'],this);}['initUILayers'](){if(this['_isInited'])return;if(!this['uiRoot'])if(!u['GameRoot']['instance']['node']['parent']||u['GameRoot']['instance']['node']['parent']instanceof cc['Scene']||!v['CCUtil']['getComponentInAncestor'](u['GameRoot']['instance']['node']['parent'],cc['Canvas'])){let x=cc['director']['getScene']()['children'];for(let y=x['length']-0x1;y>=0x0;y--){let z=x[y];if(z['getComponent'](cc['Canvas'])){this['uiRoot']=z;break;}}}else this['uiRoot']=u['GameRoot']['instance']['node'],q['UIUtil']['fillParent'](u['GameRoot']['instance']['node']);if(!this['uiRoot'])return;let w=0x0;this['_backgroundLayer']=this['_addLayer'](m['BACKGROUND'],w++),this['_mainLayer']=this['_addLayer'](m['MAIN'],w++),this['_fightLayer']=this['_addLayer'](m['FIGHT'],w++),this['_panelLayer']=this['_addLayer'](m['PANEL'],w++),this['_tipDownLayer']=this['_addLayer'](m['TIPDOWN'],w++),this['_guideLayer']=this['_addLayer'](m['GUIDE'],w++),this['_tipUpLayer']=this['_addLayer'](m['TIPUP'],w++),this['_topLayer']=this['_addLayer'](m['TOP'],w++),this['_lockLayer']=this['_addLayer'](m['LOCK'],w++),this['_debugLayer']=this['_addLayer'](m['DEBUG'],w++),this['_isInited']=!0x0;}['_addLayer'](w,x){let y=new cc['Node']();return y['group']=this['uiRoot']['group'],y['name']=w,this['uiRoot']['addChild'](y),q['UIUtil']['fillParent'](y),y;}get['backgroundLayer'](){return this['_backgroundLayer'];}get['mainLayer'](){return this['_mainLayer'];}get['fightLayer'](){return this['_fightLayer'];}get['panelLayer'](){return this['_panelLayer'];}get['tipDownLayer'](){return this['_tipDownLayer'];}get['guideLayer'](){return this['_guideLayer'];}get['tipUpLayer'](){return this['_tipUpLayer'];}get['topLayer'](){return this['_topLayer'];}get['lockLayer'](){return this['_lockLayer'];}get['debugLayer'](){return this['_debugLayer'];}['onSceneLaunch'](){this['uiRoot']&&!this['uiRoot']['isValid']&&(this['uiRoot']=null,this['_isInited']=!0x1,this['initUILayers']());}['_destroyLayer'](w){w&&w['isValid']&&(w['removeFromParent'](),w['destroy']());}['_destroyAllLayers'](){this['_destroyLayer'](this['_backgroundLayer']),this['_destroyLayer'](this['_mainLayer']),this['_destroyLayer'](this['_fightLayer']),this['_destroyLayer'](this['_panelLayer']),this['_destroyLayer'](this['_tipDownLayer']),this['_destroyLayer'](this['_guideLayer']),this['_destroyLayer'](this['_tipUpLayer']),this['_destroyLayer'](this['_topLayer']),this['_destroyLayer'](this['_lockLayer']),this['_destroyLayer'](this['_debugLayer']);}['onUIViewOpen'](w){let x=w['node']['parent'];if(x){let y=this['viewMap']['get'](x);y||(y=[],this['viewMap']['set'](x,y)),y['indexOf'](w)<0x0&&y['push'](w);}}['onUIViewClose'](w){let x=w['node']['parent'];if(x){let y=this['viewMap']['get'](x);if(y){let z=y['indexOf'](w);z>=0x0&&y['splice'](z,0x1);}}}['travelViews'](w,x,y){let z=0x0,A=0x10000;if(x){let B=this['uiRoot']['getChildByName'](x);B&&(z=B['getSiblingIndex']());}if(y){let C=this['uiRoot']['getChildByName'](y);C&&(A=C['getSiblingIndex']());}for(let [D,E]of this['viewMap']){let F=D['getSiblingIndex']();if(z<=F&&F<=A)for(let G of E)if(!w(G))return;}}['onDestroy'](){cc['director']['off'](cc['Director']['EVENT_AFTER_SCENE_LAUNCH'],this['onSceneLaunch'],this),this['_destroyAllLayers']();}};p=g([j],p),f['UIManager']=p;const q=b('./UIUtil'),u=b('./GameRoot'),v=b('./CCUtil');cc['_RF']['pop']();},{'./CCUtil':'CCUtil','./GameRoot':'GameRoot','./UIUtil':'UIUtil'}],'UITouch':[function(a,b,c){'use strict';cc['_RF']['push'](b,'7a727/mV35PfYTJRHSDtafB','UITouch');var d=this&&this['__decorate']||function(j,k,m,p){var q,u=arguments['length'],v=u<0x3?k:null===p?p=Object['getOwnPropertyDescriptor'](k,m):p;if('object'==typeof Reflect&&'function'==typeof Reflect['decorate'])v=Reflect['decorate'](j,k,m,p);else for(var w=j['length']-0x1;w>=0x0;w--)(q=j[w])&&(v=(u<0x3?q(v):u>0x3?q(k,m,v):q(k,m))||v);return u>0x3&&v&&Object['defineProperty'](k,m,v),v;};Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['UITouch']=void 0x0;const {ccclass:f,property:g}=cc['_decorator'];let h=class extends cc['Component']{constructor(){super(...arguments),this['_is_touch_enabled']=!0x0,this['_is_swallow_touch']=!0x0,this['_isListening']=!0x1,this['_beganCallback']=null,this['_moveCallback']=null,this['_endCallback']=null,this['_cancelCallback']=null,this['_callbackTarget']=null;}['onEnable'](){this['_is_touch_enabled']&&this['enabledInHierarchy']&&this['_registerNodeEvent']();}['onDisable'](){this['_unregisterNodeEvent']();}['onDestroy'](){this['unsetUITouchCallback']();}['_registerNodeEvent'](){this['_isListening']||(this['_isListening']=!0x0,this['node']['on'](cc['Node']['EventType']['TOUCH_START'],this['_onTouchBegan'],this),this['node']['on'](cc['Node']['EventType']['TOUCH_MOVE'],this['_onTouchMove'],this),this['node']['on'](cc['Node']['EventType']['TOUCH_END'],this['_onTouchEnded'],this),this['node']['on'](cc['Node']['EventType']['TOUCH_CANCEL'],this['_onTouchCancel'],this));}['_unregisterNodeEvent'](){this['_isListening']&&(this['_isListening']=!0x1,this['node']['off'](cc['Node']['EventType']['TOUCH_START'],this['_onTouchBegan'],this),this['node']['off'](cc['Node']['EventType']['TOUCH_MOVE'],this['_onTouchMove'],this),this['node']['off'](cc['Node']['EventType']['TOUCH_END'],this['_onTouchEnded'],this),this['node']['off'](cc['Node']['EventType']['TOUCH_CANCEL'],this['_onTouchCancel'],this));}['_onTouchBegan'](j){j&&this['_is_touch_enabled']&&(this['stopPropagation'](j),this['_beganCallback']&&this['_beganCallback']['call'](this['_callbackTarget'],j));}['_onTouchMove'](j){j&&this['_is_touch_enabled']&&(this['stopPropagation'](j),this['_moveCallback']&&this['_moveCallback']['call'](this['_callbackTarget'],j));}['_onTouchEnded'](j){j&&this['_is_touch_enabled']&&(this['stopPropagation'](j),this['_endCallback']&&this['_endCallback']['call'](this['_callbackTarget'],j));}['_onTouchCancel'](j){j&&this['_is_touch_enabled']&&(this['stopPropagation'](j),this['_cancelCallback']&&this['_cancelCallback']['call'](this['_callbackTarget'],j));}['stopPropagation'](j){this['_is_swallow_touch']&&j['stopPropagation']();}['setTouchEnabled'](j){this['_is_touch_enabled']!=j&&(this['_is_touch_enabled']=j,this['_is_touch_enabled']?this['enabledInHierarchy']&&this['_registerNodeEvent']():this['_unregisterNodeEvent']());}['setSwallowTouches'](j){this['_is_swallow_touch']=j;}['setUITouchCallback'](j,k,l,m,p=null){this['_beganCallback']=j,this['_moveCallback']=k,this['_endCallback']=l,this['_cancelCallback']=m,this['_callbackTarget']=p;}['unsetUITouchCallback'](){this['_beganCallback']=null,this['_moveCallback']=null,this['_endCallback']=null,this['_cancelCallback']=null,this['_callbackTarget']=null;}};h=d([f],h),c['UITouch']=h,cc['_RF']['pop']();},{}],'UIUtil':[function(a,b,c){'use strict';cc['_RF']['push'](b,'16641VW8IJF/a+0oAq9B6LZ','UIUtil'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['UIUtil']=void 0x0;const {ccclass:d,property:f}=cc['_decorator'];class g{static['getContentSize'](h){return h?h instanceof cc['Component']?h['node']['getContentSize']():h['getContentSize']():cc['Size']['ZERO'];}static['setContentSize'](h,j){h&&(h instanceof cc['Component']?h['node']['setContentSize'](j):h['setContentSize'](j));}static['getAnchorPoint'](h){return h?h instanceof cc['Component']?h['node']['getAnchorPoint']():h['getAnchorPoint']():cc['Vec2']['ZERO'];}static['setAnchorPoint'](h,j){h&&j&&(h instanceof cc['Component']?h['node']['setAnchorPoint'](j):h['setAnchorPoint'](j));}static['getPosForTargetAnchor'](h,j,k,l){let m=h['getContentSize']();return null!=j||(j=h['getAnchorPoint']()),null!=l||(l=h['getAnchorPoint']()),new cc['Vec2'](k['x']+(j['x']-l['x'])*m['width'],k['y']+(j['y']-l['y'])*m['height']);}static['setRelativePosition'](j,k,m,p=cc['Vec2']['ZERO'],q=null){if(!(q=null!=q?q:j['parent']))return;let u=j['getAnchorPoint'](),v=j['getContentSize'](),w=q['getAnchorPoint'](),x=q['getContentSize'](),y=-x['width']*w['x']+x['width']*p['x']+m['x']-v['width']*k['x']+v['width']*u['x'],z=-x['height']*w['y']+x['height']*p['y']+m['y']-v['height']*k['y']+v['height']*u['y'];j['setPosition'](y,z);}static['putInsideParentCorner'](h,j=cc['Vec2']['ZERO'],k=null){g['setRelativePosition'](h,j,cc['Vec2']['ZERO'],j,k);}static['safeChangeAnchor'](h,j,k=!0x0,l=!0x0){let m=h['getAnchorPoint']()['clone']();h['setAnchorPoint'](j);let p=h['getContentSize']();if(k){let q=h['position'],u=q['x']+p['width']*(j['x']-m['x']),v=q['y']+p['height']*(j['y']-m['y']);h['setPosition'](u,v);}if(l){let w=p['width']*(m['x']-j['x']),x=p['height']*(m['y']-j['y']);for(let y of h['children']){let z=y['getPosition']();y['setPosition'](z['x']+w,z['y']+x);}}}static['safeChangeContentSize'](h,j,k=null,m=new cc['Vec2'](0x0,0x0)){let p=h['getAnchorPoint']()['clone'](),q=h['getContentSize']()['clone']();if(h['setContentSize'](j),k){let u=h['getPosition'](),v=u['x']-q['width']*p['x']+q['width']*k['x']+j['width']*p['x']-j['width']*k['x'],w=u['y']-q['height']*p['y']+q['height']*k['y']+j['height']*p['y']-j['height']*k['y'];h['setPosition'](v,w);}if(m){let x=(q['width']-j['width'])*(p['x']-m['x']),y=(q['height']-j['height'])*(p['y']-m['y']);for(let z of h['children']){let A=z['getPosition']();z['setPosition'](A['x']+x,A['y']+y);}}}static['safeChangeParent'](h,j){if(!h||!j)return;if(!(h=h instanceof cc['Node']?h:h['node'])['parent'])return;if(j=j instanceof cc['Node']?j:j['node'],h['parent']==j)return;let k=h['parent']['convertToWorldSpaceAR'](h['position']);h['parent']=j,h['setPosition'](j['convertToNodeSpaceAR'](k));}static['fillParent'](h){h&&h['parent']&&(this['setContentSize'](h,this['getContentSize'](h['parent'])),this['putInsideParentCorner'](h,cc['Vec2']['ZERO'],h['parent']));}static['updateWidgetAlignment'](h){h&&h['getComponentsInChildren'](cc['Widget'])['forEach'](j=>{j['updateAlignment']();});}static['buttonUpdateState'](h){if(!h)return;let j=h['interactable']?'@normal':'@disable';for(let k of h['node']['children'])k['name']['indexOf']('@')>=0x0&&(k['active']=k['name']['indexOf'](j)>=0x0);}}c['UIUtil']=g,cc['_RF']['pop']();},{}],'UidGenerator':[function(a,b,c){'use strict';cc['_RF']['push'](b,'564d2muxZJB+Ix0TYBdgOee','UidGenerator'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),c['UidGenerator']=void 0x0;class d{static['getNewUid'](f){var g;let h=(null!==(g=this['keyMap']['get'](f))&&void 0x0!==g?g:0x0)+0x1;return this['keyMap']['set'](f,h),h;}}c['UidGenerator']=d,d['keyMap']=new Map(),cc['_RF']['pop']();},{}],'config_audio':[function(a,b,c){'use strict';cc['_RF']['push'](b,'0608dP9KKhOgYbJIxbX3gDN','config_audio'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),cc['_RF']['pop']();},{}],'config_const':[function(a,b,c){'use strict';cc['_RF']['push'](b,'4c5bf+0vA9HO65B+6s9PeWu','config_const'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),cc['_RF']['pop']();},{}],'config_dungeon_master':[function(a,b,c){'use strict';cc['_RF']['push'](b,'f9aafDukwxLm4EbqJBttUyj','config_dungeon_master'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),cc['_RF']['pop']();},{}],'config_dungeon':[function(a,b,c){'use strict';cc['_RF']['push'](b,'98a5aiKUcNAgrikvDe4QtzA','config_dungeon'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),cc['_RF']['pop']();},{}],'config_item':[function(a,b,c){'use strict';cc['_RF']['push'](b,'1be85qCPelD0ZxszLBH6qbw','config_item'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),cc['_RF']['pop']();},{}],'config_lang':[function(a,b,c){'use strict';cc['_RF']['push'](b,'8bd86OP8vtMV4kMfKJP6WD+','config_lang'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),cc['_RF']['pop']();},{}],'config_tile':[function(a,b,c){'use strict';cc['_RF']['push'](b,'87421Vd4glHSYNyaQERR644','config_tile'),Object['defineProperty'](c,'__esModule',{'value':!0x0}),cc['_RF']['pop']();},{}]},{},['Config','config_audio','config_const','config_dungeon','config_dungeon_master','config_item','config_lang','config_tile','BaseCtrl','BaseDef','BaseEntity','BaseModel','BaseUIEntity','BaseUIItem','BaseUIListItem','BaseUIPanel','BaseUIView','ButtonCD','CCUtil','ClientConfig','ConfigManager','CtrlDefine','CtrlManager','EntityDefine','EntityManager','EntitySingleton','EntityWrap','EventDefine','EventManager','EventSubscriber','FollowTarget','GF','GameEnhanceComponent','GameLoader','GameRoot','GameVar','HttpManager','HttpUtil','IFrameUpdate','LayoutPolicy','LogUtil','MathUtil','ResAgent','ResManager','ScrollGridView','SimpleStateMachine','SoundManager','StorageManager','TabCtrl','TestItem','TestPanel','TestView','TimeUtil','TimerManager','UIClick','UIManager','UITouch','UIUtil','UidGenerator','BackendCtrl','BackendDefine','BackendEvent','BackendLib','BackendModel','BagCtrl','BagEvent','BagModel','CommonCtrl','CommonLib','FlashWhite','BagItem','ToastView','GameDefine','GameEnum','DungeonCtrl','DungeonDefine','DungeonEvent','DungeonModel','ElementMgr','FightEffect','FightElement','FightModelElement','MjTile','ModelMgr','ShakeLock','FightCtrl','FightDefine','FightEvent','FightLib','FightModuleBase','FightParam','FightProcess','FightLogicBase','FightLogicDefault','FightLogicFactory','FightBaseView','FightViewMgr','PathUtil','Load']);